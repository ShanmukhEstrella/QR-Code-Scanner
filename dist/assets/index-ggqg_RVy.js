function j2(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in t)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(t,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function z2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var l=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:function(){return t[s]}})}),r}var sf={exports:{}},ol={},of={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=Symbol.for("react.element"),H2=Symbol.for("react.portal"),W2=Symbol.for("react.fragment"),G2=Symbol.for("react.strict_mode"),X2=Symbol.for("react.profiler"),$2=Symbol.for("react.provider"),K2=Symbol.for("react.context"),Y2=Symbol.for("react.forward_ref"),q2=Symbol.for("react.suspense"),Z2=Symbol.for("react.memo"),Q2=Symbol.for("react.lazy"),mh=Symbol.iterator;function J2(t){return t===null||typeof t!="object"?null:(t=mh&&t[mh]||t["@@iterator"],typeof t=="function"?t:null)}var af={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lf=Object.assign,uf={};function ps(t,e,r){this.props=t,this.context=e,this.refs=uf,this.updater=r||af}ps.prototype.isReactComponent={};ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cf(){}cf.prototype=ps.prototype;function Xc(t,e,r){this.props=t,this.context=e,this.refs=uf,this.updater=r||af}var $c=Xc.prototype=new cf;$c.constructor=Xc;lf($c,ps.prototype);$c.isPureReactComponent=!0;var xh=Array.isArray,hf=Object.prototype.hasOwnProperty,Kc={current:null},df={key:!0,ref:!0,__self:!0,__source:!0};function ff(t,e,r){var s,l={},c=null,f=null;if(e!=null)for(s in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(c=""+e.key),e)hf.call(e,s)&&!df.hasOwnProperty(s)&&(l[s]=e[s]);var p=arguments.length-2;if(p===1)l.children=r;else if(1<p){for(var m=Array(p),x=0;x<p;x++)m[x]=arguments[x+2];l.children=m}if(t&&t.defaultProps)for(s in p=t.defaultProps,p)l[s]===void 0&&(l[s]=p[s]);return{$$typeof:So,type:t,key:c,ref:f,props:l,_owner:Kc.current}}function ep(t,e){return{$$typeof:So,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yc(t){return typeof t=="object"&&t!==null&&t.$$typeof===So}function tp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var yh=/\/+/g;function Ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tp(""+t.key):e.toString(36)}function ma(t,e,r,s,l){var c=typeof t;(c==="undefined"||c==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case So:case H2:f=!0}}if(f)return f=t,l=l(f),t=s===""?"."+Ql(f,0):s,xh(l)?(r="",t!=null&&(r=t.replace(yh,"$&/")+"/"),ma(l,e,r,"",function(x){return x})):l!=null&&(Yc(l)&&(l=ep(l,r+(!l.key||f&&f.key===l.key?"":(""+l.key).replace(yh,"$&/")+"/")+t)),e.push(l)),1;if(f=0,s=s===""?".":s+":",xh(t))for(var p=0;p<t.length;p++){c=t[p];var m=s+Ql(c,p);f+=ma(c,e,r,m,l)}else if(m=J2(t),typeof m=="function")for(t=m.call(t),p=0;!(c=t.next()).done;)c=c.value,m=s+Ql(c,p++),f+=ma(c,e,r,m,l);else if(c==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function Ko(t,e,r){if(t==null)return t;var s=[],l=0;return ma(t,s,"","",function(c){return e.call(r,c,l++)}),s}function np(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},xa={transition:null},rp={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:xa,ReactCurrentOwner:Kc};function gf(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Ko,forEach:function(t,e,r){Ko(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ko(t,function(){e++}),e},toArray:function(t){return Ko(t,function(e){return e})||[]},only:function(t){if(!Yc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=ps;Ce.Fragment=W2;Ce.Profiler=X2;Ce.PureComponent=Xc;Ce.StrictMode=G2;Ce.Suspense=q2;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rp;Ce.act=gf;Ce.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=lf({},t.props),l=t.key,c=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,f=Kc.current),e.key!==void 0&&(l=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(m in e)hf.call(e,m)&&!df.hasOwnProperty(m)&&(s[m]=e[m]===void 0&&p!==void 0?p[m]:e[m])}var m=arguments.length-2;if(m===1)s.children=r;else if(1<m){p=Array(m);for(var x=0;x<m;x++)p[x]=arguments[x+2];s.children=p}return{$$typeof:So,type:t.type,key:l,ref:c,props:s,_owner:f}};Ce.createContext=function(t){return t={$$typeof:K2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$2,_context:t},t.Consumer=t};Ce.createElement=ff;Ce.createFactory=function(t){var e=ff.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:Y2,render:t}};Ce.isValidElement=Yc;Ce.lazy=function(t){return{$$typeof:Q2,_payload:{_status:-1,_result:t},_init:np}};Ce.memo=function(t,e){return{$$typeof:Z2,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=xa.transition;xa.transition={};try{t()}finally{xa.transition=e}};Ce.unstable_act=gf;Ce.useCallback=function(t,e){return Wt.current.useCallback(t,e)};Ce.useContext=function(t){return Wt.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Wt.current.useEffect(t,e)};Ce.useId=function(){return Wt.current.useId()};Ce.useImperativeHandle=function(t,e,r){return Wt.current.useImperativeHandle(t,e,r)};Ce.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Wt.current.useMemo(t,e)};Ce.useReducer=function(t,e,r){return Wt.current.useReducer(t,e,r)};Ce.useRef=function(t){return Wt.current.useRef(t)};Ce.useState=function(t){return Wt.current.useState(t)};Ce.useSyncExternalStore=function(t,e,r){return Wt.current.useSyncExternalStore(t,e,r)};Ce.useTransition=function(){return Wt.current.useTransition()};Ce.version="18.3.1";of.exports=Ce;var Ie=of.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=Ie,sp=Symbol.for("react.element"),op=Symbol.for("react.fragment"),ap=Object.prototype.hasOwnProperty,lp=ip.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,up={key:!0,ref:!0,__self:!0,__source:!0};function pf(t,e,r){var s,l={},c=null,f=null;r!==void 0&&(c=""+r),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(f=e.ref);for(s in e)ap.call(e,s)&&!up.hasOwnProperty(s)&&(l[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)l[s]===void 0&&(l[s]=e[s]);return{$$typeof:sp,type:t,key:c,ref:f,props:l,_owner:lp.current}}ol.Fragment=op;ol.jsx=pf;ol.jsxs=pf;sf.exports=ol;var F=sf.exports,wf={exports:{}},dn={},mf={exports:{}},xf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,de){var ge=te.length;te.push(de);e:for(;0<ge;){var Ke=ge-1>>>1,Se=te[Ke];if(0<l(Se,de))te[Ke]=de,te[ge]=Se,ge=Ke;else break e}}function r(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var de=te[0],ge=te.pop();if(ge!==de){te[0]=ge;e:for(var Ke=0,Se=te.length,pn=Se>>>1;Ke<pn;){var Ze=2*(Ke+1)-1,$r=te[Ze],oe=Ze+1,fr=te[oe];if(0>l($r,ge))oe<Se&&0>l(fr,$r)?(te[Ke]=fr,te[oe]=ge,Ke=oe):(te[Ke]=$r,te[Ze]=ge,Ke=Ze);else if(oe<Se&&0>l(fr,ge))te[Ke]=fr,te[oe]=ge,Ke=oe;else break e}}return de}function l(te,de){var ge=te.sortIndex-de.sortIndex;return ge!==0?ge:te.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var m=[],x=[],E=1,_=null,T=3,O=!1,P=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(te){for(var de=r(x);de!==null;){if(de.callback===null)s(x);else if(de.startTime<=te)s(x),de.sortIndex=de.expirationTime,e(m,de);else break;de=r(x)}}function D(te){if(L=!1,S(te),!P)if(r(m)!==null)P=!0,nt(G);else{var de=r(x);de!==null&&we(D,de.startTime-te)}}function G(te,de){P=!1,L&&(L=!1,R(Y),Y=-1),O=!0;var ge=T;try{for(S(de),_=r(m);_!==null&&(!(_.expirationTime>de)||te&&!Re());){var Ke=_.callback;if(typeof Ke=="function"){_.callback=null,T=_.priorityLevel;var Se=Ke(_.expirationTime<=de);de=t.unstable_now(),typeof Se=="function"?_.callback=Se:_===r(m)&&s(m),S(de)}else s(m);_=r(m)}if(_!==null)var pn=!0;else{var Ze=r(x);Ze!==null&&we(D,Ze.startTime-de),pn=!1}return pn}finally{_=null,T=ge,O=!1}}var V=!1,B=null,Y=-1,X=5,ue=-1;function Re(){return!(t.unstable_now()-ue<X)}function ae(){if(B!==null){var te=t.unstable_now();ue=te;var de=!0;try{de=B(!0,te)}finally{de?pe():(V=!1,B=null)}}else V=!1}var pe;if(typeof I=="function")pe=function(){I(ae)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,W=lt.port2;lt.port1.onmessage=ae,pe=function(){W.postMessage(null)}}else pe=function(){$(ae,0)};function nt(te){B=te,V||(V=!0,pe())}function we(te,de){Y=$(function(){te(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){P||O||(P=!0,nt(G))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return r(m)},t.unstable_next=function(te){switch(T){case 1:case 2:case 3:var de=3;break;default:de=T}var ge=T;T=de;try{return te()}finally{T=ge}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,de){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ge=T;T=te;try{return de()}finally{T=ge}},t.unstable_scheduleCallback=function(te,de,ge){var Ke=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ke+ge:Ke):ge=Ke,te){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ge+Se,te={id:E++,callback:de,priorityLevel:te,startTime:ge,expirationTime:Se,sortIndex:-1},ge>Ke?(te.sortIndex=ge,e(x,te),r(m)===null&&te===r(x)&&(L?(R(Y),Y=-1):L=!0,we(D,ge-Ke))):(te.sortIndex=Se,e(m,te),P||O||(P=!0,nt(G))),te},t.unstable_shouldYield=Re,t.unstable_wrapCallback=function(te){var de=T;return function(){var ge=T;T=de;try{return te.apply(this,arguments)}finally{T=ge}}}})(xf);mf.exports=xf;var cp=mf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp=Ie,hn=cp;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yf=new Set,so={};function wi(t,e){rs(t,e),rs(t+"Capture",e)}function rs(t,e){for(so[t]=e,t=0;t<e.length;t++)yf.add(e[t])}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=Object.prototype.hasOwnProperty,dp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eh={},vh={};function fp(t){return Lu.call(vh,t)?!0:Lu.call(Eh,t)?!1:dp.test(t)?vh[t]=!0:(Eh[t]=!0,!1)}function gp(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pp(t,e,r,s){if(e===null||typeof e>"u"||gp(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,r,s,l,c,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=c,this.removeEmptyString=f}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var qc=/[\-:]([a-z])/g;function Zc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qc,Zc);kt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qc,Zc);kt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qc,Zc);kt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qc(t,e,r,s){var l=kt.hasOwnProperty(e)?kt[e]:null;(l!==null?l.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pp(e,r,l,s)&&(r=null),s||l===null?fp(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):l.mustUseProperty?t[l.propertyName]=r===null?l.type===3?!1:"":r:(e=l.attributeName,s=l.attributeNamespace,r===null?t.removeAttribute(e):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var dr=hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yo=Symbol.for("react.element"),Fi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),Jc=Symbol.for("react.strict_mode"),Fu=Symbol.for("react.profiler"),Ef=Symbol.for("react.provider"),vf=Symbol.for("react.context"),e0=Symbol.for("react.forward_ref"),Uu=Symbol.for("react.suspense"),ju=Symbol.for("react.suspense_list"),t0=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),Cf=Symbol.for("react.offscreen"),Ch=Symbol.iterator;function ks(t){return t===null||typeof t!="object"?null:(t=Ch&&t[Ch]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Jl;function Vs(t){if(Jl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Jl=e&&e[1]||""}return`
`+Jl+t}var eu=!1;function tu(t,e){if(!t||eu)return"";eu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(x){var s=x}Reflect.construct(t,[],e)}else{try{e.call()}catch(x){s=x}t.call(e.prototype)}else{try{throw Error()}catch(x){s=x}t()}}catch(x){if(x&&s&&typeof x.stack=="string"){for(var l=x.stack.split(`
`),c=s.stack.split(`
`),f=l.length-1,p=c.length-1;1<=f&&0<=p&&l[f]!==c[p];)p--;for(;1<=f&&0<=p;f--,p--)if(l[f]!==c[p]){if(f!==1||p!==1)do if(f--,p--,0>p||l[f]!==c[p]){var m=`
`+l[f].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=f&&0<=p);break}}}finally{eu=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Vs(t):""}function wp(t){switch(t.tag){case 5:return Vs(t.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 2:case 15:return t=tu(t.type,!1),t;case 11:return t=tu(t.type.render,!1),t;case 1:return t=tu(t.type,!0),t;default:return""}}function Vu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case Fi:return"Portal";case Fu:return"Profiler";case Jc:return"StrictMode";case Uu:return"Suspense";case ju:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vf:return(t.displayName||"Context")+".Consumer";case Ef:return(t._context.displayName||"Context")+".Provider";case e0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case t0:return e=t.displayName||null,e!==null?e:Vu(t.type)||"Memo";case Ar:e=t._payload,t=t._init;try{return Vu(t(e))}catch{}}return null}function mp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vu(e);case 8:return e===Jc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _f(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xp(t){var e=_f(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,c=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(f){s=""+f,c.call(this,f)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(f){s=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qo(t){t._valueTracker||(t._valueTracker=xp(t))}function Af(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=_f(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function Na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zu(t,e){var r=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function _h(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=jr(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sf(t,e){e=e.checked,e!=null&&Qc(t,"checked",e,!1)}function Hu(t,e){Sf(t,e);var r=jr(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wu(t,e.type,r):e.hasOwnProperty("defaultValue")&&Wu(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ah(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Wu(t,e,r){(e!=="number"||Na(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var zs=Array.isArray;function Zi(t,e,r,s){if(t=t.options,e){e={};for(var l=0;l<r.length;l++)e["$"+r[l]]=!0;for(r=0;r<t.length;r++)l=e.hasOwnProperty("$"+t[r].value),t[r].selected!==l&&(t[r].selected=l),l&&s&&(t[r].defaultSelected=!0)}else{for(r=""+jr(r),e=null,l=0;l<t.length;l++){if(t[l].value===r){t[l].selected=!0,s&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function Gu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sh(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Z(92));if(zs(r)){if(1<r.length)throw Error(Z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:jr(r)}}function If(t,e){var r=jr(e.value),s=jr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function Ih(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zo,Tf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,l){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,l)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zo=Zo||document.createElement("div"),Zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oo(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yp=["Webkit","ms","Moz","O"];Object.keys(Xs).forEach(function(t){yp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xs[e]=Xs[t]})});function Nf(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Xs.hasOwnProperty(t)&&Xs[t]?(""+e).trim():e+"px"}function Rf(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,l=Nf(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,l):t[r]=l}}var Ep=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(t,e){if(e){if(Ep[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=null;function n0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qu=null,Qi=null,Ji=null;function bh(t){if(t=To(t)){if(typeof qu!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=hl(e),qu(t.stateNode,t.type,e))}}function Of(t){Qi?Ji?Ji.push(t):Ji=[t]:Qi=t}function kf(){if(Qi){var t=Qi,e=Ji;if(Ji=Qi=null,bh(t),e)for(t=0;t<e.length;t++)bh(e[t])}}function Df(t,e){return t(e)}function Pf(){}var nu=!1;function Mf(t,e,r){if(nu)return t(e,r);nu=!0;try{return Df(t,e,r)}finally{nu=!1,(Qi!==null||Ji!==null)&&(Pf(),kf())}}function ao(t,e){var r=t.stateNode;if(r===null)return null;var s=hl(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Z(231,e,typeof r));return r}var Zu=!1;if(lr)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Zu=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Zu=!1}function vp(t,e,r,s,l,c,f,p,m){var x=Array.prototype.slice.call(arguments,3);try{e.apply(r,x)}catch(E){this.onError(E)}}var $s=!1,Ra=null,Oa=!1,Qu=null,Cp={onError:function(t){$s=!0,Ra=t}};function _p(t,e,r,s,l,c,f,p,m){$s=!1,Ra=null,vp.apply(Cp,arguments)}function Ap(t,e,r,s,l,c,f,p,m){if(_p.apply(this,arguments),$s){if($s){var x=Ra;$s=!1,Ra=null}else throw Error(Z(198));Oa||(Oa=!0,Qu=x)}}function mi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Bf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Th(t){if(mi(t)!==t)throw Error(Z(188))}function Sp(t){var e=t.alternate;if(!e){if(e=mi(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var r=t,s=e;;){var l=r.return;if(l===null)break;var c=l.alternate;if(c===null){if(s=l.return,s!==null){r=s;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===r)return Th(l),t;if(c===s)return Th(l),e;c=c.sibling}throw Error(Z(188))}if(r.return!==s.return)r=l,s=c;else{for(var f=!1,p=l.child;p;){if(p===r){f=!0,r=l,s=c;break}if(p===s){f=!0,s=l,r=c;break}p=p.sibling}if(!f){for(p=c.child;p;){if(p===r){f=!0,r=c,s=l;break}if(p===s){f=!0,s=c,r=l;break}p=p.sibling}if(!f)throw Error(Z(189))}}if(r.alternate!==s)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?t:e}function Lf(t){return t=Sp(t),t!==null?Ff(t):null}function Ff(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ff(t);if(e!==null)return e;t=t.sibling}return null}var Uf=hn.unstable_scheduleCallback,Nh=hn.unstable_cancelCallback,Ip=hn.unstable_shouldYield,bp=hn.unstable_requestPaint,ct=hn.unstable_now,Tp=hn.unstable_getCurrentPriorityLevel,r0=hn.unstable_ImmediatePriority,jf=hn.unstable_UserBlockingPriority,ka=hn.unstable_NormalPriority,Np=hn.unstable_LowPriority,Vf=hn.unstable_IdlePriority,al=null,qn=null;function Rp(t){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(al,t,void 0,(t.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:Dp,Op=Math.log,kp=Math.LN2;function Dp(t){return t>>>=0,t===0?32:31-(Op(t)/kp|0)|0}var Qo=64,Jo=4194304;function Hs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Da(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,l=t.suspendedLanes,c=t.pingedLanes,f=r&268435455;if(f!==0){var p=f&~l;p!==0?s=Hs(p):(c&=f,c!==0&&(s=Hs(c)))}else f=r&~l,f!==0?s=Hs(f):c!==0&&(s=Hs(c));if(s===0)return 0;if(e!==0&&e!==s&&!(e&l)&&(l=s&-s,c=e&-e,l>=c||l===16&&(c&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-Bn(e),l=1<<r,s|=t[r],e&=~l;return s}function Pp(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mp(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,l=t.expirationTimes,c=t.pendingLanes;0<c;){var f=31-Bn(c),p=1<<f,m=l[f];m===-1?(!(p&r)||p&s)&&(l[f]=Pp(p,e)):m<=e&&(t.expiredLanes|=p),c&=~p}}function Ju(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zf(){var t=Qo;return Qo<<=1,!(Qo&4194240)&&(Qo=64),t}function ru(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Io(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bn(e),t[e]=r}function Bp(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var l=31-Bn(r),c=1<<l;e[l]=0,s[l]=-1,t[l]=-1,r&=~c}}function i0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-Bn(r),l=1<<s;l&e|t[s]&e&&(t[s]|=e),r&=~l}}var Me=0;function Hf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wf,s0,Gf,Xf,$f,ec=!1,ea=[],kr=null,Dr=null,Pr=null,lo=new Map,uo=new Map,Ir=[],Lp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rh(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":lo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uo.delete(e.pointerId)}}function Ps(t,e,r,s,l,c){return t===null||t.nativeEvent!==c?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:c,targetContainers:[l]},e!==null&&(e=To(e),e!==null&&s0(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function Fp(t,e,r,s,l){switch(e){case"focusin":return kr=Ps(kr,t,e,r,s,l),!0;case"dragenter":return Dr=Ps(Dr,t,e,r,s,l),!0;case"mouseover":return Pr=Ps(Pr,t,e,r,s,l),!0;case"pointerover":var c=l.pointerId;return lo.set(c,Ps(lo.get(c)||null,t,e,r,s,l)),!0;case"gotpointercapture":return c=l.pointerId,uo.set(c,Ps(uo.get(c)||null,t,e,r,s,l)),!0}return!1}function Kf(t){var e=oi(t.target);if(e!==null){var r=mi(e);if(r!==null){if(e=r.tag,e===13){if(e=Bf(r),e!==null){t.blockedOn=e,$f(t.priority,function(){Gf(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ya(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=tc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Yu=s,r.target.dispatchEvent(s),Yu=null}else return e=To(r),e!==null&&s0(e),t.blockedOn=r,!1;e.shift()}return!0}function Oh(t,e,r){ya(t)&&r.delete(e)}function Up(){ec=!1,kr!==null&&ya(kr)&&(kr=null),Dr!==null&&ya(Dr)&&(Dr=null),Pr!==null&&ya(Pr)&&(Pr=null),lo.forEach(Oh),uo.forEach(Oh)}function Ms(t,e){t.blockedOn===e&&(t.blockedOn=null,ec||(ec=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,Up)))}function co(t){function e(l){return Ms(l,t)}if(0<ea.length){Ms(ea[0],t);for(var r=1;r<ea.length;r++){var s=ea[r];s.blockedOn===t&&(s.blockedOn=null)}}for(kr!==null&&Ms(kr,t),Dr!==null&&Ms(Dr,t),Pr!==null&&Ms(Pr,t),lo.forEach(e),uo.forEach(e),r=0;r<Ir.length;r++)s=Ir[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<Ir.length&&(r=Ir[0],r.blockedOn===null);)Kf(r),r.blockedOn===null&&Ir.shift()}var es=dr.ReactCurrentBatchConfig,Pa=!0;function jp(t,e,r,s){var l=Me,c=es.transition;es.transition=null;try{Me=1,o0(t,e,r,s)}finally{Me=l,es.transition=c}}function Vp(t,e,r,s){var l=Me,c=es.transition;es.transition=null;try{Me=4,o0(t,e,r,s)}finally{Me=l,es.transition=c}}function o0(t,e,r,s){if(Pa){var l=tc(t,e,r,s);if(l===null)fu(t,e,s,Ma,r),Rh(t,s);else if(Fp(l,t,e,r,s))s.stopPropagation();else if(Rh(t,s),e&4&&-1<Lp.indexOf(t)){for(;l!==null;){var c=To(l);if(c!==null&&Wf(c),c=tc(t,e,r,s),c===null&&fu(t,e,s,Ma,r),c===l)break;l=c}l!==null&&s.stopPropagation()}else fu(t,e,s,null,r)}}var Ma=null;function tc(t,e,r,s){if(Ma=null,t=n0(s),t=oi(t),t!==null)if(e=mi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Bf(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ma=t,null}function Yf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tp()){case r0:return 1;case jf:return 4;case ka:case Np:return 16;case Vf:return 536870912;default:return 16}default:return 16}}var Nr=null,a0=null,Ea=null;function qf(){if(Ea)return Ea;var t,e=a0,r=e.length,s,l="value"in Nr?Nr.value:Nr.textContent,c=l.length;for(t=0;t<r&&e[t]===l[t];t++);var f=r-t;for(s=1;s<=f&&e[r-s]===l[c-s];s++);return Ea=l.slice(t,1<s?1-s:void 0)}function va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ta(){return!0}function kh(){return!1}function fn(t){function e(r,s,l,c,f){this._reactName=r,this._targetInst=l,this.type=s,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(r=t[p],this[p]=r?r(c):c[p]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ta:kh,this.isPropagationStopped=kh,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),e}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l0=fn(ws),bo=tt({},ws,{view:0,detail:0}),zp=fn(bo),iu,su,Bs,ll=tt({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bs&&(Bs&&t.type==="mousemove"?(iu=t.screenX-Bs.screenX,su=t.screenY-Bs.screenY):su=iu=0,Bs=t),iu)},movementY:function(t){return"movementY"in t?t.movementY:su}}),Dh=fn(ll),Hp=tt({},ll,{dataTransfer:0}),Wp=fn(Hp),Gp=tt({},bo,{relatedTarget:0}),ou=fn(Gp),Xp=tt({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),$p=fn(Xp),Kp=tt({},ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yp=fn(Kp),qp=tt({},ws,{data:0}),Ph=fn(qp),Zp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ew(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Jp[t])?!!e[t]:!1}function u0(){return ew}var tw=tt({},bo,{key:function(t){if(t.key){var e=Zp[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qp[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u0,charCode:function(t){return t.type==="keypress"?va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nw=fn(tw),rw=tt({},ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=fn(rw),iw=tt({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u0}),sw=fn(iw),ow=tt({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),aw=fn(ow),lw=tt({},ll,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uw=fn(lw),cw=[9,13,27,32],c0=lr&&"CompositionEvent"in window,Ks=null;lr&&"documentMode"in document&&(Ks=document.documentMode);var hw=lr&&"TextEvent"in window&&!Ks,Zf=lr&&(!c0||Ks&&8<Ks&&11>=Ks),Bh=" ",Lh=!1;function Qf(t,e){switch(t){case"keyup":return cw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function dw(t,e){switch(t){case"compositionend":return Jf(e);case"keypress":return e.which!==32?null:(Lh=!0,Bh);case"textInput":return t=e.data,t===Bh&&Lh?null:t;default:return null}}function fw(t,e){if(ji)return t==="compositionend"||!c0&&Qf(t,e)?(t=qf(),Ea=a0=Nr=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zf&&e.locale!=="ko"?null:e.data;default:return null}}var gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gw[t.type]:e==="textarea"}function e1(t,e,r,s){Of(s),e=Ba(e,"onChange"),0<e.length&&(r=new l0("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var Ys=null,ho=null;function pw(t){h1(t,0)}function ul(t){var e=Hi(t);if(Af(e))return t}function ww(t,e){if(t==="change")return e}var t1=!1;if(lr){var au;if(lr){var lu="oninput"in document;if(!lu){var Uh=document.createElement("div");Uh.setAttribute("oninput","return;"),lu=typeof Uh.oninput=="function"}au=lu}else au=!1;t1=au&&(!document.documentMode||9<document.documentMode)}function jh(){Ys&&(Ys.detachEvent("onpropertychange",n1),ho=Ys=null)}function n1(t){if(t.propertyName==="value"&&ul(ho)){var e=[];e1(e,ho,t,n0(t)),Mf(pw,e)}}function mw(t,e,r){t==="focusin"?(jh(),Ys=e,ho=r,Ys.attachEvent("onpropertychange",n1)):t==="focusout"&&jh()}function xw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ul(ho)}function yw(t,e){if(t==="click")return ul(e)}function Ew(t,e){if(t==="input"||t==="change")return ul(e)}function vw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:vw;function fo(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var l=r[s];if(!Lu.call(e,l)||!Fn(t[l],e[l]))return!1}return!0}function Vh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zh(t,e){var r=Vh(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vh(r)}}function r1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i1(){for(var t=window,e=Na();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Na(t.document)}return e}function h0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Cw(t){var e=i1(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&r1(r.ownerDocument.documentElement,r)){if(s!==null&&h0(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var l=r.textContent.length,c=Math.min(s.start,l);s=s.end===void 0?c:Math.min(s.end,l),!t.extend&&c>s&&(l=s,s=c,c=l),l=zh(r,c);var f=zh(r,s);l&&f&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(l.node,l.offset),t.removeAllRanges(),c>s?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _w=lr&&"documentMode"in document&&11>=document.documentMode,Vi=null,nc=null,qs=null,rc=!1;function Hh(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rc||Vi==null||Vi!==Na(s)||(s=Vi,"selectionStart"in s&&h0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),qs&&fo(qs,s)||(qs=s,s=Ba(nc,"onSelect"),0<s.length&&(e=new l0("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=Vi)))}function na(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var zi={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionend:na("Transition","TransitionEnd")},uu={},s1={};lr&&(s1=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function cl(t){if(uu[t])return uu[t];if(!zi[t])return t;var e=zi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in s1)return uu[t]=e[r];return t}var o1=cl("animationend"),a1=cl("animationiteration"),l1=cl("animationstart"),u1=cl("transitionend"),c1=new Map,Wh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){c1.set(t,e),wi(e,[t])}for(var cu=0;cu<Wh.length;cu++){var hu=Wh[cu],Aw=hu.toLowerCase(),Sw=hu[0].toUpperCase()+hu.slice(1);zr(Aw,"on"+Sw)}zr(o1,"onAnimationEnd");zr(a1,"onAnimationIteration");zr(l1,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(u1,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ws));function Gh(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,Ap(s,e,void 0,t),t.currentTarget=null}function h1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],l=s.event;s=s.listeners;e:{var c=void 0;if(e)for(var f=s.length-1;0<=f;f--){var p=s[f],m=p.instance,x=p.currentTarget;if(p=p.listener,m!==c&&l.isPropagationStopped())break e;Gh(l,p,x),c=m}else for(f=0;f<s.length;f++){if(p=s[f],m=p.instance,x=p.currentTarget,p=p.listener,m!==c&&l.isPropagationStopped())break e;Gh(l,p,x),c=m}}}if(Oa)throw t=Qu,Oa=!1,Qu=null,t}function Ge(t,e){var r=e[lc];r===void 0&&(r=e[lc]=new Set);var s=t+"__bubble";r.has(s)||(d1(e,t,2,!1),r.add(s))}function du(t,e,r){var s=0;e&&(s|=4),d1(r,t,s,e)}var ra="_reactListening"+Math.random().toString(36).slice(2);function go(t){if(!t[ra]){t[ra]=!0,yf.forEach(function(r){r!=="selectionchange"&&(Iw.has(r)||du(r,!1,t),du(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ra]||(e[ra]=!0,du("selectionchange",!1,e))}}function d1(t,e,r,s){switch(Yf(e)){case 1:var l=jp;break;case 4:l=Vp;break;default:l=o0}r=l.bind(null,e,r,t),l=void 0,!Zu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),s?l!==void 0?t.addEventListener(e,r,{capture:!0,passive:l}):t.addEventListener(e,r,!0):l!==void 0?t.addEventListener(e,r,{passive:l}):t.addEventListener(e,r,!1)}function fu(t,e,r,s,l){var c=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var p=s.stateNode.containerInfo;if(p===l||p.nodeType===8&&p.parentNode===l)break;if(f===4)for(f=s.return;f!==null;){var m=f.tag;if((m===3||m===4)&&(m=f.stateNode.containerInfo,m===l||m.nodeType===8&&m.parentNode===l))return;f=f.return}for(;p!==null;){if(f=oi(p),f===null)return;if(m=f.tag,m===5||m===6){s=c=f;continue e}p=p.parentNode}}s=s.return}Mf(function(){var x=c,E=n0(r),_=[];e:{var T=c1.get(t);if(T!==void 0){var O=l0,P=t;switch(t){case"keypress":if(va(r)===0)break e;case"keydown":case"keyup":O=nw;break;case"focusin":P="focus",O=ou;break;case"focusout":P="blur",O=ou;break;case"beforeblur":case"afterblur":O=ou;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=Wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=sw;break;case o1:case a1:case l1:O=$p;break;case u1:O=aw;break;case"scroll":O=zp;break;case"wheel":O=uw;break;case"copy":case"cut":case"paste":O=Yp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Mh}var L=(e&4)!==0,$=!L&&t==="scroll",R=L?T!==null?T+"Capture":null:T;L=[];for(var I=x,S;I!==null;){S=I;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,R!==null&&(D=ao(I,R),D!=null&&L.push(po(I,D,S)))),$)break;I=I.return}0<L.length&&(T=new O(T,P,null,r,E),_.push({event:T,listeners:L}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",T&&r!==Yu&&(P=r.relatedTarget||r.fromElement)&&(oi(P)||P[ur]))break e;if((O||T)&&(T=E.window===E?E:(T=E.ownerDocument)?T.defaultView||T.parentWindow:window,O?(P=r.relatedTarget||r.toElement,O=x,P=P?oi(P):null,P!==null&&($=mi(P),P!==$||P.tag!==5&&P.tag!==6)&&(P=null)):(O=null,P=x),O!==P)){if(L=Dh,D="onMouseLeave",R="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(L=Mh,D="onPointerLeave",R="onPointerEnter",I="pointer"),$=O==null?T:Hi(O),S=P==null?T:Hi(P),T=new L(D,I+"leave",O,r,E),T.target=$,T.relatedTarget=S,D=null,oi(E)===x&&(L=new L(R,I+"enter",P,r,E),L.target=S,L.relatedTarget=$,D=L),$=D,O&&P)t:{for(L=O,R=P,I=0,S=L;S;S=Ri(S))I++;for(S=0,D=R;D;D=Ri(D))S++;for(;0<I-S;)L=Ri(L),I--;for(;0<S-I;)R=Ri(R),S--;for(;I--;){if(L===R||R!==null&&L===R.alternate)break t;L=Ri(L),R=Ri(R)}L=null}else L=null;O!==null&&Xh(_,T,O,L,!1),P!==null&&$!==null&&Xh(_,$,P,L,!0)}}e:{if(T=x?Hi(x):window,O=T.nodeName&&T.nodeName.toLowerCase(),O==="select"||O==="input"&&T.type==="file")var G=ww;else if(Fh(T))if(t1)G=Ew;else{G=xw;var V=mw}else(O=T.nodeName)&&O.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(G=yw);if(G&&(G=G(t,x))){e1(_,G,r,E);break e}V&&V(t,T,x),t==="focusout"&&(V=T._wrapperState)&&V.controlled&&T.type==="number"&&Wu(T,"number",T.value)}switch(V=x?Hi(x):window,t){case"focusin":(Fh(V)||V.contentEditable==="true")&&(Vi=V,nc=x,qs=null);break;case"focusout":qs=nc=Vi=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,Hh(_,r,E);break;case"selectionchange":if(_w)break;case"keydown":case"keyup":Hh(_,r,E)}var B;if(c0)e:{switch(t){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else ji?Qf(t,r)&&(Y="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Y="onCompositionStart");Y&&(Zf&&r.locale!=="ko"&&(ji||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&ji&&(B=qf()):(Nr=E,a0="value"in Nr?Nr.value:Nr.textContent,ji=!0)),V=Ba(x,Y),0<V.length&&(Y=new Ph(Y,t,null,r,E),_.push({event:Y,listeners:V}),B?Y.data=B:(B=Jf(r),B!==null&&(Y.data=B)))),(B=hw?dw(t,r):fw(t,r))&&(x=Ba(x,"onBeforeInput"),0<x.length&&(E=new Ph("onBeforeInput","beforeinput",null,r,E),_.push({event:E,listeners:x}),E.data=B))}h1(_,e)})}function po(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ba(t,e){for(var r=e+"Capture",s=[];t!==null;){var l=t,c=l.stateNode;l.tag===5&&c!==null&&(l=c,c=ao(t,r),c!=null&&s.unshift(po(t,c,l)),c=ao(t,e),c!=null&&s.push(po(t,c,l))),t=t.return}return s}function Ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xh(t,e,r,s,l){for(var c=e._reactName,f=[];r!==null&&r!==s;){var p=r,m=p.alternate,x=p.stateNode;if(m!==null&&m===s)break;p.tag===5&&x!==null&&(p=x,l?(m=ao(r,c),m!=null&&f.unshift(po(r,m,p))):l||(m=ao(r,c),m!=null&&f.push(po(r,m,p)))),r=r.return}f.length!==0&&t.push({event:e,listeners:f})}var bw=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function $h(t){return(typeof t=="string"?t:""+t).replace(bw,`
`).replace(Tw,"")}function ia(t,e,r){if(e=$h(e),$h(t)!==e&&r)throw Error(Z(425))}function La(){}var ic=null,sc=null;function oc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ac=typeof setTimeout=="function"?setTimeout:void 0,Nw=typeof clearTimeout=="function"?clearTimeout:void 0,Kh=typeof Promise=="function"?Promise:void 0,Rw=typeof queueMicrotask=="function"?queueMicrotask:typeof Kh<"u"?function(t){return Kh.resolve(null).then(t).catch(Ow)}:ac;function Ow(t){setTimeout(function(){throw t})}function gu(t,e){var r=e,s=0;do{var l=r.nextSibling;if(t.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(s===0){t.removeChild(l),co(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=l}while(r);co(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ms=Math.random().toString(36).slice(2),Yn="__reactFiber$"+ms,wo="__reactProps$"+ms,ur="__reactContainer$"+ms,lc="__reactEvents$"+ms,kw="__reactListeners$"+ms,Dw="__reactHandles$"+ms;function oi(t){var e=t[Yn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ur]||r[Yn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Yh(t);t!==null;){if(r=t[Yn])return r;t=Yh(t)}return e}t=r,r=t.parentNode}return null}function To(t){return t=t[Yn]||t[ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function hl(t){return t[wo]||null}var uc=[],Wi=-1;function Hr(t){return{current:t}}function $e(t){0>Wi||(t.current=uc[Wi],uc[Wi]=null,Wi--)}function He(t,e){Wi++,uc[Wi]=t.current,t.current=e}var Vr={},Ft=Hr(Vr),nn=Hr(!1),hi=Vr;function is(t,e){var r=t.type.contextTypes;if(!r)return Vr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var l={},c;for(c in r)l[c]=e[c];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=l),l}function rn(t){return t=t.childContextTypes,t!=null}function Fa(){$e(nn),$e(Ft)}function qh(t,e,r){if(Ft.current!==Vr)throw Error(Z(168));He(Ft,e),He(nn,r)}function f1(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var l in s)if(!(l in e))throw Error(Z(108,mp(t)||"Unknown",l));return tt({},r,s)}function Ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vr,hi=Ft.current,He(Ft,t),He(nn,nn.current),!0}function Zh(t,e,r){var s=t.stateNode;if(!s)throw Error(Z(169));r?(t=f1(t,e,hi),s.__reactInternalMemoizedMergedChildContext=t,$e(nn),$e(Ft),He(Ft,t)):$e(nn),He(nn,r)}var ir=null,dl=!1,pu=!1;function g1(t){ir===null?ir=[t]:ir.push(t)}function Pw(t){dl=!0,g1(t)}function Wr(){if(!pu&&ir!==null){pu=!0;var t=0,e=Me;try{var r=ir;for(Me=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}ir=null,dl=!1}catch(l){throw ir!==null&&(ir=ir.slice(t+1)),Uf(r0,Wr),l}finally{Me=e,pu=!1}}return null}var Gi=[],Xi=0,ja=null,Va=0,En=[],vn=0,di=null,sr=1,or="";function ni(t,e){Gi[Xi++]=Va,Gi[Xi++]=ja,ja=t,Va=e}function p1(t,e,r){En[vn++]=sr,En[vn++]=or,En[vn++]=di,di=t;var s=sr;t=or;var l=32-Bn(s)-1;s&=~(1<<l),r+=1;var c=32-Bn(e)+l;if(30<c){var f=l-l%5;c=(s&(1<<f)-1).toString(32),s>>=f,l-=f,sr=1<<32-Bn(e)+l|r<<l|s,or=c+t}else sr=1<<c|r<<l|s,or=t}function d0(t){t.return!==null&&(ni(t,1),p1(t,1,0))}function f0(t){for(;t===ja;)ja=Gi[--Xi],Gi[Xi]=null,Va=Gi[--Xi],Gi[Xi]=null;for(;t===di;)di=En[--vn],En[vn]=null,or=En[--vn],En[vn]=null,sr=En[--vn],En[vn]=null}var cn=null,un=null,qe=!1,Pn=null;function w1(t,e){var r=Cn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Qh(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,un=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=di!==null?{id:sr,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Cn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,cn=t,un=null,!0):!1;default:return!1}}function cc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hc(t){if(qe){var e=un;if(e){var r=e;if(!Qh(t,e)){if(cc(t))throw Error(Z(418));e=Mr(r.nextSibling);var s=cn;e&&Qh(t,e)?w1(s,r):(t.flags=t.flags&-4097|2,qe=!1,cn=t)}}else{if(cc(t))throw Error(Z(418));t.flags=t.flags&-4097|2,qe=!1,cn=t}}}function Jh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function sa(t){if(t!==cn)return!1;if(!qe)return Jh(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oc(t.type,t.memoizedProps)),e&&(e=un)){if(cc(t))throw m1(),Error(Z(418));for(;e;)w1(t,e),e=Mr(e.nextSibling)}if(Jh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){un=Mr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}un=null}}else un=cn?Mr(t.stateNode.nextSibling):null;return!0}function m1(){for(var t=un;t;)t=Mr(t.nextSibling)}function ss(){un=cn=null,qe=!1}function g0(t){Pn===null?Pn=[t]:Pn.push(t)}var Mw=dr.ReactCurrentBatchConfig;function Ls(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var s=r.stateNode}if(!s)throw Error(Z(147,t));var l=s,c=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(f){var p=l.refs;f===null?delete p[c]:p[c]=f},e._stringRef=c,e)}if(typeof t!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,t))}return t}function oa(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ed(t){var e=t._init;return e(t._payload)}function x1(t){function e(R,I){if(t){var S=R.deletions;S===null?(R.deletions=[I],R.flags|=16):S.push(I)}}function r(R,I){if(!t)return null;for(;I!==null;)e(R,I),I=I.sibling;return null}function s(R,I){for(R=new Map;I!==null;)I.key!==null?R.set(I.key,I):R.set(I.index,I),I=I.sibling;return R}function l(R,I){return R=Ur(R,I),R.index=0,R.sibling=null,R}function c(R,I,S){return R.index=S,t?(S=R.alternate,S!==null?(S=S.index,S<I?(R.flags|=2,I):S):(R.flags|=2,I)):(R.flags|=1048576,I)}function f(R){return t&&R.alternate===null&&(R.flags|=2),R}function p(R,I,S,D){return I===null||I.tag!==6?(I=Cu(S,R.mode,D),I.return=R,I):(I=l(I,S),I.return=R,I)}function m(R,I,S,D){var G=S.type;return G===Ui?E(R,I,S.props.children,D,S.key):I!==null&&(I.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Ar&&ed(G)===I.type)?(D=l(I,S.props),D.ref=Ls(R,I,S),D.return=R,D):(D=Ta(S.type,S.key,S.props,null,R.mode,D),D.ref=Ls(R,I,S),D.return=R,D)}function x(R,I,S,D){return I===null||I.tag!==4||I.stateNode.containerInfo!==S.containerInfo||I.stateNode.implementation!==S.implementation?(I=_u(S,R.mode,D),I.return=R,I):(I=l(I,S.children||[]),I.return=R,I)}function E(R,I,S,D,G){return I===null||I.tag!==7?(I=ci(S,R.mode,D,G),I.return=R,I):(I=l(I,S),I.return=R,I)}function _(R,I,S){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Cu(""+I,R.mode,S),I.return=R,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Yo:return S=Ta(I.type,I.key,I.props,null,R.mode,S),S.ref=Ls(R,null,I),S.return=R,S;case Fi:return I=_u(I,R.mode,S),I.return=R,I;case Ar:var D=I._init;return _(R,D(I._payload),S)}if(zs(I)||ks(I))return I=ci(I,R.mode,S,null),I.return=R,I;oa(R,I)}return null}function T(R,I,S,D){var G=I!==null?I.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return G!==null?null:p(R,I,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Yo:return S.key===G?m(R,I,S,D):null;case Fi:return S.key===G?x(R,I,S,D):null;case Ar:return G=S._init,T(R,I,G(S._payload),D)}if(zs(S)||ks(S))return G!==null?null:E(R,I,S,D,null);oa(R,S)}return null}function O(R,I,S,D,G){if(typeof D=="string"&&D!==""||typeof D=="number")return R=R.get(S)||null,p(I,R,""+D,G);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Yo:return R=R.get(D.key===null?S:D.key)||null,m(I,R,D,G);case Fi:return R=R.get(D.key===null?S:D.key)||null,x(I,R,D,G);case Ar:var V=D._init;return O(R,I,S,V(D._payload),G)}if(zs(D)||ks(D))return R=R.get(S)||null,E(I,R,D,G,null);oa(I,D)}return null}function P(R,I,S,D){for(var G=null,V=null,B=I,Y=I=0,X=null;B!==null&&Y<S.length;Y++){B.index>Y?(X=B,B=null):X=B.sibling;var ue=T(R,B,S[Y],D);if(ue===null){B===null&&(B=X);break}t&&B&&ue.alternate===null&&e(R,B),I=c(ue,I,Y),V===null?G=ue:V.sibling=ue,V=ue,B=X}if(Y===S.length)return r(R,B),qe&&ni(R,Y),G;if(B===null){for(;Y<S.length;Y++)B=_(R,S[Y],D),B!==null&&(I=c(B,I,Y),V===null?G=B:V.sibling=B,V=B);return qe&&ni(R,Y),G}for(B=s(R,B);Y<S.length;Y++)X=O(B,R,Y,S[Y],D),X!==null&&(t&&X.alternate!==null&&B.delete(X.key===null?Y:X.key),I=c(X,I,Y),V===null?G=X:V.sibling=X,V=X);return t&&B.forEach(function(Re){return e(R,Re)}),qe&&ni(R,Y),G}function L(R,I,S,D){var G=ks(S);if(typeof G!="function")throw Error(Z(150));if(S=G.call(S),S==null)throw Error(Z(151));for(var V=G=null,B=I,Y=I=0,X=null,ue=S.next();B!==null&&!ue.done;Y++,ue=S.next()){B.index>Y?(X=B,B=null):X=B.sibling;var Re=T(R,B,ue.value,D);if(Re===null){B===null&&(B=X);break}t&&B&&Re.alternate===null&&e(R,B),I=c(Re,I,Y),V===null?G=Re:V.sibling=Re,V=Re,B=X}if(ue.done)return r(R,B),qe&&ni(R,Y),G;if(B===null){for(;!ue.done;Y++,ue=S.next())ue=_(R,ue.value,D),ue!==null&&(I=c(ue,I,Y),V===null?G=ue:V.sibling=ue,V=ue);return qe&&ni(R,Y),G}for(B=s(R,B);!ue.done;Y++,ue=S.next())ue=O(B,R,Y,ue.value,D),ue!==null&&(t&&ue.alternate!==null&&B.delete(ue.key===null?Y:ue.key),I=c(ue,I,Y),V===null?G=ue:V.sibling=ue,V=ue);return t&&B.forEach(function(ae){return e(R,ae)}),qe&&ni(R,Y),G}function $(R,I,S,D){if(typeof S=="object"&&S!==null&&S.type===Ui&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Yo:e:{for(var G=S.key,V=I;V!==null;){if(V.key===G){if(G=S.type,G===Ui){if(V.tag===7){r(R,V.sibling),I=l(V,S.props.children),I.return=R,R=I;break e}}else if(V.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Ar&&ed(G)===V.type){r(R,V.sibling),I=l(V,S.props),I.ref=Ls(R,V,S),I.return=R,R=I;break e}r(R,V);break}else e(R,V);V=V.sibling}S.type===Ui?(I=ci(S.props.children,R.mode,D,S.key),I.return=R,R=I):(D=Ta(S.type,S.key,S.props,null,R.mode,D),D.ref=Ls(R,I,S),D.return=R,R=D)}return f(R);case Fi:e:{for(V=S.key;I!==null;){if(I.key===V)if(I.tag===4&&I.stateNode.containerInfo===S.containerInfo&&I.stateNode.implementation===S.implementation){r(R,I.sibling),I=l(I,S.children||[]),I.return=R,R=I;break e}else{r(R,I);break}else e(R,I);I=I.sibling}I=_u(S,R.mode,D),I.return=R,R=I}return f(R);case Ar:return V=S._init,$(R,I,V(S._payload),D)}if(zs(S))return P(R,I,S,D);if(ks(S))return L(R,I,S,D);oa(R,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,I!==null&&I.tag===6?(r(R,I.sibling),I=l(I,S),I.return=R,R=I):(r(R,I),I=Cu(S,R.mode,D),I.return=R,R=I),f(R)):r(R,I)}return $}var os=x1(!0),y1=x1(!1),za=Hr(null),Ha=null,$i=null,p0=null;function w0(){p0=$i=Ha=null}function m0(t){var e=za.current;$e(za),t._currentValue=e}function dc(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function ts(t,e){Ha=t,p0=$i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if(p0!==t)if(t={context:t,memoizedValue:e,next:null},$i===null){if(Ha===null)throw Error(Z(308));$i=t,Ha.dependencies={lanes:0,firstContext:t}}else $i=$i.next=t;return e}var ai=null;function x0(t){ai===null?ai=[t]:ai.push(t)}function E1(t,e,r,s){var l=e.interleaved;return l===null?(r.next=r,x0(e)):(r.next=l.next,l.next=r),e.interleaved=r,cr(t,s)}function cr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Sr=!1;function y0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Br(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Ne&2){var l=s.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),s.pending=e,cr(t,r)}return l=s.interleaved,l===null?(e.next=e,x0(s)):(e.next=l.next,l.next=e),s.interleaved=e,cr(t,r)}function Ca(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,i0(t,r)}}function td(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var l=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?l=c=f:c=c.next=f,r=r.next}while(r!==null);c===null?l=c=e:c=c.next=e}else l=c=e;r={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Wa(t,e,r,s){var l=t.updateQueue;Sr=!1;var c=l.firstBaseUpdate,f=l.lastBaseUpdate,p=l.shared.pending;if(p!==null){l.shared.pending=null;var m=p,x=m.next;m.next=null,f===null?c=x:f.next=x,f=m;var E=t.alternate;E!==null&&(E=E.updateQueue,p=E.lastBaseUpdate,p!==f&&(p===null?E.firstBaseUpdate=x:p.next=x,E.lastBaseUpdate=m))}if(c!==null){var _=l.baseState;f=0,E=x=m=null,p=c;do{var T=p.lane,O=p.eventTime;if((s&T)===T){E!==null&&(E=E.next={eventTime:O,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var P=t,L=p;switch(T=e,O=r,L.tag){case 1:if(P=L.payload,typeof P=="function"){_=P.call(O,_,T);break e}_=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=L.payload,T=typeof P=="function"?P.call(O,_,T):P,T==null)break e;_=tt({},_,T);break e;case 2:Sr=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,T=l.effects,T===null?l.effects=[p]:T.push(p))}else O={eventTime:O,lane:T,tag:p.tag,payload:p.payload,callback:p.callback,next:null},E===null?(x=E=O,m=_):E=E.next=O,f|=T;if(p=p.next,p===null){if(p=l.shared.pending,p===null)break;T=p,p=T.next,T.next=null,l.lastBaseUpdate=T,l.shared.pending=null}}while(!0);if(E===null&&(m=_),l.baseState=m,l.firstBaseUpdate=x,l.lastBaseUpdate=E,e=l.shared.interleaved,e!==null){l=e;do f|=l.lane,l=l.next;while(l!==e)}else c===null&&(l.shared.lanes=0);gi|=f,t.lanes=f,t.memoizedState=_}}function nd(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],l=s.callback;if(l!==null){if(s.callback=null,s=r,typeof l!="function")throw Error(Z(191,l));l.call(s)}}}var No={},Zn=Hr(No),mo=Hr(No),xo=Hr(No);function li(t){if(t===No)throw Error(Z(174));return t}function E0(t,e){switch(He(xo,e),He(mo,t),He(Zn,No),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xu(e,t)}$e(Zn),He(Zn,e)}function as(){$e(Zn),$e(mo),$e(xo)}function C1(t){li(xo.current);var e=li(Zn.current),r=Xu(e,t.type);e!==r&&(He(mo,t),He(Zn,r))}function v0(t){mo.current===t&&($e(Zn),$e(mo))}var Je=Hr(0);function Ga(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wu=[];function C0(){for(var t=0;t<wu.length;t++)wu[t]._workInProgressVersionPrimary=null;wu.length=0}var _a=dr.ReactCurrentDispatcher,mu=dr.ReactCurrentBatchConfig,fi=0,et=null,xt=null,_t=null,Xa=!1,Zs=!1,yo=0,Bw=0;function Mt(){throw Error(Z(321))}function _0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Fn(t[r],e[r]))return!1;return!0}function A0(t,e,r,s,l,c){if(fi=c,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_a.current=t===null||t.memoizedState===null?jw:Vw,t=r(s,l),Zs){c=0;do{if(Zs=!1,yo=0,25<=c)throw Error(Z(301));c+=1,_t=xt=null,e.updateQueue=null,_a.current=zw,t=r(s,l)}while(Zs)}if(_a.current=$a,e=xt!==null&&xt.next!==null,fi=0,_t=xt=et=null,Xa=!1,e)throw Error(Z(300));return t}function S0(){var t=yo!==0;return yo=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?et.memoizedState=_t=t:_t=_t.next=t,_t}function Sn(){if(xt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=_t===null?et.memoizedState:_t.next;if(e!==null)_t=e,xt=t;else{if(t===null)throw Error(Z(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},_t===null?et.memoizedState=_t=t:_t=_t.next=t}return _t}function Eo(t,e){return typeof e=="function"?e(t):e}function xu(t){var e=Sn(),r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=t;var s=xt,l=s.baseQueue,c=r.pending;if(c!==null){if(l!==null){var f=l.next;l.next=c.next,c.next=f}s.baseQueue=l=c,r.pending=null}if(l!==null){c=l.next,s=s.baseState;var p=f=null,m=null,x=c;do{var E=x.lane;if((fi&E)===E)m!==null&&(m=m.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),s=x.hasEagerState?x.eagerState:t(s,x.action);else{var _={lane:E,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};m===null?(p=m=_,f=s):m=m.next=_,et.lanes|=E,gi|=E}x=x.next}while(x!==null&&x!==c);m===null?f=s:m.next=p,Fn(s,e.memoizedState)||(tn=!0),e.memoizedState=s,e.baseState=f,e.baseQueue=m,r.lastRenderedState=s}if(t=r.interleaved,t!==null){l=t;do c=l.lane,et.lanes|=c,gi|=c,l=l.next;while(l!==t)}else l===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function yu(t){var e=Sn(),r=e.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=t;var s=r.dispatch,l=r.pending,c=e.memoizedState;if(l!==null){r.pending=null;var f=l=l.next;do c=t(c,f.action),f=f.next;while(f!==l);Fn(c,e.memoizedState)||(tn=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),r.lastRenderedState=c}return[c,s]}function _1(){}function A1(t,e){var r=et,s=Sn(),l=e(),c=!Fn(s.memoizedState,l);if(c&&(s.memoizedState=l,tn=!0),s=s.queue,I0(b1.bind(null,r,s,t),[t]),s.getSnapshot!==e||c||_t!==null&&_t.memoizedState.tag&1){if(r.flags|=2048,vo(9,I1.bind(null,r,s,l,e),void 0,null),At===null)throw Error(Z(349));fi&30||S1(r,e,l)}return l}function S1(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function I1(t,e,r,s){e.value=r,e.getSnapshot=s,T1(e)&&N1(t)}function b1(t,e,r){return r(function(){T1(e)&&N1(t)})}function T1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Fn(t,r)}catch{return!0}}function N1(t){var e=cr(t,1);e!==null&&Ln(e,t,1,-1)}function rd(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:t},e.queue=t,t=t.dispatch=Uw.bind(null,et,t),[e.memoizedState,t]}function vo(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function R1(){return Sn().memoizedState}function Aa(t,e,r,s){var l=$n();et.flags|=t,l.memoizedState=vo(1|e,r,void 0,s===void 0?null:s)}function fl(t,e,r,s){var l=Sn();s=s===void 0?null:s;var c=void 0;if(xt!==null){var f=xt.memoizedState;if(c=f.destroy,s!==null&&_0(s,f.deps)){l.memoizedState=vo(e,r,c,s);return}}et.flags|=t,l.memoizedState=vo(1|e,r,c,s)}function id(t,e){return Aa(8390656,8,t,e)}function I0(t,e){return fl(2048,8,t,e)}function O1(t,e){return fl(4,2,t,e)}function k1(t,e){return fl(4,4,t,e)}function D1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P1(t,e,r){return r=r!=null?r.concat([t]):null,fl(4,4,D1.bind(null,e,t),r)}function b0(){}function M1(t,e){var r=Sn();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&_0(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function B1(t,e){var r=Sn();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&_0(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function L1(t,e,r){return fi&21?(Fn(r,e)||(r=zf(),et.lanes|=r,gi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=r)}function Lw(t,e){var r=Me;Me=r!==0&&4>r?r:4,t(!0);var s=mu.transition;mu.transition={};try{t(!1),e()}finally{Me=r,mu.transition=s}}function F1(){return Sn().memoizedState}function Fw(t,e,r){var s=Fr(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},U1(t))j1(e,r);else if(r=E1(t,e,r,s),r!==null){var l=Ht();Ln(r,t,s,l),V1(r,e,s)}}function Uw(t,e,r){var s=Fr(t),l={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(U1(t))j1(e,l);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var f=e.lastRenderedState,p=c(f,r);if(l.hasEagerState=!0,l.eagerState=p,Fn(p,f)){var m=e.interleaved;m===null?(l.next=l,x0(e)):(l.next=m.next,m.next=l),e.interleaved=l;return}}catch{}finally{}r=E1(t,e,l,s),r!==null&&(l=Ht(),Ln(r,t,s,l),V1(r,e,s))}}function U1(t){var e=t.alternate;return t===et||e!==null&&e===et}function j1(t,e){Zs=Xa=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function V1(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,i0(t,r)}}var $a={readContext:An,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},jw={readContext:An,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:id,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Aa(4194308,4,D1.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Aa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Aa(4,2,t,e)},useMemo:function(t,e){var r=$n();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=$n();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=Fw.bind(null,et,t),[s.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:rd,useDebugValue:b0,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=rd(!1),e=t[0];return t=Lw.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=et,l=$n();if(qe){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=e(),At===null)throw Error(Z(349));fi&30||S1(s,e,r)}l.memoizedState=r;var c={value:r,getSnapshot:e};return l.queue=c,id(b1.bind(null,s,c,t),[t]),s.flags|=2048,vo(9,I1.bind(null,s,c,r,e),void 0,null),r},useId:function(){var t=$n(),e=At.identifierPrefix;if(qe){var r=or,s=sr;r=(s&~(1<<32-Bn(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=yo++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Bw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Vw={readContext:An,useCallback:M1,useContext:An,useEffect:I0,useImperativeHandle:P1,useInsertionEffect:O1,useLayoutEffect:k1,useMemo:B1,useReducer:xu,useRef:R1,useState:function(){return xu(Eo)},useDebugValue:b0,useDeferredValue:function(t){var e=Sn();return L1(e,xt.memoizedState,t)},useTransition:function(){var t=xu(Eo)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:_1,useSyncExternalStore:A1,useId:F1,unstable_isNewReconciler:!1},zw={readContext:An,useCallback:M1,useContext:An,useEffect:I0,useImperativeHandle:P1,useInsertionEffect:O1,useLayoutEffect:k1,useMemo:B1,useReducer:yu,useRef:R1,useState:function(){return yu(Eo)},useDebugValue:b0,useDeferredValue:function(t){var e=Sn();return xt===null?e.memoizedState=t:L1(e,xt.memoizedState,t)},useTransition:function(){var t=yu(Eo)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:_1,useSyncExternalStore:A1,useId:F1,unstable_isNewReconciler:!1};function On(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function fc(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:tt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var gl={isMounted:function(t){return(t=t._reactInternals)?mi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=Ht(),l=Fr(t),c=ar(s,l);c.payload=e,r!=null&&(c.callback=r),e=Br(t,c,l),e!==null&&(Ln(e,t,l,s),Ca(e,t,l))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=Ht(),l=Fr(t),c=ar(s,l);c.tag=1,c.payload=e,r!=null&&(c.callback=r),e=Br(t,c,l),e!==null&&(Ln(e,t,l,s),Ca(e,t,l))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ht(),s=Fr(t),l=ar(r,s);l.tag=2,e!=null&&(l.callback=e),e=Br(t,l,s),e!==null&&(Ln(e,t,s,r),Ca(e,t,s))}};function sd(t,e,r,s,l,c,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,c,f):e.prototype&&e.prototype.isPureReactComponent?!fo(r,s)||!fo(l,c):!0}function z1(t,e,r){var s=!1,l=Vr,c=e.contextType;return typeof c=="object"&&c!==null?c=An(c):(l=rn(e)?hi:Ft.current,s=e.contextTypes,c=(s=s!=null)?is(t,l):Vr),e=new e(r,c),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gl,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=c),e}function od(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&gl.enqueueReplaceState(e,e.state,null)}function gc(t,e,r,s){var l=t.stateNode;l.props=r,l.state=t.memoizedState,l.refs={},y0(t);var c=e.contextType;typeof c=="object"&&c!==null?l.context=An(c):(c=rn(e)?hi:Ft.current,l.context=is(t,c)),l.state=t.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(fc(t,e,c,r),l.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(e=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),e!==l.state&&gl.enqueueReplaceState(l,l.state,null),Wa(t,r,l,s),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function ls(t,e){try{var r="",s=e;do r+=wp(s),s=s.return;while(s);var l=r}catch(c){l=`
Error generating stack: `+c.message+`
`+c.stack}return{value:t,source:e,stack:l,digest:null}}function Eu(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Hw=typeof WeakMap=="function"?WeakMap:Map;function H1(t,e,r){r=ar(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){Ya||(Ya=!0,Sc=s),pc(t,e)},r}function W1(t,e,r){r=ar(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var l=e.value;r.payload=function(){return s(l)},r.callback=function(){pc(t,e)}}var c=t.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){pc(t,e),typeof s!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),r}function ad(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new Hw;var l=new Set;s.set(e,l)}else l=s.get(e),l===void 0&&(l=new Set,s.set(e,l));l.has(r)||(l.add(r),t=rm.bind(null,t,e,r),e.then(t,t))}function ld(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ud(t,e,r,s,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ar(-1,1),e.tag=2,Br(r,e,1))),r.lanes|=1),t)}var Ww=dr.ReactCurrentOwner,tn=!1;function zt(t,e,r,s){e.child=t===null?y1(e,null,r,s):os(e,t.child,r,s)}function cd(t,e,r,s,l){r=r.render;var c=e.ref;return ts(e,l),s=A0(t,e,r,s,c,l),r=S0(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,hr(t,e,l)):(qe&&r&&d0(e),e.flags|=1,zt(t,e,s,l),e.child)}function hd(t,e,r,s,l){if(t===null){var c=r.type;return typeof c=="function"&&!M0(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=c,G1(t,e,c,s,l)):(t=Ta(r.type,null,s,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(c=t.child,!(t.lanes&l)){var f=c.memoizedProps;if(r=r.compare,r=r!==null?r:fo,r(f,s)&&t.ref===e.ref)return hr(t,e,l)}return e.flags|=1,t=Ur(c,s),t.ref=e.ref,t.return=e,e.child=t}function G1(t,e,r,s,l){if(t!==null){var c=t.memoizedProps;if(fo(c,s)&&t.ref===e.ref)if(tn=!1,e.pendingProps=s=c,(t.lanes&l)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,hr(t,e,l)}return wc(t,e,r,s,l)}function X1(t,e,r){var s=e.pendingProps,l=s.children,c=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Yi,ln),ln|=r;else{if(!(r&1073741824))return t=c!==null?c.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Yi,ln),ln|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=c!==null?c.baseLanes:r,He(Yi,ln),ln|=s}else c!==null?(s=c.baseLanes|r,e.memoizedState=null):s=r,He(Yi,ln),ln|=s;return zt(t,e,l,r),e.child}function $1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function wc(t,e,r,s,l){var c=rn(r)?hi:Ft.current;return c=is(e,c),ts(e,l),r=A0(t,e,r,s,c,l),s=S0(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,hr(t,e,l)):(qe&&s&&d0(e),e.flags|=1,zt(t,e,r,l),e.child)}function dd(t,e,r,s,l){if(rn(r)){var c=!0;Ua(e)}else c=!1;if(ts(e,l),e.stateNode===null)Sa(t,e),z1(e,r,s),gc(e,r,s,l),s=!0;else if(t===null){var f=e.stateNode,p=e.memoizedProps;f.props=p;var m=f.context,x=r.contextType;typeof x=="object"&&x!==null?x=An(x):(x=rn(r)?hi:Ft.current,x=is(e,x));var E=r.getDerivedStateFromProps,_=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function";_||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==s||m!==x)&&od(e,f,s,x),Sr=!1;var T=e.memoizedState;f.state=T,Wa(e,s,f,l),m=e.memoizedState,p!==s||T!==m||nn.current||Sr?(typeof E=="function"&&(fc(e,r,E,s),m=e.memoizedState),(p=Sr||sd(e,r,p,s,T,m,x))?(_||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=m),f.props=s,f.state=m,f.context=x,s=p):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{f=e.stateNode,v1(t,e),p=e.memoizedProps,x=e.type===e.elementType?p:On(e.type,p),f.props=x,_=e.pendingProps,T=f.context,m=r.contextType,typeof m=="object"&&m!==null?m=An(m):(m=rn(r)?hi:Ft.current,m=is(e,m));var O=r.getDerivedStateFromProps;(E=typeof O=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==_||T!==m)&&od(e,f,s,m),Sr=!1,T=e.memoizedState,f.state=T,Wa(e,s,f,l);var P=e.memoizedState;p!==_||T!==P||nn.current||Sr?(typeof O=="function"&&(fc(e,r,O,s),P=e.memoizedState),(x=Sr||sd(e,r,x,s,T,P,m)||!1)?(E||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(s,P,m),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(s,P,m)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=P),f.props=s,f.state=P,f.context=m,s=x):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),s=!1)}return mc(t,e,r,s,c,l)}function mc(t,e,r,s,l,c){$1(t,e);var f=(e.flags&128)!==0;if(!s&&!f)return l&&Zh(e,r,!1),hr(t,e,c);s=e.stateNode,Ww.current=e;var p=f&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&f?(e.child=os(e,t.child,null,c),e.child=os(e,null,p,c)):zt(t,e,p,c),e.memoizedState=s.state,l&&Zh(e,r,!0),e.child}function K1(t){var e=t.stateNode;e.pendingContext?qh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qh(t,e.context,!1),E0(t,e.containerInfo)}function fd(t,e,r,s,l){return ss(),g0(l),e.flags|=256,zt(t,e,r,s),e.child}var xc={dehydrated:null,treeContext:null,retryLane:0};function yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Y1(t,e,r){var s=e.pendingProps,l=Je.current,c=!1,f=(e.flags&128)!==0,p;if((p=f)||(p=t!==null&&t.memoizedState===null?!1:(l&2)!==0),p?(c=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),He(Je,l&1),t===null)return hc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=s.children,t=s.fallback,c?(s=e.mode,c=e.child,f={mode:"hidden",children:f},!(s&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=ml(f,s,0,null),t=ci(t,s,r,null),c.return=e,t.return=e,c.sibling=t,e.child=c,e.child.memoizedState=yc(r),e.memoizedState=xc,t):T0(e,f));if(l=t.memoizedState,l!==null&&(p=l.dehydrated,p!==null))return Gw(t,e,f,s,p,l,r);if(c){c=s.fallback,f=e.mode,l=t.child,p=l.sibling;var m={mode:"hidden",children:s.children};return!(f&1)&&e.child!==l?(s=e.child,s.childLanes=0,s.pendingProps=m,e.deletions=null):(s=Ur(l,m),s.subtreeFlags=l.subtreeFlags&14680064),p!==null?c=Ur(p,c):(c=ci(c,f,r,null),c.flags|=2),c.return=e,s.return=e,s.sibling=c,e.child=s,s=c,c=e.child,f=t.child.memoizedState,f=f===null?yc(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=t.childLanes&~r,e.memoizedState=xc,s}return c=t.child,t=c.sibling,s=Ur(c,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function T0(t,e){return e=ml({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function aa(t,e,r,s){return s!==null&&g0(s),os(e,t.child,null,r),t=T0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gw(t,e,r,s,l,c,f){if(r)return e.flags&256?(e.flags&=-257,s=Eu(Error(Z(422))),aa(t,e,f,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(c=s.fallback,l=e.mode,s=ml({mode:"visible",children:s.children},l,0,null),c=ci(c,l,f,null),c.flags|=2,s.return=e,c.return=e,s.sibling=c,e.child=s,e.mode&1&&os(e,t.child,null,f),e.child.memoizedState=yc(f),e.memoizedState=xc,c);if(!(e.mode&1))return aa(t,e,f,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var p=s.dgst;return s=p,c=Error(Z(419)),s=Eu(c,s,void 0),aa(t,e,f,s)}if(p=(f&t.childLanes)!==0,tn||p){if(s=At,s!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(s.suspendedLanes|f)?0:l,l!==0&&l!==c.retryLane&&(c.retryLane=l,cr(t,l),Ln(s,t,l,-1))}return P0(),s=Eu(Error(Z(421))),aa(t,e,f,s)}return l.data==="$?"?(e.flags|=128,e.child=t.child,e=im.bind(null,t),l._reactRetry=e,null):(t=c.treeContext,un=Mr(l.nextSibling),cn=e,qe=!0,Pn=null,t!==null&&(En[vn++]=sr,En[vn++]=or,En[vn++]=di,sr=t.id,or=t.overflow,di=e),e=T0(e,s.children),e.flags|=4096,e)}function gd(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),dc(t.return,e,r)}function vu(t,e,r,s,l){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:l}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=r,c.tailMode=l)}function q1(t,e,r){var s=e.pendingProps,l=s.revealOrder,c=s.tail;if(zt(t,e,s.children,r),s=Je.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gd(t,r,e);else if(t.tag===19)gd(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(He(Je,s),!(e.mode&1))e.memoizedState=null;else switch(l){case"forwards":for(r=e.child,l=null;r!==null;)t=r.alternate,t!==null&&Ga(t)===null&&(l=r),r=r.sibling;r=l,r===null?(l=e.child,e.child=null):(l=r.sibling,r.sibling=null),vu(e,!1,l,r,c);break;case"backwards":for(r=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&Ga(t)===null){e.child=l;break}t=l.sibling,l.sibling=r,r=l,l=t}vu(e,!0,r,null,c);break;case"together":vu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),gi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,r=Ur(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ur(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Xw(t,e,r){switch(e.tag){case 3:K1(e),ss();break;case 5:C1(e);break;case 1:rn(e.type)&&Ua(e);break;case 4:E0(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,l=e.memoizedProps.value;He(za,s._currentValue),s._currentValue=l;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(He(Je,Je.current&1),e.flags|=128,null):r&e.child.childLanes?Y1(t,e,r):(He(Je,Je.current&1),t=hr(t,e,r),t!==null?t.sibling:null);He(Je,Je.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return q1(t,e,r);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),He(Je,Je.current),s)break;return null;case 22:case 23:return e.lanes=0,X1(t,e,r)}return hr(t,e,r)}var Z1,Ec,Q1,J1;Z1=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ec=function(){};Q1=function(t,e,r,s){var l=t.memoizedProps;if(l!==s){t=e.stateNode,li(Zn.current);var c=null;switch(r){case"input":l=zu(t,l),s=zu(t,s),c=[];break;case"select":l=tt({},l,{value:void 0}),s=tt({},s,{value:void 0}),c=[];break;case"textarea":l=Gu(t,l),s=Gu(t,s),c=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=La)}$u(r,s);var f;r=null;for(x in l)if(!s.hasOwnProperty(x)&&l.hasOwnProperty(x)&&l[x]!=null)if(x==="style"){var p=l[x];for(f in p)p.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(so.hasOwnProperty(x)?c||(c=[]):(c=c||[]).push(x,null));for(x in s){var m=s[x];if(p=l!=null?l[x]:void 0,s.hasOwnProperty(x)&&m!==p&&(m!=null||p!=null))if(x==="style")if(p){for(f in p)!p.hasOwnProperty(f)||m&&m.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in m)m.hasOwnProperty(f)&&p[f]!==m[f]&&(r||(r={}),r[f]=m[f])}else r||(c||(c=[]),c.push(x,r)),r=m;else x==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,p=p?p.__html:void 0,m!=null&&p!==m&&(c=c||[]).push(x,m)):x==="children"?typeof m!="string"&&typeof m!="number"||(c=c||[]).push(x,""+m):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(so.hasOwnProperty(x)?(m!=null&&x==="onScroll"&&Ge("scroll",t),c||p===m||(c=[])):(c=c||[]).push(x,m))}r&&(c=c||[]).push("style",r);var x=c;(e.updateQueue=x)&&(e.flags|=4)}};J1=function(t,e,r,s){r!==s&&(e.flags|=4)};function Fs(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var l=t.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function $w(t,e,r){var s=e.pendingProps;switch(f0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(e),null;case 1:return rn(e.type)&&Fa(),Bt(e),null;case 3:return s=e.stateNode,as(),$e(nn),$e(Ft),C0(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(sa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(Tc(Pn),Pn=null))),Ec(t,e),Bt(e),null;case 5:v0(e);var l=li(xo.current);if(r=e.type,t!==null&&e.stateNode!=null)Q1(t,e,r,s,l),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Z(166));return Bt(e),null}if(t=li(Zn.current),sa(e)){s=e.stateNode,r=e.type;var c=e.memoizedProps;switch(s[Yn]=e,s[wo]=c,t=(e.mode&1)!==0,r){case"dialog":Ge("cancel",s),Ge("close",s);break;case"iframe":case"object":case"embed":Ge("load",s);break;case"video":case"audio":for(l=0;l<Ws.length;l++)Ge(Ws[l],s);break;case"source":Ge("error",s);break;case"img":case"image":case"link":Ge("error",s),Ge("load",s);break;case"details":Ge("toggle",s);break;case"input":_h(s,c),Ge("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!c.multiple},Ge("invalid",s);break;case"textarea":Sh(s,c),Ge("invalid",s)}$u(r,c),l=null;for(var f in c)if(c.hasOwnProperty(f)){var p=c[f];f==="children"?typeof p=="string"?s.textContent!==p&&(c.suppressHydrationWarning!==!0&&ia(s.textContent,p,t),l=["children",p]):typeof p=="number"&&s.textContent!==""+p&&(c.suppressHydrationWarning!==!0&&ia(s.textContent,p,t),l=["children",""+p]):so.hasOwnProperty(f)&&p!=null&&f==="onScroll"&&Ge("scroll",s)}switch(r){case"input":qo(s),Ah(s,c,!0);break;case"textarea":qo(s),Ih(s);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(s.onclick=La)}s=l,e.updateQueue=s,s!==null&&(e.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bf(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=f.createElement(r,{is:s.is}):(t=f.createElement(r),r==="select"&&(f=t,s.multiple?f.multiple=!0:s.size&&(f.size=s.size))):t=f.createElementNS(t,r),t[Yn]=e,t[wo]=s,Z1(t,e,!1,!1),e.stateNode=t;e:{switch(f=Ku(r,s),r){case"dialog":Ge("cancel",t),Ge("close",t),l=s;break;case"iframe":case"object":case"embed":Ge("load",t),l=s;break;case"video":case"audio":for(l=0;l<Ws.length;l++)Ge(Ws[l],t);l=s;break;case"source":Ge("error",t),l=s;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),l=s;break;case"details":Ge("toggle",t),l=s;break;case"input":_h(t,s),l=zu(t,s),Ge("invalid",t);break;case"option":l=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},l=tt({},s,{value:void 0}),Ge("invalid",t);break;case"textarea":Sh(t,s),l=Gu(t,s),Ge("invalid",t);break;default:l=s}$u(r,l),p=l;for(c in p)if(p.hasOwnProperty(c)){var m=p[c];c==="style"?Rf(t,m):c==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&Tf(t,m)):c==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&oo(t,m):typeof m=="number"&&oo(t,""+m):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(so.hasOwnProperty(c)?m!=null&&c==="onScroll"&&Ge("scroll",t):m!=null&&Qc(t,c,m,f))}switch(r){case"input":qo(t),Ah(t,s,!1);break;case"textarea":qo(t),Ih(t);break;case"option":s.value!=null&&t.setAttribute("value",""+jr(s.value));break;case"select":t.multiple=!!s.multiple,c=s.value,c!=null?Zi(t,!!s.multiple,c,!1):s.defaultValue!=null&&Zi(t,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=La)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bt(e),null;case 6:if(t&&e.stateNode!=null)J1(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Z(166));if(r=li(xo.current),li(Zn.current),sa(e)){if(s=e.stateNode,r=e.memoizedProps,s[Yn]=e,(c=s.nodeValue!==r)&&(t=cn,t!==null))switch(t.tag){case 3:ia(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ia(s.nodeValue,r,(t.mode&1)!==0)}c&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Yn]=e,e.stateNode=s}return Bt(e),null;case 13:if($e(Je),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&un!==null&&e.mode&1&&!(e.flags&128))m1(),ss(),e.flags|=98560,c=!1;else if(c=sa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!c)throw Error(Z(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Z(317));c[Yn]=e}else ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bt(e),c=!1}else Pn!==null&&(Tc(Pn),Pn=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?yt===0&&(yt=3):P0())),e.updateQueue!==null&&(e.flags|=4),Bt(e),null);case 4:return as(),Ec(t,e),t===null&&go(e.stateNode.containerInfo),Bt(e),null;case 10:return m0(e.type._context),Bt(e),null;case 17:return rn(e.type)&&Fa(),Bt(e),null;case 19:if($e(Je),c=e.memoizedState,c===null)return Bt(e),null;if(s=(e.flags&128)!==0,f=c.rendering,f===null)if(s)Fs(c,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=Ga(t),f!==null){for(e.flags|=128,Fs(c,!1),s=f.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)c=r,t=s,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=t,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,t=f.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return He(Je,Je.current&1|2),e.child}t=t.sibling}c.tail!==null&&ct()>us&&(e.flags|=128,s=!0,Fs(c,!1),e.lanes=4194304)}else{if(!s)if(t=Ga(f),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Fs(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!qe)return Bt(e),null}else 2*ct()-c.renderingStartTime>us&&r!==1073741824&&(e.flags|=128,s=!0,Fs(c,!1),e.lanes=4194304);c.isBackwards?(f.sibling=e.child,e.child=f):(r=c.last,r!==null?r.sibling=f:e.child=f,c.last=f)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=ct(),e.sibling=null,r=Je.current,He(Je,s?r&1|2:r&1),e):(Bt(e),null);case 22:case 23:return D0(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ln&1073741824&&(Bt(e),e.subtreeFlags&6&&(e.flags|=8192)):Bt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function Kw(t,e){switch(f0(e),e.tag){case 1:return rn(e.type)&&Fa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return as(),$e(nn),$e(Ft),C0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return v0(e),null;case 13:if($e(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Je),null;case 4:return as(),null;case 10:return m0(e.type._context),null;case 22:case 23:return D0(),null;case 24:return null;default:return null}}var la=!1,Lt=!1,Yw=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ki(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){at(t,e,s)}else r.current=null}function vc(t,e,r){try{r()}catch(s){at(t,e,s)}}var pd=!1;function qw(t,e){if(ic=Pa,t=i1(),h0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var l=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var f=0,p=-1,m=-1,x=0,E=0,_=t,T=null;t:for(;;){for(var O;_!==r||l!==0&&_.nodeType!==3||(p=f+l),_!==c||s!==0&&_.nodeType!==3||(m=f+s),_.nodeType===3&&(f+=_.nodeValue.length),(O=_.firstChild)!==null;)T=_,_=O;for(;;){if(_===t)break t;if(T===r&&++x===l&&(p=f),T===c&&++E===s&&(m=f),(O=_.nextSibling)!==null)break;_=T,T=_.parentNode}_=O}r=p===-1||m===-1?null:{start:p,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(sc={focusedElem:t,selectionRange:r},Pa=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var L=P.memoizedProps,$=P.memoizedState,R=e.stateNode,I=R.getSnapshotBeforeUpdate(e.elementType===e.type?L:On(e.type,L),$);R.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(D){at(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return P=pd,pd=!1,P}function Qs(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&t)===t){var c=l.destroy;l.destroy=void 0,c!==void 0&&vc(e,r,c)}l=l.next}while(l!==s)}}function pl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function Cc(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function eg(t){var e=t.alternate;e!==null&&(t.alternate=null,eg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[wo],delete e[lc],delete e[kw],delete e[Dw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tg(t){return t.tag===5||t.tag===3||t.tag===4}function wd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _c(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=La));else if(s!==4&&(t=t.child,t!==null))for(_c(t,e,r),t=t.sibling;t!==null;)_c(t,e,r),t=t.sibling}function Ac(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Ac(t,e,r),t=t.sibling;t!==null;)Ac(t,e,r),t=t.sibling}var Nt=null,kn=!1;function vr(t,e,r){for(r=r.child;r!==null;)ng(t,e,r),r=r.sibling}function ng(t,e,r){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(al,r)}catch{}switch(r.tag){case 5:Lt||Ki(r,e);case 6:var s=Nt,l=kn;Nt=null,vr(t,e,r),Nt=s,kn=l,Nt!==null&&(kn?(t=Nt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Nt.removeChild(r.stateNode));break;case 18:Nt!==null&&(kn?(t=Nt,r=r.stateNode,t.nodeType===8?gu(t.parentNode,r):t.nodeType===1&&gu(t,r),co(t)):gu(Nt,r.stateNode));break;case 4:s=Nt,l=kn,Nt=r.stateNode.containerInfo,kn=!0,vr(t,e,r),Nt=s,kn=l;break;case 0:case 11:case 14:case 15:if(!Lt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var c=l,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&vc(r,e,f),l=l.next}while(l!==s)}vr(t,e,r);break;case 1:if(!Lt&&(Ki(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(p){at(r,e,p)}vr(t,e,r);break;case 21:vr(t,e,r);break;case 22:r.mode&1?(Lt=(s=Lt)||r.memoizedState!==null,vr(t,e,r),Lt=s):vr(t,e,r);break;default:vr(t,e,r)}}function md(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Yw),e.forEach(function(s){var l=sm.bind(null,t,s);r.has(s)||(r.add(s),s.then(l,l))})}}function Nn(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];try{var c=t,f=e,p=f;e:for(;p!==null;){switch(p.tag){case 5:Nt=p.stateNode,kn=!1;break e;case 3:Nt=p.stateNode.containerInfo,kn=!0;break e;case 4:Nt=p.stateNode.containerInfo,kn=!0;break e}p=p.return}if(Nt===null)throw Error(Z(160));ng(c,f,l),Nt=null,kn=!1;var m=l.alternate;m!==null&&(m.return=null),l.return=null}catch(x){at(l,e,x)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rg(e,t),e=e.sibling}function rg(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),Xn(t),s&4){try{Qs(3,t,t.return),pl(3,t)}catch(L){at(t,t.return,L)}try{Qs(5,t,t.return)}catch(L){at(t,t.return,L)}}break;case 1:Nn(e,t),Xn(t),s&512&&r!==null&&Ki(r,r.return);break;case 5:if(Nn(e,t),Xn(t),s&512&&r!==null&&Ki(r,r.return),t.flags&32){var l=t.stateNode;try{oo(l,"")}catch(L){at(t,t.return,L)}}if(s&4&&(l=t.stateNode,l!=null)){var c=t.memoizedProps,f=r!==null?r.memoizedProps:c,p=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{p==="input"&&c.type==="radio"&&c.name!=null&&Sf(l,c),Ku(p,f);var x=Ku(p,c);for(f=0;f<m.length;f+=2){var E=m[f],_=m[f+1];E==="style"?Rf(l,_):E==="dangerouslySetInnerHTML"?Tf(l,_):E==="children"?oo(l,_):Qc(l,E,_,x)}switch(p){case"input":Hu(l,c);break;case"textarea":If(l,c);break;case"select":var T=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!c.multiple;var O=c.value;O!=null?Zi(l,!!c.multiple,O,!1):T!==!!c.multiple&&(c.defaultValue!=null?Zi(l,!!c.multiple,c.defaultValue,!0):Zi(l,!!c.multiple,c.multiple?[]:"",!1))}l[wo]=c}catch(L){at(t,t.return,L)}}break;case 6:if(Nn(e,t),Xn(t),s&4){if(t.stateNode===null)throw Error(Z(162));l=t.stateNode,c=t.memoizedProps;try{l.nodeValue=c}catch(L){at(t,t.return,L)}}break;case 3:if(Nn(e,t),Xn(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{co(e.containerInfo)}catch(L){at(t,t.return,L)}break;case 4:Nn(e,t),Xn(t);break;case 13:Nn(e,t),Xn(t),l=t.child,l.flags&8192&&(c=l.memoizedState!==null,l.stateNode.isHidden=c,!c||l.alternate!==null&&l.alternate.memoizedState!==null||(O0=ct())),s&4&&md(t);break;case 22:if(E=r!==null&&r.memoizedState!==null,t.mode&1?(Lt=(x=Lt)||E,Nn(e,t),Lt=x):Nn(e,t),Xn(t),s&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!E&&t.mode&1)for(ie=t,E=t.child;E!==null;){for(_=ie=E;ie!==null;){switch(T=ie,O=T.child,T.tag){case 0:case 11:case 14:case 15:Qs(4,T,T.return);break;case 1:Ki(T,T.return);var P=T.stateNode;if(typeof P.componentWillUnmount=="function"){s=T,r=T.return;try{e=s,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(L){at(s,r,L)}}break;case 5:Ki(T,T.return);break;case 22:if(T.memoizedState!==null){yd(_);continue}}O!==null?(O.return=T,ie=O):yd(_)}E=E.sibling}e:for(E=null,_=t;;){if(_.tag===5){if(E===null){E=_;try{l=_.stateNode,x?(c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(p=_.stateNode,m=_.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null,p.style.display=Nf("display",f))}catch(L){at(t,t.return,L)}}}else if(_.tag===6){if(E===null)try{_.stateNode.nodeValue=x?"":_.memoizedProps}catch(L){at(t,t.return,L)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;E===_&&(E=null),_=_.return}E===_&&(E=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Nn(e,t),Xn(t),s&4&&md(t);break;case 21:break;default:Nn(e,t),Xn(t)}}function Xn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(tg(r)){var s=r;break e}r=r.return}throw Error(Z(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(oo(l,""),s.flags&=-33);var c=wd(t);Ac(t,c,l);break;case 3:case 4:var f=s.stateNode.containerInfo,p=wd(t);_c(t,p,f);break;default:throw Error(Z(161))}}catch(m){at(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Zw(t,e,r){ie=t,ig(t)}function ig(t,e,r){for(var s=(t.mode&1)!==0;ie!==null;){var l=ie,c=l.child;if(l.tag===22&&s){var f=l.memoizedState!==null||la;if(!f){var p=l.alternate,m=p!==null&&p.memoizedState!==null||Lt;p=la;var x=Lt;if(la=f,(Lt=m)&&!x)for(ie=l;ie!==null;)f=ie,m=f.child,f.tag===22&&f.memoizedState!==null?Ed(l):m!==null?(m.return=f,ie=m):Ed(l);for(;c!==null;)ie=c,ig(c),c=c.sibling;ie=l,la=p,Lt=x}xd(t)}else l.subtreeFlags&8772&&c!==null?(c.return=l,ie=c):xd(t)}}function xd(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||pl(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Lt)if(r===null)s.componentDidMount();else{var l=e.elementType===e.type?r.memoizedProps:On(e.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&nd(e,c,s);break;case 3:var f=e.updateQueue;if(f!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}nd(e,f,r)}break;case 5:var p=e.stateNode;if(r===null&&e.flags&4){r=p;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var x=e.alternate;if(x!==null){var E=x.memoizedState;if(E!==null){var _=E.dehydrated;_!==null&&co(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Lt||e.flags&512&&Cc(e)}catch(T){at(e,e.return,T)}}if(e===t){ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,ie=r;break}ie=e.return}}function yd(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ie=r;break}ie=e.return}}function Ed(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{pl(4,e)}catch(m){at(e,r,m)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var l=e.return;try{s.componentDidMount()}catch(m){at(e,l,m)}}var c=e.return;try{Cc(e)}catch(m){at(e,c,m)}break;case 5:var f=e.return;try{Cc(e)}catch(m){at(e,f,m)}}}catch(m){at(e,e.return,m)}if(e===t){ie=null;break}var p=e.sibling;if(p!==null){p.return=e.return,ie=p;break}ie=e.return}}var Qw=Math.ceil,Ka=dr.ReactCurrentDispatcher,N0=dr.ReactCurrentOwner,_n=dr.ReactCurrentBatchConfig,Ne=0,At=null,dt=null,Ot=0,ln=0,Yi=Hr(0),yt=0,Co=null,gi=0,wl=0,R0=0,Js=null,Jt=null,O0=0,us=1/0,nr=null,Ya=!1,Sc=null,Lr=null,ua=!1,Rr=null,qa=0,eo=0,Ic=null,Ia=-1,ba=0;function Ht(){return Ne&6?ct():Ia!==-1?Ia:Ia=ct()}function Fr(t){return t.mode&1?Ne&2&&Ot!==0?Ot&-Ot:Mw.transition!==null?(ba===0&&(ba=zf()),ba):(t=Me,t!==0||(t=window.event,t=t===void 0?16:Yf(t.type)),t):1}function Ln(t,e,r,s){if(50<eo)throw eo=0,Ic=null,Error(Z(185));Io(t,r,s),(!(Ne&2)||t!==At)&&(t===At&&(!(Ne&2)&&(wl|=r),yt===4&&br(t,Ot)),sn(t,s),r===1&&Ne===0&&!(e.mode&1)&&(us=ct()+500,dl&&Wr()))}function sn(t,e){var r=t.callbackNode;Mp(t,e);var s=Da(t,t===At?Ot:0);if(s===0)r!==null&&Nh(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&Nh(r),e===1)t.tag===0?Pw(vd.bind(null,t)):g1(vd.bind(null,t)),Rw(function(){!(Ne&6)&&Wr()}),r=null;else{switch(Hf(s)){case 1:r=r0;break;case 4:r=jf;break;case 16:r=ka;break;case 536870912:r=Vf;break;default:r=ka}r=dg(r,sg.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function sg(t,e){if(Ia=-1,ba=0,Ne&6)throw Error(Z(327));var r=t.callbackNode;if(ns()&&t.callbackNode!==r)return null;var s=Da(t,t===At?Ot:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Za(t,s);else{e=s;var l=Ne;Ne|=2;var c=ag();(At!==t||Ot!==e)&&(nr=null,us=ct()+500,ui(t,e));do try{tm();break}catch(p){og(t,p)}while(!0);w0(),Ka.current=c,Ne=l,dt!==null?e=0:(At=null,Ot=0,e=yt)}if(e!==0){if(e===2&&(l=Ju(t),l!==0&&(s=l,e=bc(t,l))),e===1)throw r=Co,ui(t,0),br(t,s),sn(t,ct()),r;if(e===6)br(t,s);else{if(l=t.current.alternate,!(s&30)&&!Jw(l)&&(e=Za(t,s),e===2&&(c=Ju(t),c!==0&&(s=c,e=bc(t,c))),e===1))throw r=Co,ui(t,0),br(t,s),sn(t,ct()),r;switch(t.finishedWork=l,t.finishedLanes=s,e){case 0:case 1:throw Error(Z(345));case 2:ri(t,Jt,nr);break;case 3:if(br(t,s),(s&130023424)===s&&(e=O0+500-ct(),10<e)){if(Da(t,0)!==0)break;if(l=t.suspendedLanes,(l&s)!==s){Ht(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=ac(ri.bind(null,t,Jt,nr),e);break}ri(t,Jt,nr);break;case 4:if(br(t,s),(s&4194240)===s)break;for(e=t.eventTimes,l=-1;0<s;){var f=31-Bn(s);c=1<<f,f=e[f],f>l&&(l=f),s&=~c}if(s=l,s=ct()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Qw(s/1960))-s,10<s){t.timeoutHandle=ac(ri.bind(null,t,Jt,nr),s);break}ri(t,Jt,nr);break;case 5:ri(t,Jt,nr);break;default:throw Error(Z(329))}}}return sn(t,ct()),t.callbackNode===r?sg.bind(null,t):null}function bc(t,e){var r=Js;return t.current.memoizedState.isDehydrated&&(ui(t,e).flags|=256),t=Za(t,e),t!==2&&(e=Jt,Jt=r,e!==null&&Tc(e)),t}function Tc(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function Jw(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var l=r[s],c=l.getSnapshot;l=l.value;try{if(!Fn(c(),l))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~R0,e&=~wl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Bn(e),s=1<<r;t[r]=-1,e&=~s}}function vd(t){if(Ne&6)throw Error(Z(327));ns();var e=Da(t,0);if(!(e&1))return sn(t,ct()),null;var r=Za(t,e);if(t.tag!==0&&r===2){var s=Ju(t);s!==0&&(e=s,r=bc(t,s))}if(r===1)throw r=Co,ui(t,0),br(t,e),sn(t,ct()),r;if(r===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ri(t,Jt,nr),sn(t,ct()),null}function k0(t,e){var r=Ne;Ne|=1;try{return t(e)}finally{Ne=r,Ne===0&&(us=ct()+500,dl&&Wr())}}function pi(t){Rr!==null&&Rr.tag===0&&!(Ne&6)&&ns();var e=Ne;Ne|=1;var r=_n.transition,s=Me;try{if(_n.transition=null,Me=1,t)return t()}finally{Me=s,_n.transition=r,Ne=e,!(Ne&6)&&Wr()}}function D0(){ln=Yi.current,$e(Yi)}function ui(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Nw(r)),dt!==null)for(r=dt.return;r!==null;){var s=r;switch(f0(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Fa();break;case 3:as(),$e(nn),$e(Ft),C0();break;case 5:v0(s);break;case 4:as();break;case 13:$e(Je);break;case 19:$e(Je);break;case 10:m0(s.type._context);break;case 22:case 23:D0()}r=r.return}if(At=t,dt=t=Ur(t.current,null),Ot=ln=e,yt=0,Co=null,R0=wl=gi=0,Jt=Js=null,ai!==null){for(e=0;e<ai.length;e++)if(r=ai[e],s=r.interleaved,s!==null){r.interleaved=null;var l=s.next,c=r.pending;if(c!==null){var f=c.next;c.next=l,s.next=f}r.pending=s}ai=null}return t}function og(t,e){do{var r=dt;try{if(w0(),_a.current=$a,Xa){for(var s=et.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Xa=!1}if(fi=0,_t=xt=et=null,Zs=!1,yo=0,N0.current=null,r===null||r.return===null){yt=1,Co=e,dt=null;break}e:{var c=t,f=r.return,p=r,m=e;if(e=Ot,p.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var x=m,E=p,_=E.tag;if(!(E.mode&1)&&(_===0||_===11||_===15)){var T=E.alternate;T?(E.updateQueue=T.updateQueue,E.memoizedState=T.memoizedState,E.lanes=T.lanes):(E.updateQueue=null,E.memoizedState=null)}var O=ld(f);if(O!==null){O.flags&=-257,ud(O,f,p,c,e),O.mode&1&&ad(c,x,e),e=O,m=x;var P=e.updateQueue;if(P===null){var L=new Set;L.add(m),e.updateQueue=L}else P.add(m);break e}else{if(!(e&1)){ad(c,x,e),P0();break e}m=Error(Z(426))}}else if(qe&&p.mode&1){var $=ld(f);if($!==null){!($.flags&65536)&&($.flags|=256),ud($,f,p,c,e),g0(ls(m,p));break e}}c=m=ls(m,p),yt!==4&&(yt=2),Js===null?Js=[c]:Js.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var R=H1(c,m,e);td(c,R);break e;case 1:p=m;var I=c.type,S=c.stateNode;if(!(c.flags&128)&&(typeof I.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Lr===null||!Lr.has(S)))){c.flags|=65536,e&=-e,c.lanes|=e;var D=W1(c,p,e);td(c,D);break e}}c=c.return}while(c!==null)}ug(r)}catch(G){e=G,dt===r&&r!==null&&(dt=r=r.return);continue}break}while(!0)}function ag(){var t=Ka.current;return Ka.current=$a,t===null?$a:t}function P0(){(yt===0||yt===3||yt===2)&&(yt=4),At===null||!(gi&268435455)&&!(wl&268435455)||br(At,Ot)}function Za(t,e){var r=Ne;Ne|=2;var s=ag();(At!==t||Ot!==e)&&(nr=null,ui(t,e));do try{em();break}catch(l){og(t,l)}while(!0);if(w0(),Ne=r,Ka.current=s,dt!==null)throw Error(Z(261));return At=null,Ot=0,yt}function em(){for(;dt!==null;)lg(dt)}function tm(){for(;dt!==null&&!Ip();)lg(dt)}function lg(t){var e=hg(t.alternate,t,ln);t.memoizedProps=t.pendingProps,e===null?ug(t):dt=e,N0.current=null}function ug(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Kw(r,e),r!==null){r.flags&=32767,dt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,dt=null;return}}else if(r=$w(r,e,ln),r!==null){dt=r;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);yt===0&&(yt=5)}function ri(t,e,r){var s=Me,l=_n.transition;try{_n.transition=null,Me=1,nm(t,e,r,s)}finally{_n.transition=l,Me=s}return null}function nm(t,e,r,s){do ns();while(Rr!==null);if(Ne&6)throw Error(Z(327));r=t.finishedWork;var l=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var c=r.lanes|r.childLanes;if(Bp(t,c),t===At&&(dt=At=null,Ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ua||(ua=!0,dg(ka,function(){return ns(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=_n.transition,_n.transition=null;var f=Me;Me=1;var p=Ne;Ne|=4,N0.current=null,qw(t,r),rg(r,t),Cw(sc),Pa=!!ic,sc=ic=null,t.current=r,Zw(r),bp(),Ne=p,Me=f,_n.transition=c}else t.current=r;if(ua&&(ua=!1,Rr=t,qa=l),c=t.pendingLanes,c===0&&(Lr=null),Rp(r.stateNode),sn(t,ct()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)l=e[r],s(l.value,{componentStack:l.stack,digest:l.digest});if(Ya)throw Ya=!1,t=Sc,Sc=null,t;return qa&1&&t.tag!==0&&ns(),c=t.pendingLanes,c&1?t===Ic?eo++:(eo=0,Ic=t):eo=0,Wr(),null}function ns(){if(Rr!==null){var t=Hf(qa),e=_n.transition,r=Me;try{if(_n.transition=null,Me=16>t?16:t,Rr===null)var s=!1;else{if(t=Rr,Rr=null,qa=0,Ne&6)throw Error(Z(331));var l=Ne;for(Ne|=4,ie=t.current;ie!==null;){var c=ie,f=c.child;if(ie.flags&16){var p=c.deletions;if(p!==null){for(var m=0;m<p.length;m++){var x=p[m];for(ie=x;ie!==null;){var E=ie;switch(E.tag){case 0:case 11:case 15:Qs(8,E,c)}var _=E.child;if(_!==null)_.return=E,ie=_;else for(;ie!==null;){E=ie;var T=E.sibling,O=E.return;if(eg(E),E===x){ie=null;break}if(T!==null){T.return=O,ie=T;break}ie=O}}}var P=c.alternate;if(P!==null){var L=P.child;if(L!==null){P.child=null;do{var $=L.sibling;L.sibling=null,L=$}while(L!==null)}}ie=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,ie=f;else e:for(;ie!==null;){if(c=ie,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Qs(9,c,c.return)}var R=c.sibling;if(R!==null){R.return=c.return,ie=R;break e}ie=c.return}}var I=t.current;for(ie=I;ie!==null;){f=ie;var S=f.child;if(f.subtreeFlags&2064&&S!==null)S.return=f,ie=S;else e:for(f=I;ie!==null;){if(p=ie,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:pl(9,p)}}catch(G){at(p,p.return,G)}if(p===f){ie=null;break e}var D=p.sibling;if(D!==null){D.return=p.return,ie=D;break e}ie=p.return}}if(Ne=l,Wr(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(al,t)}catch{}s=!0}return s}finally{Me=r,_n.transition=e}}return!1}function Cd(t,e,r){e=ls(r,e),e=H1(t,e,1),t=Br(t,e,1),e=Ht(),t!==null&&(Io(t,1,e),sn(t,e))}function at(t,e,r){if(t.tag===3)Cd(t,t,r);else for(;e!==null;){if(e.tag===3){Cd(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Lr===null||!Lr.has(s))){t=ls(r,t),t=W1(e,t,1),e=Br(e,t,1),t=Ht(),e!==null&&(Io(e,1,t),sn(e,t));break}}e=e.return}}function rm(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&r,At===t&&(Ot&r)===r&&(yt===4||yt===3&&(Ot&130023424)===Ot&&500>ct()-O0?ui(t,0):R0|=r),sn(t,e)}function cg(t,e){e===0&&(t.mode&1?(e=Jo,Jo<<=1,!(Jo&130023424)&&(Jo=4194304)):e=1);var r=Ht();t=cr(t,e),t!==null&&(Io(t,e,r),sn(t,r))}function im(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),cg(t,r)}function sm(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,l=t.memoizedState;l!==null&&(r=l.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Z(314))}s!==null&&s.delete(e),cg(t,r)}var hg;hg=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return tn=!1,Xw(t,e,r);tn=!!(t.flags&131072)}else tn=!1,qe&&e.flags&1048576&&p1(e,Va,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Sa(t,e),t=e.pendingProps;var l=is(e,Ft.current);ts(e,r),l=A0(null,e,s,t,l,r);var c=S0();return e.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(s)?(c=!0,Ua(e)):c=!1,e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,y0(e),l.updater=gl,e.stateNode=l,l._reactInternals=e,gc(e,s,t,r),e=mc(null,e,s,!0,c,r)):(e.tag=0,qe&&c&&d0(e),zt(null,e,l,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Sa(t,e),t=e.pendingProps,l=s._init,s=l(s._payload),e.type=s,l=e.tag=am(s),t=On(s,t),l){case 0:e=wc(null,e,s,t,r);break e;case 1:e=dd(null,e,s,t,r);break e;case 11:e=cd(null,e,s,t,r);break e;case 14:e=hd(null,e,s,On(s.type,t),r);break e}throw Error(Z(306,s,""))}return e;case 0:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:On(s,l),wc(t,e,s,l,r);case 1:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:On(s,l),dd(t,e,s,l,r);case 3:e:{if(K1(e),t===null)throw Error(Z(387));s=e.pendingProps,c=e.memoizedState,l=c.element,v1(t,e),Wa(e,s,null,r);var f=e.memoizedState;if(s=f.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){l=ls(Error(Z(423)),e),e=fd(t,e,s,r,l);break e}else if(s!==l){l=ls(Error(Z(424)),e),e=fd(t,e,s,r,l);break e}else for(un=Mr(e.stateNode.containerInfo.firstChild),cn=e,qe=!0,Pn=null,r=y1(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ss(),s===l){e=hr(t,e,r);break e}zt(t,e,s,r)}e=e.child}return e;case 5:return C1(e),t===null&&hc(e),s=e.type,l=e.pendingProps,c=t!==null?t.memoizedProps:null,f=l.children,oc(s,l)?f=null:c!==null&&oc(s,c)&&(e.flags|=32),$1(t,e),zt(t,e,f,r),e.child;case 6:return t===null&&hc(e),null;case 13:return Y1(t,e,r);case 4:return E0(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=os(e,null,s,r):zt(t,e,s,r),e.child;case 11:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:On(s,l),cd(t,e,s,l,r);case 7:return zt(t,e,e.pendingProps,r),e.child;case 8:return zt(t,e,e.pendingProps.children,r),e.child;case 12:return zt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,l=e.pendingProps,c=e.memoizedProps,f=l.value,He(za,s._currentValue),s._currentValue=f,c!==null)if(Fn(c.value,f)){if(c.children===l.children&&!nn.current){e=hr(t,e,r);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var p=c.dependencies;if(p!==null){f=c.child;for(var m=p.firstContext;m!==null;){if(m.context===s){if(c.tag===1){m=ar(-1,r&-r),m.tag=2;var x=c.updateQueue;if(x!==null){x=x.shared;var E=x.pending;E===null?m.next=m:(m.next=E.next,E.next=m),x.pending=m}}c.lanes|=r,m=c.alternate,m!==null&&(m.lanes|=r),dc(c.return,r,e),p.lanes|=r;break}m=m.next}}else if(c.tag===10)f=c.type===e.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(Z(341));f.lanes|=r,p=f.alternate,p!==null&&(p.lanes|=r),dc(f,r,e),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===e){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}zt(t,e,l.children,r),e=e.child}return e;case 9:return l=e.type,s=e.pendingProps.children,ts(e,r),l=An(l),s=s(l),e.flags|=1,zt(t,e,s,r),e.child;case 14:return s=e.type,l=On(s,e.pendingProps),l=On(s.type,l),hd(t,e,s,l,r);case 15:return G1(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:On(s,l),Sa(t,e),e.tag=1,rn(s)?(t=!0,Ua(e)):t=!1,ts(e,r),z1(e,s,l),gc(e,s,l,r),mc(null,e,s,!0,t,r);case 19:return q1(t,e,r);case 22:return X1(t,e,r)}throw Error(Z(156,e.tag))};function dg(t,e){return Uf(t,e)}function om(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,r,s){return new om(t,e,r,s)}function M0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function am(t){if(typeof t=="function")return M0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===e0)return 11;if(t===t0)return 14}return 2}function Ur(t,e){var r=t.alternate;return r===null?(r=Cn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ta(t,e,r,s,l,c){var f=2;if(s=t,typeof t=="function")M0(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Ui:return ci(r.children,l,c,e);case Jc:f=8,l|=8;break;case Fu:return t=Cn(12,r,e,l|2),t.elementType=Fu,t.lanes=c,t;case Uu:return t=Cn(13,r,e,l),t.elementType=Uu,t.lanes=c,t;case ju:return t=Cn(19,r,e,l),t.elementType=ju,t.lanes=c,t;case Cf:return ml(r,l,c,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ef:f=10;break e;case vf:f=9;break e;case e0:f=11;break e;case t0:f=14;break e;case Ar:f=16,s=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Cn(f,r,e,l),e.elementType=t,e.type=s,e.lanes=c,e}function ci(t,e,r,s){return t=Cn(7,t,s,e),t.lanes=r,t}function ml(t,e,r,s){return t=Cn(22,t,s,e),t.elementType=Cf,t.lanes=r,t.stateNode={isHidden:!1},t}function Cu(t,e,r){return t=Cn(6,t,null,e),t.lanes=r,t}function _u(t,e,r){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lm(t,e,r,s,l){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ru(0),this.expirationTimes=ru(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ru(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function B0(t,e,r,s,l,c,f,p,m){return t=new lm(t,e,r,p,m),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Cn(3,null,null,e),t.current=c,c.stateNode=t,c.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},y0(c),t}function um(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fi,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function fg(t){if(!t)return Vr;t=t._reactInternals;e:{if(mi(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var r=t.type;if(rn(r))return f1(t,r,e)}return e}function gg(t,e,r,s,l,c,f,p,m){return t=B0(r,s,!0,t,l,c,f,p,m),t.context=fg(null),r=t.current,s=Ht(),l=Fr(r),c=ar(s,l),c.callback=e??null,Br(r,c,l),t.current.lanes=l,Io(t,l,s),sn(t,s),t}function xl(t,e,r,s){var l=e.current,c=Ht(),f=Fr(l);return r=fg(r),e.context===null?e.context=r:e.pendingContext=r,e=ar(c,f),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Br(l,e,f),t!==null&&(Ln(t,l,f,c),Ca(t,l,f)),f}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _d(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function L0(t,e){_d(t,e),(t=t.alternate)&&_d(t,e)}function cm(){return null}var pg=typeof reportError=="function"?reportError:function(t){console.error(t)};function F0(t){this._internalRoot=t}yl.prototype.render=F0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));xl(t,e,null,null)};yl.prototype.unmount=F0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pi(function(){xl(null,t,null,null)}),e[ur]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xf();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ir.length&&e!==0&&e<Ir[r].priority;r++);Ir.splice(r,0,t),r===0&&Kf(t)}};function U0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function El(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ad(){}function hm(t,e,r,s,l){if(l){if(typeof s=="function"){var c=s;s=function(){var x=Qa(f);c.call(x)}}var f=gg(e,s,t,0,null,!1,!1,"",Ad);return t._reactRootContainer=f,t[ur]=f.current,go(t.nodeType===8?t.parentNode:t),pi(),f}for(;l=t.lastChild;)t.removeChild(l);if(typeof s=="function"){var p=s;s=function(){var x=Qa(m);p.call(x)}}var m=B0(t,0,!1,null,null,!1,!1,"",Ad);return t._reactRootContainer=m,t[ur]=m.current,go(t.nodeType===8?t.parentNode:t),pi(function(){xl(e,m,r,s)}),m}function vl(t,e,r,s,l){var c=r._reactRootContainer;if(c){var f=c;if(typeof l=="function"){var p=l;l=function(){var m=Qa(f);p.call(m)}}xl(e,f,t,l)}else f=hm(r,e,t,l,s);return Qa(f)}Wf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Hs(e.pendingLanes);r!==0&&(i0(e,r|1),sn(e,ct()),!(Ne&6)&&(us=ct()+500,Wr()))}break;case 13:pi(function(){var s=cr(t,1);if(s!==null){var l=Ht();Ln(s,t,1,l)}}),L0(t,1)}};s0=function(t){if(t.tag===13){var e=cr(t,134217728);if(e!==null){var r=Ht();Ln(e,t,134217728,r)}L0(t,134217728)}};Gf=function(t){if(t.tag===13){var e=Fr(t),r=cr(t,e);if(r!==null){var s=Ht();Ln(r,t,e,s)}L0(t,e)}};Xf=function(){return Me};$f=function(t,e){var r=Me;try{return Me=t,e()}finally{Me=r}};qu=function(t,e,r){switch(e){case"input":if(Hu(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var l=hl(s);if(!l)throw Error(Z(90));Af(s),Hu(s,l)}}}break;case"textarea":If(t,r);break;case"select":e=r.value,e!=null&&Zi(t,!!r.multiple,e,!1)}};Df=k0;Pf=pi;var dm={usingClientEntryPoint:!1,Events:[To,Hi,hl,Of,kf,k0]},Us={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fm={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lf(t),t===null?null:t.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||cm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{al=ca.inject(fm),qn=ca}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dm;dn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U0(e))throw Error(Z(200));return um(t,e,null,r)};dn.createRoot=function(t,e){if(!U0(t))throw Error(Z(299));var r=!1,s="",l=pg;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=B0(t,1,!1,null,null,r,!1,s,l),t[ur]=e.current,go(t.nodeType===8?t.parentNode:t),new F0(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=Lf(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return pi(t)};dn.hydrate=function(t,e,r){if(!El(e))throw Error(Z(200));return vl(null,t,e,!0,r)};dn.hydrateRoot=function(t,e,r){if(!U0(t))throw Error(Z(405));var s=r!=null&&r.hydratedSources||null,l=!1,c="",f=pg;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),e=gg(e,null,t,1,r??null,l,!1,c,f),t[ur]=e.current,go(t),s)for(t=0;t<s.length;t++)r=s[t],l=r._getVersion,l=l(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,l]:e.mutableSourceEagerHydrationData.push(r,l);return new yl(e)};dn.render=function(t,e,r){if(!El(e))throw Error(Z(200));return vl(null,t,e,!1,r)};dn.unmountComponentAtNode=function(t){if(!El(t))throw Error(Z(40));return t._reactRootContainer?(pi(function(){vl(null,null,t,!1,function(){t._reactRootContainer=null,t[ur]=null})}),!0):!1};dn.unstable_batchedUpdates=k0;dn.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!El(r))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return vl(t,e,r,!1,s)};dn.version="18.3.1-next-f1338f8080-20240426";function wg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wg)}catch(t){console.error(t)}}wg(),wf.exports=dn;var gm=wf.exports,mg,Sd=gm;mg=Sd.createRoot,Sd.hydrateRoot;const pm="modulepreload",wm=function(t){return"/"+t},Id={},Ro=function(e,r,s){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));l=Promise.allSettled(r.map(m=>{if(m=wm(m),m in Id)return;Id[m]=!0;const x=m.endsWith(".css"),E=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${E}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":pm,x||(_.as="script"),_.crossOrigin="",_.href=m,p&&_.setAttribute("nonce",p),document.head.appendChild(_),x)return new Promise((T,O)=>{_.addEventListener("load",T),_.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return l.then(f=>{for(const p of f||[])p.status==="rejected"&&c(p.reason);return e().catch(c)})},mm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ro(async()=>{const{default:s}=await Promise.resolve().then(()=>xs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class j0 extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class xm extends j0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bd extends j0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Td extends j0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Nc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Nc||(Nc={}));var ym=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})};class Em{constructor(e,{headers:r={},customFetch:s,region:l=Nc.Any}={}){this.url=e,this.headers=r,this.region=l,this.fetch=mm(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return ym(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:f}=r;let p={},{region:m}=r;m||(m=this.region);const x=new URL(`${this.url}/${e}`);m&&m!=="any"&&(p["x-region"]=m,x.searchParams.set("forceFunctionRegion",m));let E;f&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",E=f):typeof f=="string"?(p["Content-Type"]="text/plain",E=f):typeof FormData<"u"&&f instanceof FormData?E=f:(p["Content-Type"]="application/json",E=JSON.stringify(f)));const _=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:E}).catch(L=>{throw new xm(L)}),T=_.headers.get("x-relay-error");if(T&&T==="true")throw new bd(_);if(!_.ok)throw new Td(_);let O=((s=_.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),P;return O==="application/json"?P=yield _.json():O==="application/octet-stream"?P=yield _.blob():O==="text/event-stream"?P=_:O==="multipart/form-data"?P=yield _.formData():P=yield _.text(),{data:P,error:null,response:_}}catch(l){return{data:null,error:l,response:l instanceof Td||l instanceof bd?l.context:void 0}}})}}var en={},V0={},Cl={},Oo={},_l={},Al={},vm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cs=vm();const Cm=cs.fetch,xg=cs.fetch.bind(cs),yg=cs.Headers,_m=cs.Request,Am=cs.Response,xs=Object.freeze(Object.defineProperty({__proto__:null,Headers:yg,Request:_m,Response:Am,default:xg,fetch:Cm},Symbol.toStringTag,{value:"Module"})),Sm=z2(xs);var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});let Im=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Sl.default=Im;var Eg=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Al,"__esModule",{value:!0});const bm=Eg(Sm),Tm=Eg(Sl);let Nm=class{constructor(e){var r,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=bm.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var f,p,m,x;let E=null,_=null,T=null,O=c.status,P=c.statusText;if(c.ok){if(this.method!=="HEAD"){const I=await c.text();I===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?_=I:_=JSON.parse(I))}const $=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),R=(m=c.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");$&&R&&R.length>1&&(T=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(E={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,T=null,O=406,P="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const $=await c.text();try{E=JSON.parse($),Array.isArray(E)&&c.status===404&&(_=[],E=null,O=200,P="OK")}catch{c.status===404&&$===""?(O=204,P="No Content"):E={message:$}}if(E&&this.isMaybeSingle&&(!((x=E==null?void 0:E.details)===null||x===void 0)&&x.includes("0 rows"))&&(E=null,O=200,P="OK"),E&&this.shouldThrowOnError)throw new Tm.default(E)}return{error:E,data:_,count:T,status:O,statusText:P}});return this.shouldThrowOnError||(l=l.catch(c=>{var f,p,m;return{error:{message:`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(p=c==null?void 0:c.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(m=c==null?void 0:c.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),l.then(e,r)}returns(){return this}overrideTypes(){return this}};Al.default=Nm;var Rm=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_l,"__esModule",{value:!0});const Om=Rm(Al);let km=class extends Om.default{select(e){let r=!1;const s=(e??"*").split("").map(l=>/\s/.test(l)&&!r?"":(l==='"'&&(r=!r),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:l,referencedTable:c=l}={}){const f=c?`${c}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:l=s}={}){const c=typeof l>"u"?"offset":`${l}.offset`,f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${e}`),this.url.searchParams.set(f,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:l=!1,wal:c=!1,format:f="text"}={}){var p;const m=[e?"analyze":null,r?"verbose":null,s?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),x=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${x}"; options=${m};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};_l.default=km;var Dm=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oo,"__esModule",{value:!0});const Pm=Dm(_l);let Mm=class extends Pm.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const f=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${c}fts${f}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const l=s?`${s}.or`:"or";return this.url.searchParams.append(l,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};Oo.default=Mm;var Bm=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cl,"__esModule",{value:!0});const js=Bm(Oo);let Lm=class{constructor(e,{headers:r={},schema:s,fetch:l}){this.url=e,this.headers=new Headers(r),this.schema=s,this.fetch=l}select(e,{head:r=!1,count:s}={}){const l=r?"HEAD":"GET";let c=!1;const f=(e??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",f),s&&this.headers.append("Prefer",`count=${s}`),new js.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:s=!0}={}){var l;const c="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new js.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:l,defaultToNull:c=!0}={}){var f;const p="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const m=e.reduce((x,E)=>x.concat(Object.keys(E)),[]);if(m.length>0){const x=[...new Set(m)].map(E=>`"${E}"`);this.url.searchParams.set("columns",x.join(","))}}return new js.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(e,{count:r}={}){var s;const l="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new js.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var r;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new js.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Cl.default=Lm;var vg=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(V0,"__esModule",{value:!0});const Fm=vg(Cl),Um=vg(Oo);let jm=class Cg{constructor(e,{headers:r={},schema:s,fetch:l}={}){this.url=e,this.headers=new Headers(r),this.schemaName=s,this.fetch=l}from(e){const r=new URL(`${this.url}/${e}`);return new Fm.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Cg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:l=!1,count:c}={}){var f;let p;const m=new URL(`${this.url}/rpc/${e}`);let x;s||l?(p=s?"HEAD":"GET",Object.entries(r).filter(([_,T])=>T!==void 0).map(([_,T])=>[_,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([_,T])=>{m.searchParams.append(_,T)})):(p="POST",x=r);const E=new Headers(this.headers);return c&&E.set("Prefer",`count=${c}`),new Um.default({method:p,url:m,headers:E,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};V0.default=jm;var ys=Rt&&Rt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(en,"__esModule",{value:!0});en.PostgrestError=en.PostgrestBuilder=en.PostgrestTransformBuilder=en.PostgrestFilterBuilder=en.PostgrestQueryBuilder=en.PostgrestClient=void 0;const _g=ys(V0);en.PostgrestClient=_g.default;const Ag=ys(Cl);en.PostgrestQueryBuilder=Ag.default;const Sg=ys(Oo);en.PostgrestFilterBuilder=Sg.default;const Ig=ys(_l);en.PostgrestTransformBuilder=Ig.default;const bg=ys(Al);en.PostgrestBuilder=bg.default;const Tg=ys(Sl);en.PostgrestError=Tg.default;var Vm=en.default={PostgrestClient:_g.default,PostgrestQueryBuilder:Ag.default,PostgrestFilterBuilder:Sg.default,PostgrestTransformBuilder:Ig.default,PostgrestBuilder:bg.default,PostgrestError:Tg.default};const{PostgrestClient:zm,PostgrestQueryBuilder:mE,PostgrestFilterBuilder:xE,PostgrestTransformBuilder:yE,PostgrestBuilder:EE,PostgrestError:vE}=Vm;class Hm{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,l=parseInt(s.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Wm="2.15.5",Gm=`realtime-js/${Wm}`,Xm="1.0.0",Rc=1e4,$m=1e3,Km=100;var to;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(to||(to={}));var wt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wt||(wt={}));var Dn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Dn||(Dn={}));var Oc;(function(t){t.websocket="websocket"})(Oc||(Oc={}));var si;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(si||(si={}));class Ym{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const l=r.getUint8(1),c=r.getUint8(2);let f=this.HEADER_LENGTH+2;const p=s.decode(e.slice(f,f+l));f=f+l;const m=s.decode(e.slice(f,f+c));f=f+c;const x=JSON.parse(s.decode(e.slice(f,e.byteLength)));return{ref:null,topic:p,event:m,payload:x}}}class Ng{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ze||(ze={}));const Nd=(t,e,r={})=>{var s;const l=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((c,f)=>(c[f]=qm(f,t,e,l),c),{})},qm=(t,e,r,s)=>{const l=e.find(p=>p.name===t),c=l==null?void 0:l.type,f=r[t];return c&&!s.includes(c)?Rg(c,f):kc(f)},Rg=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return ex(e,r)}switch(t){case ze.bool:return Zm(e);case ze.float4:case ze.float8:case ze.int2:case ze.int4:case ze.int8:case ze.numeric:case ze.oid:return Qm(e);case ze.json:case ze.jsonb:return Jm(e);case ze.timestamp:return tx(e);case ze.abstime:case ze.date:case ze.daterange:case ze.int4range:case ze.int8range:case ze.money:case ze.reltime:case ze.text:case ze.time:case ze.timestamptz:case ze.timetz:case ze.tsrange:case ze.tstzrange:return kc(e);default:return kc(e)}},kc=t=>t,Zm=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Qm=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Jm=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ex=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let c;const f=t.slice(1,r);try{c=JSON.parse("["+f+"]")}catch{c=f?f.split(","):[]}return c.map(p=>Rg(e,p))}return t},tx=t=>typeof t=="string"?t.replace(" ","T"):t,Og=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Au{constructor(e,r,s={},l=Rc){this.channel=e,this.event=r,this.payload=s,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Rd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Rd||(Rd={}));class no{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},l=>{const{onJoin:c,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=no.syncState(this.state,l,c,f),this.pendingDiffs.forEach(m=>{this.state=no.syncDiff(this.state,m,c,f)}),this.pendingDiffs=[],p()}),this.channel._on(s.diff,{},l=>{const{onJoin:c,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=no.syncDiff(this.state,l,c,f),p())}),this.onJoin((l,c,f)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:f})}),this.onLeave((l,c,f)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,l){const c=this.cloneDeep(e),f=this.transformState(r),p={},m={};return this.map(c,(x,E)=>{f[x]||(m[x]=E)}),this.map(f,(x,E)=>{const _=c[x];if(_){const T=E.map($=>$.presence_ref),O=_.map($=>$.presence_ref),P=E.filter($=>O.indexOf($.presence_ref)<0),L=_.filter($=>T.indexOf($.presence_ref)<0);P.length>0&&(p[x]=P),L.length>0&&(m[x]=L)}else p[x]=E}),this.syncDiff(c,{joins:p,leaves:m},s,l)}static syncDiff(e,r,s,l){const{joins:c,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),l||(l=()=>{}),this.map(c,(p,m)=>{var x;const E=(x=e[p])!==null&&x!==void 0?x:[];if(e[p]=this.cloneDeep(m),E.length>0){const _=e[p].map(O=>O.presence_ref),T=E.filter(O=>_.indexOf(O.presence_ref)<0);e[p].unshift(...T)}s(p,E,m)}),this.map(f,(p,m)=>{let x=e[p];if(!x)return;const E=m.map(_=>_.presence_ref);x=x.filter(_=>E.indexOf(_.presence_ref)<0),e[p]=x,l(p,x,m),x.length===0&&delete e[p]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const l=e[s];return"metas"in l?r[s]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[s]=l,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Od;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Od||(Od={}));var ro;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ro||(ro={}));var rr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(rr||(rr={}));class z0{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Au(this,Dn.join,this.params,this.timeout),this.rejoinTimer=new Ng(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dn.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new no(this),this.broadcastEndpointURL=Og(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:f,presence:p,private:m}}=this.params,x=(l=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(O=>O.filter))!==null&&l!==void 0?l:[],E=!!this.bindings[ro.PRESENCE]&&this.bindings[ro.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,_={},T={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:E}),postgres_changes:x,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(O=>e==null?void 0:e(rr.CHANNEL_ERROR,O)),this._onClose(()=>e==null?void 0:e(rr.CLOSED)),this.updateJoinPayload(Object.assign({config:T},_)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:O})=>{var P;if(this.socket.setAuth(),O===void 0){e==null||e(rr.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,$=(P=L==null?void 0:L.length)!==null&&P!==void 0?P:0,R=[];for(let I=0;I<$;I++){const S=L[I],{filter:{event:D,schema:G,table:V,filter:B}}=S,Y=O&&O[I];if(Y&&Y.event===D&&Y.schema===G&&Y.table===V&&Y.filter===B)R.push(Object.assign(Object.assign({},S),{id:Y.id}));else{this.unsubscribe(),this.state=wt.errored,e==null||e(rr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(rr.SUBSCRIBED);return}}).receive("error",O=>{this.state=wt.errored,e==null||e(rr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(O).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(rr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===wt.joined&&e===ro.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async send(e,r={}){var s,l;if(!this._canPush()&&e.type==="broadcast"){const{event:c,payload:f}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((l=x.body)===null||l===void 0?void 0:l.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var f,p,m;const x=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),x.receive("ok",()=>c("ok")),x.receive("error",()=>c("error")),x.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(l=>{s=new Au(this,Dn.leave,{},e),s.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wt.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const l=new AbortController,c=setTimeout(()=>l.abort(),s),f=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),f}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Au(this,e,r,s);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Km){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var l,c;const f=e.toLocaleLowerCase(),{close:p,error:m,leave:x,join:E}=Dn;if(s&&[p,m,x,E].indexOf(f)>=0&&s!==this._joinRef())return;let T=this._onMessage(f,r,s);if(r&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(O=>{var P,L,$;return((P=O.filter)===null||P===void 0?void 0:P.event)==="*"||(($=(L=O.filter)===null||L===void 0?void 0:L.event)===null||$===void 0?void 0:$.toLocaleLowerCase())===f}).map(O=>O.callback(T,s)):(c=this.bindings[f])===null||c===void 0||c.filter(O=>{var P,L,$,R,I,S;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in O){const D=O.id,G=(P=O.filter)===null||P===void 0?void 0:P.event;return D&&((L=r.ids)===null||L===void 0?void 0:L.includes(D))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===(($=r.data)===null||$===void 0?void 0:$.type.toLocaleLowerCase()))}else{const D=(I=(R=O==null?void 0:O.filter)===null||R===void 0?void 0:R.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return D==="*"||D===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return O.type.toLocaleLowerCase()===f}).map(O=>{if(typeof T=="object"&&"ids"in T){const P=T.data,{schema:L,table:$,commit_timestamp:R,type:I,errors:S}=P;T=Object.assign(Object.assign({},{schema:L,table:$,commit_timestamp:R,eventType:I,new:{},old:{},errors:S}),this._getPayloadRecords(P))}O.callback(T,s)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const l=e.toLocaleLowerCase(),c={type:l,filter:r,callback:s};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&z0.isEqual(l.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dn.close,{},e)}_onError(e){this._on(Dn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Nd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Nd(e.columns,e.old_record)),r}}const Su=()=>{},ha={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nx=[1e3,2e3,5e3,1e4],rx=1e4,ix=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sx{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rc,this.transport=null,this.heartbeatIntervalMs=ha.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Su,this.ref=0,this.reconnectTimer=null,this.logger=Su,this.conn=null,this.sendBuffer=[],this.serializer=new Ym,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...f)=>Ro(async()=>{const{default:p}=await Promise.resolve().then(()=>xs);return{default:p}},void 0).then(({default:p})=>p(...f)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...f)=>c(...f)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Oc.websocket}`,this.httpEndpoint=Og(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hm.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xm}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case to.connecting:return si.Connecting;case to.open:return si.Open;case to.closing:return si.Closing;default:return si.Closed}}isConnected(){return this.connectionState()===si.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,l=this.getChannels().find(c=>c.topic===s);if(l)return l;{const c=new z0(`realtime:${e}`,r,this);return this.channels.push(c),c}}push(e){const{topic:r,event:s,payload:l,ref:c}=e,f=()=>{this.encode(e,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${r} ${s} (${c})`,l),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close($m,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ha.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:l,payload:c,ref:f}=r,p=f?`(${f})`:"",m=c.status||"";this.log("receive",`${m} ${s} ${l} ${p}`.trim(),c),this.channels.filter(x=>x._isMember(s)).forEach(x=>x._trigger(l,c,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${e}${s}${l}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([ix],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const l={access_token:r,version:Gm};r&&s.updateJoinPayload(l),s.joinedOnce&&s._isJoined()&&s._push(Dn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(l){this.log("error",`error in ${e} callback`,l)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Ng(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ha.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,l,c,f,p,m,x,E;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Rc,this.heartbeatIntervalMs=(l=e==null?void 0:e.heartbeatIntervalMs)!==null&&l!==void 0?l:ha.HEARTBEAT_INTERVAL,this.worker=(c=e==null?void 0:e.worker)!==null&&c!==void 0?c:!1,this.accessToken=(f=e==null?void 0:e.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=e==null?void 0:e.heartbeatCallback)!==null&&p!==void 0?p:Su,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:_=>nx[_-1]||rx,this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:(_,T)=>T(JSON.stringify(_)),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class H0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ox extends H0{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Dc extends H0{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var ax=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})};const kg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ro(async()=>{const{default:s}=await Promise.resolve().then(()=>xs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},lx=()=>ax(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ro(()=>Promise.resolve().then(()=>xs),void 0)).Response:Response}),Pc=t=>{if(Array.isArray(t))return t.map(r=>Pc(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[l]=Pc(s)}),e},ux=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var xi=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})};const Iu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),cx=(t,e,r)=>xi(void 0,void 0,void 0,function*(){const s=yield lx();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(l=>{const c=t.status||500,f=(l==null?void 0:l.statusCode)||c+"";e(new ox(Iu(l),c,f))}).catch(l=>{e(new Dc(Iu(l),l))}):e(new Dc(Iu(t),t))}),hx=(t,e,r,s)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?l:(ux(s)?(l.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),l.body=JSON.stringify(s)):l.body=s,e!=null&&e.duplex&&(l.duplex=e.duplex),Object.assign(Object.assign({},l),r))};function ko(t,e,r,s,l,c){return xi(this,void 0,void 0,function*(){return new Promise((f,p)=>{t(r,hx(e,s,l,c)).then(m=>{if(!m.ok)throw m;return s!=null&&s.noResolveJson?m:m.json()}).then(m=>f(m)).catch(m=>cx(m,p,s))})})}function Ja(t,e,r,s){return xi(this,void 0,void 0,function*(){return ko(t,"GET",e,r,s)})}function Kn(t,e,r,s,l){return xi(this,void 0,void 0,function*(){return ko(t,"POST",e,s,l,r)})}function Mc(t,e,r,s,l){return xi(this,void 0,void 0,function*(){return ko(t,"PUT",e,s,l,r)})}function dx(t,e,r,s){return xi(this,void 0,void 0,function*(){return ko(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Dg(t,e,r,s,l){return xi(this,void 0,void 0,function*(){return ko(t,"DELETE",e,s,l,r)})}var Vt=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})};const fx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gx{constructor(e,r={},s,l){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=kg(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,l){return Vt(this,void 0,void 0,function*(){try{let c;const f=Object.assign(Object.assign({},kd),l);let p=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(f.upsert)});const m=f.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),m&&c.append("metadata",this.encodeMetadata(m)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",f.cacheControl),m&&c.append("metadata",this.encodeMetadata(m))):(c=s,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),l!=null&&l.headers&&(p=Object.assign(Object.assign({},p),l.headers));const x=this._removeEmptyFolders(r),E=this._getFinalPath(x),_=yield(e=="PUT"?Mc:Kn)(this.fetch,`${this.url}/object/${E}`,c,Object.assign({headers:p},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:x,id:_.Id,fullPath:_.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}upload(e,r,s){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,l){return Vt(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(e),f=this._getFinalPath(c),p=new URL(this.url+`/object/upload/sign/${f}`);p.searchParams.set("token",r);try{let m;const x=Object.assign({upsert:kd.upsert},l),E=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",x.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",x.cacheControl)):(m=s,E["cache-control"]=`max-age=${x.cacheControl}`,E["content-type"]=x.contentType);const _=yield Mc(this.fetch,p.toString(),m,{headers:E});return{data:{path:c,fullPath:_.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(mt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,r){return Vt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const l=Object.assign({},this.headers);r!=null&&r.upsert&&(l["x-upsert"]="true");const c=yield Kn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:l}),f=new URL(this.url+c.url),p=f.searchParams.get("token");if(!p)throw new H0("No token returned by API");return{data:{signedUrl:f.toString(),path:e,token:p},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}update(e,r,s){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return Vt(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}copy(e,r,s){return Vt(this,void 0,void 0,function*(){try{return{data:{path:(yield Kn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}createSignedUrl(e,r,s){return Vt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),c=yield Kn(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const f=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${f}`)},{data:c,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}createSignedUrls(e,r,s){return Vt(this,void 0,void 0,function*(){try{const l=yield Kn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:l.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${c}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}download(e,r){return Vt(this,void 0,void 0,function*(){const l=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),f=c?`?${c}`:"";try{const p=this._getFinalPath(e);return{data:yield(yield Ja(this.fetch,`${this.url}/${l}/${p}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(mt(p))return{data:null,error:p};throw p}})}info(e){return Vt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Ja(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Pc(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}exists(e){return Vt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield dx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s)&&s instanceof Dc){const l=s.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),l=[],c=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&l.push(c);const p=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});m!==""&&l.push(m);let x=l.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${s}${x}`)}}}remove(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Dg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}list(e,r,s){return Vt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},fx),r),{prefix:e||""});return{data:yield Kn(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},s),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}listV2(e,r){return Vt(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Kn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const px="2.12.1",wx={"X-Client-Info":`storage-js/${px}`};var Oi=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})};class mx{constructor(e,r={},s,l){this.shouldThrowOnError=!1;const c=new URL(e);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},wx),r),this.fetch=kg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Oi(this,void 0,void 0,function*(){try{return{data:yield Ja(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}getBucket(e){return Oi(this,void 0,void 0,function*(){try{return{data:yield Ja(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Oi(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Oi(this,void 0,void 0,function*(){try{return{data:yield Mc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Oi(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Oi(this,void 0,void 0,function*(){try{return{data:yield Dg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}}class xx extends mx{constructor(e,r={},s,l){super(e,r,s,l)}from(e){return new gx(this.url,this.headers,e,this.fetch)}}const yx="2.57.4";let Gs="";typeof Deno<"u"?Gs="deno":typeof document<"u"?Gs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gs="react-native":Gs="node";const Ex={"X-Client-Info":`supabase-js-${Gs}/${yx}`},vx={headers:Ex},Cx={schema:"public"},_x={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ax={};var Sx=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})};const Ix=t=>{let e;return t?e=t:typeof fetch>"u"?e=xg:e=fetch,(...r)=>e(...r)},bx=()=>typeof Headers>"u"?yg:Headers,Tx=(t,e,r)=>{const s=Ix(r),l=bx();return(c,f)=>Sx(void 0,void 0,void 0,function*(){var p;const m=(p=yield e())!==null&&p!==void 0?p:t;let x=new l(f==null?void 0:f.headers);return x.has("apikey")||x.set("apikey",t),x.has("Authorization")||x.set("Authorization",`Bearer ${m}`),s(c,Object.assign(Object.assign({},f),{headers:x}))})};var Nx=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})};function Rx(t){return t.endsWith("/")?t:t+"/"}function Ox(t,e){var r,s;const{db:l,auth:c,realtime:f,global:p}=t,{db:m,auth:x,realtime:E,global:_}=e,T={db:Object.assign(Object.assign({},m),l),auth:Object.assign(Object.assign({},x),c),realtime:Object.assign(Object.assign({},E),f),storage:{},global:Object.assign(Object.assign(Object.assign({},_),p),{headers:Object.assign(Object.assign({},(r=_==null?void 0:_.headers)!==null&&r!==void 0?r:{}),(s=p==null?void 0:p.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Nx(this,void 0,void 0,function*(){return""})};return t.accessToken?T.accessToken=t.accessToken:delete T.accessToken,T}function kx(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Rx(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Pg="2.71.1",Bi=30*1e3,Bc=3,bu=Bc*Bi,Dx="http://localhost:9999",Px="supabase.auth.token",Mx={"X-Client-Info":`gotrue-js/${Pg}`},Lc="X-Supabase-Api-Version",Mg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lx=10*60*1e3;class W0 extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function xe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Fx extends W0{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Ux(t){return xe(t)&&t.name==="AuthApiError"}class Bg extends W0{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Gr extends W0{constructor(e,r,s,l){super(e,s,l),this.name=r,this.status=s}}class _r extends Gr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jx(t){return xe(t)&&t.name==="AuthSessionMissingError"}class da extends Gr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fa extends Gr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ga extends Gr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Vx(t){return xe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Dd extends Gr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fc extends Gr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Tu(t){return xe(t)&&t.name==="AuthRetryableFetchError"}class Pd extends Gr{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Uc extends Gr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const el="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Md=` 	
\r=`.split(""),zx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Md.length;e+=1)t[Md[e].charCodeAt(0)]=-2;for(let e=0;e<el.length;e+=1)t[el[e].charCodeAt(0)]=e;return t})();function Bd(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(el[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(el[s]),e.queuedBits-=6}}function Lg(t,e,r){const s=zx[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ld(t){const e=[],r=f=>{e.push(String.fromCodePoint(f))},s={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=f=>{Gx(f,s,r)};for(let f=0;f<t.length;f+=1)Lg(t.charCodeAt(f),l,c);return e.join("")}function Hx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Wx(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const l=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}Hx(s,e)}}function Gx(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Xx(t){const e=[],r={queue:0,queuedBits:0},s=l=>{e.push(l)};for(let l=0;l<t.length;l+=1)Lg(t.charCodeAt(l),r,s);return new Uint8Array(e)}function $x(t){const e=[];return Wx(t,r=>e.push(r)),new Uint8Array(e)}function Kx(t){const e=[],r={queue:0,queuedBits:0},s=l=>{e.push(l)};return t.forEach(l=>Bd(l,r,s)),Bd(null,r,s),e.join("")}function Yx(t){return Math.round(Date.now()/1e3)+t}function qx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Rn=()=>typeof window<"u"&&typeof document<"u",ei={tested:!1,writable:!1},Fg=()=>{if(!Rn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ei.tested)return ei.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ei.tested=!0,ei.writable=!0}catch{ei.tested=!0,ei.writable=!1}return ei.writable};function Zx(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{e[c]=l})}catch{}return r.searchParams.forEach((s,l)=>{e[l]=s}),e}const Ug=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ro(async()=>{const{default:s}=await Promise.resolve().then(()=>xs);return{default:s}},void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Qx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Li=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ti=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Cr=async(t,e)=>{await t.removeItem(e)};class Il{constructor(){this.promise=new Il.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Il.promiseConstructor=Promise;function Nu(t){const e=t.split(".");if(e.length!==3)throw new Uc("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Bx.test(e[s]))throw new Uc("JWT not in base64url format");return{header:JSON.parse(Ld(e[0])),payload:JSON.parse(Ld(e[1])),signature:Xx(e[2]),raw:{header:e[0],payload:e[1]}}}async function Jx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ey(t,e){return new Promise((s,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const f=await t(c);if(!e(c,null,f)){s(f);return}}catch(f){if(!e(c,f)){l(f);return}}})()})}function ty(t){return("0"+t.toString(16)).substr(-2)}function ny(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*s));return l}return crypto.getRandomValues(e),Array.from(e,ty).join("")}async function ry(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(s);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function iy(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await ry(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ki(t,e,r=!1){const s=ny();let l=s;r&&(l+="/PASSWORD_RECOVERY"),await Li(t,`${e}-code-verifier`,l);const c=await iy(s);return[c,s===c?"plain":"s256"]}const sy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oy(t){const e=t.headers.get(Lc);if(!e||!e.match(sy))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ay(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ly(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Di(t){if(!uy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ru(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fd(t){return JSON.parse(JSON.stringify(t))}var cy=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(r[s[l]]=t[s[l]]);return r};const ii=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hy=[502,503,504];async function Ud(t){var e;if(!Qx(t))throw new Fc(ii(t),0);if(hy.includes(t.status))throw new Fc(ii(t),t.status);let r;try{r=await t.json()}catch(c){throw new Bg(ii(c),c)}let s;const l=oy(t);if(l&&l.getTime()>=Mg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Pd(ii(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new _r}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,f)=>c&&typeof f=="string",!0))throw new Pd(ii(r),t.status,r.weak_password.reasons);throw new Fx(ii(r),t.status||500,s)}const dy=(t,e,r,s)=>{const l={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),l.body=JSON.stringify(s),Object.assign(Object.assign({},l),r))};async function ve(t,e,r,s){var l;const c=Object.assign({},s==null?void 0:s.headers);c[Lc]||(c[Lc]=Mg["2024-01-01"].name),s!=null&&s.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const f=(l=s==null?void 0:s.query)!==null&&l!==void 0?l:{};s!=null&&s.redirectTo&&(f.redirect_to=s.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",m=await fy(t,e,r+p,{headers:c,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(m):{data:Object.assign({},m),error:null}}async function fy(t,e,r,s,l,c){const f=dy(e,s,l,c);let p;try{p=await t(r,Object.assign({},f))}catch(m){throw console.error(m),new Fc(ii(m),0)}if(p.ok||await Ud(p),s!=null&&s.noResolveJson)return p;try{return await p.json()}catch(m){await Ud(m)}}function er(t){var e;let r=null;my(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Yx(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function jd(t){const e=er(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Tr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gy(t){return{data:t,error:null}}function py(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:l,verification_type:c}=t,f=cy(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:e,email_otp:r,hashed_token:s,redirect_to:l,verification_type:c},m=Object.assign({},f);return{data:{properties:p,user:m},error:null}}function wy(t){return t}function my(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ou=["global","local","others"];var xy=function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(r[s[l]]=t[s[l]]);return r};class yy{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Ug(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Ou[0]){if(Ou.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ou.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Tr})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=xy(e,["options"]),l=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(l.new_email=s==null?void 0:s.newEmail,delete l.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:py,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(xe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Tr})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,l,c,f,p,m;try{const x={nextPage:null,lastPage:0,total:0},E=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(c=(l=e==null?void 0:e.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:wy});if(E.error)throw E.error;const _=await E.json(),T=(f=E.headers.get("x-total-count"))!==null&&f!==void 0?f:0,O=(m=(p=E.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return O.length>0&&(O.forEach(P=>{const L=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(P.split(";")[1].split("=")[1]);x[`${$}Page`]=L}),x.total=parseInt(T)),{data:Object.assign(Object.assign({},_),x),error:null}}catch(x){if(xe(x))return{data:{users:[]},error:x};throw x}}async getUserById(e){Di(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Tr})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Di(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Tr})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){Di(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Tr})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Di(e.userId);try{const{data:r,error:s}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:s}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Di(e.userId),Di(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}}function Vd(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Ey(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Pi={debug:!!(globalThis&&Fg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class vy extends jg{}async function Cy(t,e,r){Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async l=>{if(l){Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await r()}finally{Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(e===0)throw Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new vy(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Pi.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Ey();const _y={url:Dx,storageKey:Px,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Mx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zd(t,e,r){return await r()}const Mi={};class _o{constructor(e){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_o.nextInstanceID,_o.nextInstanceID+=1,this.instanceID>0&&Rn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},_y),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new yy({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Ug(l.fetch),this.lock=l.lock||zd,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Rn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Cy:this.lock=zd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Fg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Vd(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Vd(this.memoryStorage)),Rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Mi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Mi[this.storageKey]=Object.assign(Object.assign({},Mi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Mi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mi[this.storageKey]=Object.assign(Object.assign({},Mi[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Pg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Zx(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Rn()&&this.detectSessionInUrl&&s!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Vx(c)){const m=(e=c.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:f,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return xe(r)?{error:r}:{error:new Bg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,l;try{const c=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(l=e==null?void 0:e.options)===null||l===void 0?void 0:l.captchaToken}},xform:er}),{data:f,error:p}=c;if(p||!f)return{data:{user:null,session:null},error:p};const m=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(c){if(xe(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(e){var r,s,l;try{let c;if("email"in e){const{email:E,password:_,options:T}=e;let O=null,P=null;this.flowType==="pkce"&&([O,P]=await ki(this.storage,this.storageKey)),c=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:E,password:_,data:(r=T==null?void 0:T.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:O,code_challenge_method:P},xform:er})}else if("phone"in e){const{phone:E,password:_,options:T}=e;c=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:E,password:_,data:(s=T==null?void 0:T.data)!==null&&s!==void 0?s:{},channel:(l=T==null?void 0:T.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:er})}else throw new fa("You must provide either an email or phone number and a password");const{data:f,error:p}=c;if(p||!f)return{data:{user:null,session:null},error:p};const m=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(c){if(xe(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(e){try{let r;if("email"in e){const{email:c,password:f,options:p}=e;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:f,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:jd})}else if("phone"in e){const{phone:c,password:f,options:p}=e;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:f,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:jd})}else throw new fa("You must provide either an email or phone number and a password");const{data:s,error:l}=r;return l?{data:{user:null,session:null},error:l}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new da}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:l})}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,l,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,l,c,f,p,m,x,E,_,T,O;let P,L;if("message"in e)P=e.message,L=e.signature;else{const{chain:$,wallet:R,statement:I,options:S}=e;let D;if(Rn())if(typeof R=="object")D=R;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))D=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=R}const G=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in D&&D.signIn){const V=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),I?{statement:I}:null));let B;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")B=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)B=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)P=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),L=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${G.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(l=(s=S==null?void 0:S.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((p=S==null?void 0:S.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((m=S==null?void 0:S.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((x=S==null?void 0:S.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((_=(E=S==null?void 0:S.signInWithSolana)===null||E===void 0?void 0:E.resources)===null||_===void 0)&&_.length?["Resources",...S.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const V=await D.signMessage(new TextEncoder().encode(P),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=V}}try{const{data:$,error:R}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:Kx(L)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(O=e.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:er});if(R)throw R;return!$||!$.session||!$.user?{data:{user:null,session:null},error:new da}:($.session&&(await this._saveSession($.session),await this._notifyAllSubscribers("SIGNED_IN",$.session)),{data:Object.assign({},$),error:R})}catch($){if(xe($))return{data:{user:null,session:null},error:$};throw $}}async _exchangeCodeForSession(e){const r=await ti(this.storage,`${this.storageKey}-code-verifier`),[s,l]=(r??"").split("/");try{const{data:c,error:f}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:er});if(await Cr(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new da}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:f})}catch(c){if(xe(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(e){try{const{options:r,provider:s,token:l,access_token:c,nonce:f}=e,p=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:l,access_token:c,nonce:f,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:er}),{data:m,error:x}=p;return x?{data:{user:null,session:null},error:x}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new da}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:x})}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,l,c,f;try{if("email"in e){const{email:p,options:m}=e;let x=null,E=null;this.flowType==="pkce"&&([x,E]=await ki(this.storage,this.storageKey));const{error:_}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(s=m==null?void 0:m.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:E},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){const{phone:p,options:m}=e,{data:x,error:E}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=m==null?void 0:m.data)!==null&&l!==void 0?l:{},create_user:(c=m==null?void 0:m.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(f=m==null?void 0:m.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:E}}throw new fa("You must provide either an email or phone number.")}catch(p){if(xe(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(e){var r,s;try{let l,c;"options"in e&&(l=(r=e.options)===null||r===void 0?void 0:r.redirectTo,c=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:f,error:p}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:er});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const m=f.session,x=f.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:x,session:m},error:null}}catch(l){if(xe(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var r,s,l;try{let c=null,f=null;return this.flowType==="pkce"&&([c,f]=await ki(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((l=e==null?void 0:e.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:f}),headers:this.headers,xform:gy})}catch(c){if(xe(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new _r;const{error:l}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(xe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:l,options:c}=e,{error:f}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in e){const{phone:s,type:l,options:c}=e,{data:f,error:p}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new fa("You must provide either an email or phone number and a type")}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ti(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<bu:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const f=await ti(this.userStorage,this.storageKey+"-user");f!=null&&f.user?e.user=f.user:e.user=Ru()}if(this.storage.isServer&&e.user){let f=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,x,E)=>(!f&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,x,E))})}return{data:{session:e},error:null}}const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Tr}):await this._useSession(async r=>{var s,l,c;const{data:f,error:p}=r;if(p)throw p;return!(!((s=f.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _r}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:Tr})})}catch(r){if(xe(r))return jx(r)&&(await this._removeSession(),await Cr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:l,error:c}=s;if(c)throw c;if(!l.session)throw new _r;const f=l.session;let p=null,m=null;this.flowType==="pkce"&&e.email!=null&&([p,m]=await ki(this.storage,this.storageKey));const{data:x,error:E}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:p,code_challenge_method:m}),jwt:f.access_token,xform:Tr});if(E)throw E;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(s){if(xe(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _r;const r=Date.now()/1e3;let s=r,l=!0,c=null;const{payload:f}=Nu(e.access_token);if(f.exp&&(s=f.exp,l=s<=r),l){const{session:p,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:m}=await this._getUser(e.access_token);if(m)throw m;c={access_token:e.access_token,refresh_token:e.refresh_token,user:p.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(xe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:f,error:p}=r;if(p)throw p;e=(s=f.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new _r;const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Rn())throw new ga("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ga(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Dd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ga("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Dd("No code detected.");const{data:I,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:l,access_token:c,refresh_token:f,expires_in:p,expires_at:m,token_type:x}=e;if(!c||!p||!f||!x)throw new ga("No session defined in URL");const E=Math.round(Date.now()/1e3),_=parseInt(p);let T=E+_;m&&(T=parseInt(m));const O=T-E;O*1e3<=Bi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${O}s, should have been closer to ${_}s`);const P=T-_;E-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,T,E):E-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,T,E);const{data:L,error:$}=await this._getUser(c);if($)throw $;const R={provider_token:s,provider_refresh_token:l,access_token:c,expires_in:_,expires_at:T,refresh_token:f,token_type:x,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:e.type},error:null}}catch(s){if(xe(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ti(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:l,error:c}=r;if(c)return{error:c};const f=(s=l.session)===null||s===void 0?void 0:s.access_token;if(f){const{error:p}=await this.admin.signOut(f,e);if(p&&!(Ux(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return e!=="others"&&(await this._removeSession(),await Cr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=qx(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,l;try{const{data:{session:c},error:f}=r;if(f)throw f;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,r={}){let s=null,l=null;this.flowType==="pkce"&&([s,l]=await ki(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(xe(c))return{data:null,error:c};throw c}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:l}=await this._useSession(async c=>{var f,p,m,x,E;const{data:_,error:T}=c;if(T)throw T;const O=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(f=e.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=e.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",O,{headers:this.headers,jwt:(E=(x=_.session)===null||x===void 0?void 0:x.access_token)!==null&&E!==void 0?E:void 0})});if(l)throw l;return Rn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(xe(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,l;const{data:c,error:f}=r;if(f)throw f;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await ey(async l=>(l>0&&await Jx(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:er})),(l,c)=>{const f=200*Math.pow(2,l);return c&&Tu(c)&&Date.now()+f-s<Bi})}catch(s){if(this._debug(r,"error",s),xe(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Rn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const l=await ti(this.storage,this.storageKey);if(l&&this.userStorage){let f=await ti(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:l.user},await Li(this.userStorage,this.storageKey+"-user",f)),l.user=(e=f==null?void 0:f.user)!==null&&e!==void 0?e:Ru()}else if(l&&!l.user&&!l.user){const f=await ti(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(l.user=f.user,await Cr(this.storage,this.storageKey+"-user"),await Li(this.storage,this.storageKey,l)):l.user=Ru()}if(this._debug(s,"session from storage",l),!this._isValidSession(l)){this._debug(s,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<bu;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${bu}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:f}=await this._callRefreshToken(l.refresh_token);f&&(console.error(f),Tu(f)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(l.access_token);!p&&(f!=null&&f.user)?(l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(s,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(s,"error",l),console.error(l);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new _r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Il;const{data:c,error:f}=await this._refreshAccessToken(e);if(f)throw f;if(!c.session)throw new _r;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={session:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(l,"error",c),xe(c)){const f={session:null,error:c};return Tu(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,r,s=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const c=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(e,r)}catch(m){c.push(m)}});if(await Promise.all(f),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Li(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=Fd(l);await Li(this.storage,this.storageKey,c)}else{const l=Fd(r);await Li(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await Cr(this.storage,this.storageKey),await Cr(this.storage,this.storageKey+"-code-verifier"),await Cr(this.storage,this.storageKey+"-user"),this.userStorage&&await Cr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Bi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((s.expires_at*1e3-e)/Bi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Bi}ms, refresh threshold is ${Bc} ticks`),l<=Bc&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const l=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&l.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&l.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,f]=await ki(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(f)}`});l.push(p.toString())}if(s!=null&&s.queryParams){const c=new URLSearchParams(s.queryParams);l.push(c.toString())}return s!=null&&s.skipBrowserRedirect&&l.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:l,error:c}=r;return c?{data:null,error:c}:await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,l;const{data:c,error:f}=r;if(f)return{data:null,error:f};const p=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:m,error:x}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token});return x?{data:null,error:x}:(e.factorType==="totp"&&(!((l=m==null?void 0:m.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:l,error:c}=r;if(c)return{data:null,error:c};const{data:f,error:p}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:p})})}catch(r){if(xe(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:l,error:c}=r;return c?{data:null,error:c}:await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(xe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],l=s.filter(f=>f.factor_type==="totp"&&f.status==="verified"),c=s.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:s,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:l},error:c}=e;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Nu(l.access_token);let p=null;f.aal&&(p=f.aal);let m=p;((s=(r=l.user.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const E=f.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:E},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(p=>p.kid===e);if(s)return s;const l=Date.now();if(s=this.jwks.keys.find(p=>p.kid===e),s&&this.jwks_cached_at+Lx>l)return s;const{data:c,error:f}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,s=c.keys.find(p=>p.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:O,error:P}=await this.getSession();if(P||!O.session)return{data:null,error:P};s=O.session.access_token}const{header:l,payload:c,signature:f,raw:{header:p,payload:m}}=Nu(s);r!=null&&r.allowExpired||ay(c.exp);const x=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!x){const{error:O}=await this.getUser(s);if(O)throw O;return{data:{claims:c,header:l,signature:f},error:null}}const E=ly(l.alg),_=await crypto.subtle.importKey("jwk",x,E,!0,["verify"]);if(!await crypto.subtle.verify(E,_,f,$x(`${p}.${m}`)))throw new Uc("Invalid JWT signature");return{data:{claims:c,header:l,signature:f},error:null}}catch(s){if(xe(s))return{data:null,error:s};throw s}}}_o.nextInstanceID=0;const Ay=_o;class Sy extends Ay{constructor(e){super(e)}}var Iy=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})};class by{constructor(e,r,s){var l,c,f;this.supabaseUrl=e,this.supabaseKey=r;const p=kx(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,x={db:Cx,realtime:Ax,auth:Object.assign(Object.assign({},_x),{storageKey:m}),global:vx},E=Ox(s??{},x);this.storageKey=(l=E.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=E.global.headers)!==null&&c!==void 0?c:{},E.accessToken?(this.accessToken=E.accessToken,this.auth=new Proxy({},{get:(_,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=E.auth)!==null&&f!==void 0?f:{},this.headers,E.global.fetch),this.fetch=Tx(r,this._getAccessToken.bind(this),E.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},E.realtime)),this.rest=new zm(new URL("rest/v1",p).href,{headers:this.headers,schema:E.db.schema,fetch:this.fetch}),this.storage=new xx(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),E.accessToken||this._listenForAuthEvents()}get functions(){return new Em(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Iy(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:l,userStorage:c,storageKey:f,flowType:p,lock:m,debug:x},E,_){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Sy({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),E),storageKey:f,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:l,userStorage:c,flowType:p,lock:m,debug:x,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new sx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ty=(t,e,r)=>new by(t,e,r);function Ny(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Ny()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ry="https://lidnltvfvtezkhjviirv.supabase.co",Oy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpZG5sdHZmdnRlemtoanZpaXJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgxNDU4NTAsImV4cCI6MjA4MzcyMTg1MH0.qJJS4Py2HzCD3MB11n0djsKu7L9zv2rcjoWx_o3Fnsk",Mn=Ty(Ry,Oy),Vg=Ie.createContext(void 0);function ky({children:t}){const[e,r]=Ie.useState(null),[s,l]=Ie.useState(!0);Ie.useEffect(()=>{Mn.auth.getSession().then(({data:{session:x}})=>{r((x==null?void 0:x.user)??null),l(!1)});const{data:{subscription:m}}=Mn.auth.onAuthStateChange((x,E)=>{(async()=>r((E==null?void 0:E.user)??null))()});return()=>m.unsubscribe()},[]);const c=async(m,x)=>{try{const{error:E}=await Mn.auth.signInWithPassword({email:m,password:x});return{error:E}}catch(E){return{error:E}}},f=async(m,x)=>{try{const{error:E}=await Mn.auth.signUp({email:m,password:x});return{error:E}}catch(E){return{error:E}}},p=async()=>{await Mn.auth.signOut()};return F.jsx(Vg.Provider,{value:{user:e,loading:s,signIn:c,signUp:f,signOut:p},children:t})}function Do(){const t=Ie.useContext(Vg);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xt=(t,e)=>{const r=Ie.forwardRef(({color:s="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:f,className:p="",children:m,...x},E)=>Ie.createElement("svg",{ref:E,...Dy,width:l,height:l,stroke:s,strokeWidth:f?Number(c)*24/Number(l):c,className:["lucide",`lucide-${Py(t)}`,p].join(" "),...x},[...e.map(([_,T])=>Ie.createElement(_,T)),...Array.isArray(m)?m:[m]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=Xt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Xt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=Xt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=Xt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Xt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Xt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=Xt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Xt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=Xt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Xt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Xt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Xt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=Xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Gy(){const[t,e]=Ie.useState(""),[r,s]=Ie.useState(""),[l,c]=Ie.useState(!1),[f,p]=Ie.useState(""),[m,x]=Ie.useState(!1),{signIn:E,signUp:_}=Do(),T=async O=>{O.preventDefault(),p(""),x(!0);const{error:P}=l?await _(t,r):await E(t,r);P&&p(P.message),x(!1)};return F.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:F.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[F.jsx("div",{className:"flex items-center justify-center mb-8",children:F.jsx("div",{className:"bg-blue-600 p-3 rounded-xl",children:F.jsx(jy,{className:"w-8 h-8 text-white"})})}),F.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-2",children:"QR Attendance System"}),F.jsx("p",{className:"text-center text-gray-600 mb-8",children:l?"Create your account":"Sign in to continue"}),f&&F.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:f}),F.jsxs("form",{onSubmit:T,className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),F.jsx("input",{id:"email",type:"email",value:t,onChange:O=>e(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),F.jsx("input",{id:"password",type:"password",value:r,onChange:O=>s(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0,minLength:6})]}),F.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:m?"Processing...":l?"Sign Up":"Sign In"})]}),F.jsx("div",{className:"mt-6 text-center",children:F.jsx("button",{onClick:()=>{c(!l),p("")},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:l?"Already have an account? Sign in":"Need an account? Sign up"})})]})})}var yi={},Xy=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Wg={},gn={};let G0;const $y=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];gn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};gn.getSymbolTotalCodewords=function(e){return $y[e]};gn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};gn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');G0=e};gn.isKanjiModeEnabled=function(){return typeof G0<"u"};gn.toSJIS=function(e){return G0(e)};var Tl={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},t.from=function(s,l){if(t.isValid(s))return s;try{return e(s)}catch{return l}}})(Tl);function Gg(){this.buffer=[],this.length=0}Gg.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Ky=Gg;function Po(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Po.prototype.set=function(t,e,r,s){const l=t*this.size+e;this.data[l]=r,s&&(this.reservedBit[l]=!0)};Po.prototype.get=function(t,e){return this.data[t*this.size+e]};Po.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};Po.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Yy=Po,Xg={};(function(t){const e=gn.getSymbolSize;t.getRowColCoords=function(s){if(s===1)return[];const l=Math.floor(s/7)+2,c=e(s),f=c===145?26:Math.ceil((c-13)/(2*l-2))*2,p=[c-7];for(let m=1;m<l-1;m++)p[m]=p[m-1]-f;return p.push(6),p.reverse()},t.getPositions=function(s){const l=[],c=t.getRowColCoords(s),f=c.length;for(let p=0;p<f;p++)for(let m=0;m<f;m++)p===0&&m===0||p===0&&m===f-1||p===f-1&&m===0||l.push([c[p],c[m]]);return l}})(Xg);var $g={};const qy=gn.getSymbolSize,Gd=7;$g.getPositions=function(e){const r=qy(e);return[[0,0],[r-Gd,0],[0,r-Gd]]};var Kg={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},t.from=function(l){return t.isValid(l)?parseInt(l,10):void 0},t.getPenaltyN1=function(l){const c=l.size;let f=0,p=0,m=0,x=null,E=null;for(let _=0;_<c;_++){p=m=0,x=E=null;for(let T=0;T<c;T++){let O=l.get(_,T);O===x?p++:(p>=5&&(f+=e.N1+(p-5)),x=O,p=1),O=l.get(T,_),O===E?m++:(m>=5&&(f+=e.N1+(m-5)),E=O,m=1)}p>=5&&(f+=e.N1+(p-5)),m>=5&&(f+=e.N1+(m-5))}return f},t.getPenaltyN2=function(l){const c=l.size;let f=0;for(let p=0;p<c-1;p++)for(let m=0;m<c-1;m++){const x=l.get(p,m)+l.get(p,m+1)+l.get(p+1,m)+l.get(p+1,m+1);(x===4||x===0)&&f++}return f*e.N2},t.getPenaltyN3=function(l){const c=l.size;let f=0,p=0,m=0;for(let x=0;x<c;x++){p=m=0;for(let E=0;E<c;E++)p=p<<1&2047|l.get(x,E),E>=10&&(p===1488||p===93)&&f++,m=m<<1&2047|l.get(E,x),E>=10&&(m===1488||m===93)&&f++}return f*e.N3},t.getPenaltyN4=function(l){let c=0;const f=l.data.length;for(let m=0;m<f;m++)c+=l.data[m];return Math.abs(Math.ceil(c*100/f/5)-10)*e.N4};function r(s,l,c){switch(s){case t.Patterns.PATTERN000:return(l+c)%2===0;case t.Patterns.PATTERN001:return l%2===0;case t.Patterns.PATTERN010:return c%3===0;case t.Patterns.PATTERN011:return(l+c)%3===0;case t.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(c/3))%2===0;case t.Patterns.PATTERN101:return l*c%2+l*c%3===0;case t.Patterns.PATTERN110:return(l*c%2+l*c%3)%2===0;case t.Patterns.PATTERN111:return(l*c%3+(l+c)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}t.applyMask=function(l,c){const f=c.size;for(let p=0;p<f;p++)for(let m=0;m<f;m++)c.isReserved(m,p)||c.xor(m,p,r(l,m,p))},t.getBestMask=function(l,c){const f=Object.keys(t.Patterns).length;let p=0,m=1/0;for(let x=0;x<f;x++){c(x),t.applyMask(x,l);const E=t.getPenaltyN1(l)+t.getPenaltyN2(l)+t.getPenaltyN3(l)+t.getPenaltyN4(l);t.applyMask(x,l),E<m&&(m=E,p=x)}return p}})(Kg);var Nl={};const Or=Tl,pa=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],wa=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Nl.getBlocksCount=function(e,r){switch(r){case Or.L:return pa[(e-1)*4+0];case Or.M:return pa[(e-1)*4+1];case Or.Q:return pa[(e-1)*4+2];case Or.H:return pa[(e-1)*4+3];default:return}};Nl.getTotalCodewordsCount=function(e,r){switch(r){case Or.L:return wa[(e-1)*4+0];case Or.M:return wa[(e-1)*4+1];case Or.Q:return wa[(e-1)*4+2];case Or.H:return wa[(e-1)*4+3];default:return}};var Yg={},Rl={};const io=new Uint8Array(512),tl=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)io[r]=e,tl[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)io[r]=io[r-255]})();Rl.log=function(e){if(e<1)throw new Error("log("+e+")");return tl[e]};Rl.exp=function(e){return io[e]};Rl.mul=function(e,r){return e===0||r===0?0:io[tl[e]+tl[r]]};(function(t){const e=Rl;t.mul=function(s,l){const c=new Uint8Array(s.length+l.length-1);for(let f=0;f<s.length;f++)for(let p=0;p<l.length;p++)c[f+p]^=e.mul(s[f],l[p]);return c},t.mod=function(s,l){let c=new Uint8Array(s);for(;c.length-l.length>=0;){const f=c[0];for(let m=0;m<l.length;m++)c[m]^=e.mul(l[m],f);let p=0;for(;p<c.length&&c[p]===0;)p++;c=c.slice(p)}return c},t.generateECPolynomial=function(s){let l=new Uint8Array([1]);for(let c=0;c<s;c++)l=t.mul(l,new Uint8Array([1,e.exp(c)]));return l}})(Yg);const qg=Yg;function X0(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}X0.prototype.initialize=function(e){this.degree=e,this.genPoly=qg.generateECPolynomial(this.degree)};X0.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const s=qg.mod(r,this.genPoly),l=this.degree-s.length;if(l>0){const c=new Uint8Array(this.degree);return c.set(s,l),c}return s};var Zy=X0,Zg={},Xr={},$0={};$0.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Qn={};const Qg="[0-9]+",Qy="[A-Z $%*+\\-./:]+";let Ao="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ao=Ao.replace(/u/g,"\\u");const Jy="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ao+`)(?:.|[\r
]))+`;Qn.KANJI=new RegExp(Ao,"g");Qn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Qn.BYTE=new RegExp(Jy,"g");Qn.NUMERIC=new RegExp(Qg,"g");Qn.ALPHANUMERIC=new RegExp(Qy,"g");const e3=new RegExp("^"+Ao+"$"),t3=new RegExp("^"+Qg+"$"),n3=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Qn.testKanji=function(e){return e3.test(e)};Qn.testNumeric=function(e){return t3.test(e)};Qn.testAlphanumeric=function(e){return n3.test(e)};(function(t){const e=$0,r=Qn;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(c,f){if(!c.ccBits)throw new Error("Invalid mode: "+c);if(!e.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?c.ccBits[0]:f<27?c.ccBits[1]:c.ccBits[2]},t.getBestModeForData=function(c){return r.testNumeric(c)?t.NUMERIC:r.testAlphanumeric(c)?t.ALPHANUMERIC:r.testKanji(c)?t.KANJI:t.BYTE},t.toString=function(c){if(c&&c.id)return c.id;throw new Error("Invalid mode")},t.isValid=function(c){return c&&c.bit&&c.ccBits};function s(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+l)}}t.from=function(c,f){if(t.isValid(c))return c;try{return s(c)}catch{return f}}})(Xr);(function(t){const e=gn,r=Nl,s=Tl,l=Xr,c=$0,f=7973,p=e.getBCHDigit(f);function m(T,O,P){for(let L=1;L<=40;L++)if(O<=t.getCapacity(L,P,T))return L}function x(T,O){return l.getCharCountIndicator(T,O)+4}function E(T,O){let P=0;return T.forEach(function(L){const $=x(L.mode,O);P+=$+L.getBitsLength()}),P}function _(T,O){for(let P=1;P<=40;P++)if(E(T,P)<=t.getCapacity(P,O,l.MIXED))return P}t.from=function(O,P){return c.isValid(O)?parseInt(O,10):P},t.getCapacity=function(O,P,L){if(!c.isValid(O))throw new Error("Invalid QR Code version");typeof L>"u"&&(L=l.BYTE);const $=e.getSymbolTotalCodewords(O),R=r.getTotalCodewordsCount(O,P),I=($-R)*8;if(L===l.MIXED)return I;const S=I-x(L,O);switch(L){case l.NUMERIC:return Math.floor(S/10*3);case l.ALPHANUMERIC:return Math.floor(S/11*2);case l.KANJI:return Math.floor(S/13);case l.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(O,P){let L;const $=s.from(P,s.M);if(Array.isArray(O)){if(O.length>1)return _(O,$);if(O.length===0)return 1;L=O[0]}else L=O;return m(L.mode,L.getLength(),$)},t.getEncodedBits=function(O){if(!c.isValid(O)||O<7)throw new Error("Invalid QR Code version");let P=O<<12;for(;e.getBCHDigit(P)-p>=0;)P^=f<<e.getBCHDigit(P)-p;return O<<12|P}})(Zg);var Jg={};const jc=gn,e2=1335,r3=21522,Xd=jc.getBCHDigit(e2);Jg.getEncodedBits=function(e,r){const s=e.bit<<3|r;let l=s<<10;for(;jc.getBCHDigit(l)-Xd>=0;)l^=e2<<jc.getBCHDigit(l)-Xd;return(s<<10|l)^r3};var t2={};const i3=Xr;function hs(t){this.mode=i3.NUMERIC,this.data=t.toString()}hs.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};hs.prototype.getLength=function(){return this.data.length};hs.prototype.getBitsLength=function(){return hs.getBitsLength(this.data.length)};hs.prototype.write=function(e){let r,s,l;for(r=0;r+3<=this.data.length;r+=3)s=this.data.substr(r,3),l=parseInt(s,10),e.put(l,10);const c=this.data.length-r;c>0&&(s=this.data.substr(r),l=parseInt(s,10),e.put(l,c*3+1))};var s3=hs;const o3=Xr,ku=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ds(t){this.mode=o3.ALPHANUMERIC,this.data=t}ds.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ds.prototype.getLength=function(){return this.data.length};ds.prototype.getBitsLength=function(){return ds.getBitsLength(this.data.length)};ds.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let s=ku.indexOf(this.data[r])*45;s+=ku.indexOf(this.data[r+1]),e.put(s,11)}this.data.length%2&&e.put(ku.indexOf(this.data[r]),6)};var a3=ds;const l3=Xr;function fs(t){this.mode=l3.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}fs.getBitsLength=function(e){return e*8};fs.prototype.getLength=function(){return this.data.length};fs.prototype.getBitsLength=function(){return fs.getBitsLength(this.data.length)};fs.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var u3=fs;const c3=Xr,h3=gn;function gs(t){this.mode=c3.KANJI,this.data=t}gs.getBitsLength=function(e){return e*13};gs.prototype.getLength=function(){return this.data.length};gs.prototype.getBitsLength=function(){return gs.getBitsLength(this.data.length)};gs.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=h3.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var d3=gs,n2={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,s,l){var c={},f={};f[s]=0;var p=e.PriorityQueue.make();p.push(s,0);for(var m,x,E,_,T,O,P,L,$;!p.empty();){m=p.pop(),x=m.value,_=m.cost,T=r[x]||{};for(E in T)T.hasOwnProperty(E)&&(O=T[E],P=_+O,L=f[E],$=typeof f[E]>"u",($||L>P)&&(f[E]=P,p.push(E,P),c[E]=x))}if(typeof l<"u"&&typeof f[l]>"u"){var R=["Could not find a path from ",s," to ",l,"."].join("");throw new Error(R)}return c},extract_shortest_path_from_predecessor_list:function(r,s){for(var l=[],c=s;c;)l.push(c),r[c],c=r[c];return l.reverse(),l},find_path:function(r,s,l){var c=e.single_source_shortest_paths(r,s,l);return e.extract_shortest_path_from_predecessor_list(c,l)},PriorityQueue:{make:function(r){var s=e.PriorityQueue,l={},c;r=r||{};for(c in s)s.hasOwnProperty(c)&&(l[c]=s[c]);return l.queue=[],l.sorter=r.sorter||s.default_sorter,l},default_sorter:function(r,s){return r.cost-s.cost},push:function(r,s){var l={value:r,cost:s};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(n2);var f3=n2.exports;(function(t){const e=Xr,r=s3,s=a3,l=u3,c=d3,f=Qn,p=gn,m=f3;function x(R){return unescape(encodeURIComponent(R)).length}function E(R,I,S){const D=[];let G;for(;(G=R.exec(S))!==null;)D.push({data:G[0],index:G.index,mode:I,length:G[0].length});return D}function _(R){const I=E(f.NUMERIC,e.NUMERIC,R),S=E(f.ALPHANUMERIC,e.ALPHANUMERIC,R);let D,G;return p.isKanjiModeEnabled()?(D=E(f.BYTE,e.BYTE,R),G=E(f.KANJI,e.KANJI,R)):(D=E(f.BYTE_KANJI,e.BYTE,R),G=[]),I.concat(S,D,G).sort(function(B,Y){return B.index-Y.index}).map(function(B){return{data:B.data,mode:B.mode,length:B.length}})}function T(R,I){switch(I){case e.NUMERIC:return r.getBitsLength(R);case e.ALPHANUMERIC:return s.getBitsLength(R);case e.KANJI:return c.getBitsLength(R);case e.BYTE:return l.getBitsLength(R)}}function O(R){return R.reduce(function(I,S){const D=I.length-1>=0?I[I.length-1]:null;return D&&D.mode===S.mode?(I[I.length-1].data+=S.data,I):(I.push(S),I)},[])}function P(R){const I=[];for(let S=0;S<R.length;S++){const D=R[S];switch(D.mode){case e.NUMERIC:I.push([D,{data:D.data,mode:e.ALPHANUMERIC,length:D.length},{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.ALPHANUMERIC:I.push([D,{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.KANJI:I.push([D,{data:D.data,mode:e.BYTE,length:x(D.data)}]);break;case e.BYTE:I.push([{data:D.data,mode:e.BYTE,length:x(D.data)}])}}return I}function L(R,I){const S={},D={start:{}};let G=["start"];for(let V=0;V<R.length;V++){const B=R[V],Y=[];for(let X=0;X<B.length;X++){const ue=B[X],Re=""+V+X;Y.push(Re),S[Re]={node:ue,lastCount:0},D[Re]={};for(let ae=0;ae<G.length;ae++){const pe=G[ae];S[pe]&&S[pe].node.mode===ue.mode?(D[pe][Re]=T(S[pe].lastCount+ue.length,ue.mode)-T(S[pe].lastCount,ue.mode),S[pe].lastCount+=ue.length):(S[pe]&&(S[pe].lastCount=ue.length),D[pe][Re]=T(ue.length,ue.mode)+4+e.getCharCountIndicator(ue.mode,I))}}G=Y}for(let V=0;V<G.length;V++)D[G[V]].end=0;return{map:D,table:S}}function $(R,I){let S;const D=e.getBestModeForData(R);if(S=e.from(I,D),S!==e.BYTE&&S.bit<D.bit)throw new Error('"'+R+'" cannot be encoded with mode '+e.toString(S)+`.
 Suggested mode is: `+e.toString(D));switch(S===e.KANJI&&!p.isKanjiModeEnabled()&&(S=e.BYTE),S){case e.NUMERIC:return new r(R);case e.ALPHANUMERIC:return new s(R);case e.KANJI:return new c(R);case e.BYTE:return new l(R)}}t.fromArray=function(I){return I.reduce(function(S,D){return typeof D=="string"?S.push($(D,null)):D.data&&S.push($(D.data,D.mode)),S},[])},t.fromString=function(I,S){const D=_(I,p.isKanjiModeEnabled()),G=P(D),V=L(G,S),B=m.find_path(V.map,"start","end"),Y=[];for(let X=1;X<B.length-1;X++)Y.push(V.table[B[X]].node);return t.fromArray(O(Y))},t.rawSplit=function(I){return t.fromArray(_(I,p.isKanjiModeEnabled()))}})(t2);const Ol=gn,Du=Tl,g3=Ky,p3=Yy,w3=Xg,m3=$g,Vc=Kg,zc=Nl,x3=Zy,nl=Zg,y3=Jg,E3=Xr,Pu=t2;function v3(t,e){const r=t.size,s=m3.getPositions(e);for(let l=0;l<s.length;l++){const c=s[l][0],f=s[l][1];for(let p=-1;p<=7;p++)if(!(c+p<=-1||r<=c+p))for(let m=-1;m<=7;m++)f+m<=-1||r<=f+m||(p>=0&&p<=6&&(m===0||m===6)||m>=0&&m<=6&&(p===0||p===6)||p>=2&&p<=4&&m>=2&&m<=4?t.set(c+p,f+m,!0,!0):t.set(c+p,f+m,!1,!0))}}function C3(t){const e=t.size;for(let r=8;r<e-8;r++){const s=r%2===0;t.set(r,6,s,!0),t.set(6,r,s,!0)}}function _3(t,e){const r=w3.getPositions(e);for(let s=0;s<r.length;s++){const l=r[s][0],c=r[s][1];for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)f===-2||f===2||p===-2||p===2||f===0&&p===0?t.set(l+f,c+p,!0,!0):t.set(l+f,c+p,!1,!0)}}function A3(t,e){const r=t.size,s=nl.getEncodedBits(e);let l,c,f;for(let p=0;p<18;p++)l=Math.floor(p/3),c=p%3+r-8-3,f=(s>>p&1)===1,t.set(l,c,f,!0),t.set(c,l,f,!0)}function Mu(t,e,r){const s=t.size,l=y3.getEncodedBits(e,r);let c,f;for(c=0;c<15;c++)f=(l>>c&1)===1,c<6?t.set(c,8,f,!0):c<8?t.set(c+1,8,f,!0):t.set(s-15+c,8,f,!0),c<8?t.set(8,s-c-1,f,!0):c<9?t.set(8,15-c-1+1,f,!0):t.set(8,15-c-1,f,!0);t.set(s-8,8,1,!0)}function S3(t,e){const r=t.size;let s=-1,l=r-1,c=7,f=0;for(let p=r-1;p>0;p-=2)for(p===6&&p--;;){for(let m=0;m<2;m++)if(!t.isReserved(l,p-m)){let x=!1;f<e.length&&(x=(e[f]>>>c&1)===1),t.set(l,p-m,x),c--,c===-1&&(f++,c=7)}if(l+=s,l<0||r<=l){l-=s,s=-s;break}}}function I3(t,e,r){const s=new g3;r.forEach(function(m){s.put(m.mode.bit,4),s.put(m.getLength(),E3.getCharCountIndicator(m.mode,t)),m.write(s)});const l=Ol.getSymbolTotalCodewords(t),c=zc.getTotalCodewordsCount(t,e),f=(l-c)*8;for(s.getLengthInBits()+4<=f&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const p=(f-s.getLengthInBits())/8;for(let m=0;m<p;m++)s.put(m%2?17:236,8);return b3(s,t,e)}function b3(t,e,r){const s=Ol.getSymbolTotalCodewords(e),l=zc.getTotalCodewordsCount(e,r),c=s-l,f=zc.getBlocksCount(e,r),p=s%f,m=f-p,x=Math.floor(s/f),E=Math.floor(c/f),_=E+1,T=x-E,O=new x3(T);let P=0;const L=new Array(f),$=new Array(f);let R=0;const I=new Uint8Array(t.buffer);for(let B=0;B<f;B++){const Y=B<m?E:_;L[B]=I.slice(P,P+Y),$[B]=O.encode(L[B]),P+=Y,R=Math.max(R,Y)}const S=new Uint8Array(s);let D=0,G,V;for(G=0;G<R;G++)for(V=0;V<f;V++)G<L[V].length&&(S[D++]=L[V][G]);for(G=0;G<T;G++)for(V=0;V<f;V++)S[D++]=$[V][G];return S}function T3(t,e,r,s){let l;if(Array.isArray(t))l=Pu.fromArray(t);else if(typeof t=="string"){let x=e;if(!x){const E=Pu.rawSplit(t);x=nl.getBestVersionForData(E,r)}l=Pu.fromString(t,x||40)}else throw new Error("Invalid data");const c=nl.getBestVersionForData(l,r);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=c;else if(e<c)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+c+`.
`);const f=I3(e,r,l),p=Ol.getSymbolSize(e),m=new p3(p);return v3(m,e),C3(m),_3(m,e),Mu(m,r,0),e>=7&&A3(m,e),S3(m,f),isNaN(s)&&(s=Vc.getBestMask(m,Mu.bind(null,m,r))),Vc.applyMask(s,m),Mu(m,r,s),{modules:m,version:e,errorCorrectionLevel:r,maskPattern:s,segments:l}}Wg.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let s=Du.M,l,c;return typeof r<"u"&&(s=Du.from(r.errorCorrectionLevel,Du.M),l=nl.from(r.version),c=Vc.from(r.maskPattern),r.toSJISFunc&&Ol.setToSJISFunction(r.toSJISFunc)),T3(e,l,s,c)};var r2={},K0={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let s=r.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+r);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(c){return[c,c]}))),s.length===6&&s.push("F","F");const l=parseInt(s.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+s.slice(0,6).join("")}}t.getOptions=function(s){s||(s={}),s.color||(s.color={});const l=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,c=s.width&&s.width>=21?s.width:void 0,f=s.scale||4;return{width:c,scale:c?4:f,margin:l,color:{dark:e(s.color.dark||"#000000ff"),light:e(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},t.getScale=function(s,l){return l.width&&l.width>=s+l.margin*2?l.width/(s+l.margin*2):l.scale},t.getImageWidth=function(s,l){const c=t.getScale(s,l);return Math.floor((s+l.margin*2)*c)},t.qrToImageData=function(s,l,c){const f=l.modules.size,p=l.modules.data,m=t.getScale(f,c),x=Math.floor((f+c.margin*2)*m),E=c.margin*m,_=[c.color.light,c.color.dark];for(let T=0;T<x;T++)for(let O=0;O<x;O++){let P=(T*x+O)*4,L=c.color.light;if(T>=E&&O>=E&&T<x-E&&O<x-E){const $=Math.floor((T-E)/m),R=Math.floor((O-E)/m);L=_[p[$*f+R]?1:0]}s[P++]=L.r,s[P++]=L.g,s[P++]=L.b,s[P]=L.a}}})(K0);(function(t){const e=K0;function r(l,c,f){l.clearRect(0,0,c.width,c.height),c.style||(c.style={}),c.height=f,c.width=f,c.style.height=f+"px",c.style.width=f+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(c,f,p){let m=p,x=f;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),f||(x=s()),m=e.getOptions(m);const E=e.getImageWidth(c.modules.size,m),_=x.getContext("2d"),T=_.createImageData(E,E);return e.qrToImageData(T.data,c,m),r(_,x,E),_.putImageData(T,0,0),x},t.renderToDataURL=function(c,f,p){let m=p;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),m||(m={});const x=t.render(c,f,m),E=m.type||"image/png",_=m.rendererOpts||{};return x.toDataURL(E,_.quality)}})(r2);var i2={};const N3=K0;function $d(t,e){const r=t.a/255,s=e+'="'+t.hex+'"';return r<1?s+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':s}function Bu(t,e,r){let s=t+e;return typeof r<"u"&&(s+=" "+r),s}function R3(t,e,r){let s="",l=0,c=!1,f=0;for(let p=0;p<t.length;p++){const m=Math.floor(p%e),x=Math.floor(p/e);!m&&!c&&(c=!0),t[p]?(f++,p>0&&m>0&&t[p-1]||(s+=c?Bu("M",m+r,.5+x+r):Bu("m",l,0),l=0,c=!1),m+1<e&&t[p+1]||(s+=Bu("h",f),f=0)):l++}return s}i2.render=function(e,r,s){const l=N3.getOptions(r),c=e.modules.size,f=e.modules.data,p=c+l.margin*2,m=l.color.light.a?"<path "+$d(l.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",x="<path "+$d(l.color.dark,"stroke")+' d="'+R3(f,c,l.margin)+'"/>',E='viewBox="0 0 '+p+" "+p+'"',T='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+E+' shape-rendering="crispEdges">'+m+x+`</svg>
`;return typeof s=="function"&&s(null,T),T};const O3=Xy,Hc=Wg,s2=r2,k3=i2;function Y0(t,e,r,s,l){const c=[].slice.call(arguments,1),f=c.length,p=typeof c[f-1]=="function";if(!p&&!O3())throw new Error("Callback required as last argument");if(p){if(f<2)throw new Error("Too few arguments provided");f===2?(l=r,r=e,e=s=void 0):f===3&&(e.getContext&&typeof l>"u"?(l=s,s=void 0):(l=s,s=r,r=e,e=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(r=e,e=s=void 0):f===2&&!e.getContext&&(s=r,r=e,e=void 0),new Promise(function(m,x){try{const E=Hc.create(r,s);m(t(E,e,s))}catch(E){x(E)}})}try{const m=Hc.create(r,s);l(null,t(m,e,s))}catch(m){l(m)}}yi.create=Hc.create;yi.toCanvas=Y0.bind(null,s2.render);yi.toDataURL=Y0.bind(null,s2.renderToDataURL);yi.toString=Y0.bind(null,function(t,e,r){return k3.render(t,r)});function D3({attendee:t}){const e=Ie.useRef(null);Ie.useEffect(()=>{e.current&&yi.toCanvas(e.current,t.qr_code,{width:200,margin:2})},[t.qr_code]);const r=()=>{if(e.current){const s=e.current.toDataURL("image/png"),l=document.createElement("a");l.href=s,l.download=`qr-${t.name.replace(/\s+/g,"-")}.png`,l.click()}};return F.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[F.jsx("canvas",{ref:e,className:"mx-auto mb-3"}),F.jsxs("div",{className:"text-center space-y-1",children:[F.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),F.jsxs("p",{className:"text-sm text-gray-600",children:["Gate: ",t.entry_gate]}),F.jsxs("p",{className:"text-sm text-gray-600",children:["Seat: ",t.seating_position]}),F.jsx("p",{className:"text-xs text-gray-400 font-mono",children:t.qr_code})]}),F.jsxs("button",{onClick:r,className:"mt-3 w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[F.jsx(bl,{className:"w-4 h-4"}),"Download QR"]})]})}function P3({attendees:t}){const[e,r]=Ie.useState(!0),s=async()=>{for(const l of t){const c=document.createElement("canvas");await yi.toCanvas(c,l.qr_code,{width:400,margin:2});const f=c.toDataURL("image/png"),p=document.createElement("a");p.href=f,p.download=`qr-${l.name.replace(/\s+/g,"-")}.png`,p.click(),await new Promise(m=>setTimeout(m,100))}};return F.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[F.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[F.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Generated QR Codes (",t.length,")"]}),F.jsx("button",{onClick:()=>r(!e),className:"text-gray-500 hover:text-gray-700",children:e?F.jsx(Fy,{className:"w-5 h-5"}):F.jsx(Ly,{className:"w-5 h-5"})})]}),t.length>0&&F.jsxs("button",{onClick:s,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[F.jsx(bl,{className:"w-4 h-4"}),"Download All"]})]}),e&&F.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(l=>F.jsx(D3,{attendee:l},l.id))})]})}function M3(){const[t,e]=Ie.useState(null),[r,s]=Ie.useState(!1),[l,c]=Ie.useState(""),[f,p]=Ie.useState(""),[m,x]=Ie.useState([]),{user:E}=Do(),_=()=>`QR-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,T=$=>{const R=$.split(`
`).filter(V=>V.trim()),I=R[0].toLowerCase().split(",").map(V=>V.trim()),S=I.findIndex(V=>V.includes("name")),D=I.findIndex(V=>V.includes("entry")||V.includes("gate")),G=I.findIndex(V=>V.includes("seat"));if(S===-1||D===-1||G===-1)throw new Error("CSV must contain columns: name, entry_gate, seating_position");return R.slice(1).map(V=>{const B=V.split(",").map(Y=>Y.trim());return{name:B[S],entry_gate:B[D],seating_position:B[G]}}).filter(V=>V.name)},O=$=>{var I;const R=(I=$.target.files)==null?void 0:I[0];R&&R.type==="text/csv"?(e(R),c("")):(c("Please select a valid CSV file"),e(null))},P=async()=>{if(!(!t||!E)){s(!0),c(""),p("");try{const $=await t.text(),I=T($).map(G=>({...G,qr_code:_(),created_by:E.id})),{data:S,error:D}=await Mn.from("attendees").insert(I).select();if(D)throw D;x(S||[]),p(`Successfully uploaded ${(S==null?void 0:S.length)||0} attendees with QR codes!`),e(null)}catch($){c($ instanceof Error?$.message:"Failed to upload CSV")}finally{s(!1)}}},L=()=>{const $=`name,entry_gate,seating_position
John Doe,Gate A,A-101
Jane Smith,Gate B,B-205`,R=new Blob([$],{type:"text/csv"}),I=window.URL.createObjectURL(R),S=document.createElement("a");S.href=I,S.download="sample_attendees.csv",S.click(),window.URL.revokeObjectURL(I)};return F.jsxs("div",{className:"space-y-6",children:[F.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[F.jsxs("div",{className:"flex items-center justify-between mb-6",children:[F.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Upload Attendees"}),F.jsxs("button",{onClick:L,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700",children:[F.jsx(bl,{className:"w-4 h-4"}),"Download Sample CSV"]})]}),l&&F.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm flex items-center justify-between",children:[F.jsx("span",{children:l}),F.jsx("button",{onClick:()=>c(""),children:F.jsx(Wd,{className:"w-4 h-4"})})]}),f&&F.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm flex items-center justify-between",children:[F.jsx("span",{children:f}),F.jsx("button",{onClick:()=>p(""),children:F.jsx(Wd,{className:"w-4 h-4"})})]}),F.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[F.jsx(Hg,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),F.jsx("input",{type:"file",accept:".csv",onChange:O,className:"hidden",id:"csv-upload"}),F.jsx("label",{htmlFor:"csv-upload",className:"cursor-pointer text-blue-600 hover:text-blue-700 font-medium",children:"Choose CSV file"}),F.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"CSV should contain: name, entry_gate, seating_position"}),t&&F.jsxs("p",{className:"text-sm text-gray-700 mt-3 font-medium",children:["Selected: ",t.name]})]}),t&&F.jsx("button",{onClick:P,disabled:r,className:"mt-4 w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?"Uploading...":"Upload and Generate QR Codes"})]}),m.length>0&&F.jsx(P3,{attendees:m})]})}var re;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(re||(re={}));var Kd=new Map([[re.QR_CODE,"QR_CODE"],[re.AZTEC,"AZTEC"],[re.CODABAR,"CODABAR"],[re.CODE_39,"CODE_39"],[re.CODE_93,"CODE_93"],[re.CODE_128,"CODE_128"],[re.DATA_MATRIX,"DATA_MATRIX"],[re.MAXICODE,"MAXICODE"],[re.ITF,"ITF"],[re.EAN_13,"EAN_13"],[re.EAN_8,"EAN_8"],[re.PDF_417,"PDF_417"],[re.RSS_14,"RSS_14"],[re.RSS_EXPANDED,"RSS_EXPANDED"],[re.UPC_A,"UPC_A"],[re.UPC_E,"UPC_E"],[re.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Yd;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Yd||(Yd={}));function B3(t){return Object.values(re).includes(t)}var rl;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(rl||(rl={}));var L3=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[rl.SCAN_TYPE_CAMERA,rl.SCAN_TYPE_FILE],t}(),o2=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Kd.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Kd.get(e))},t}(),qd=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Wc;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Wc||(Wc={}));var F3=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Wc.UNKWOWN_ERROR}},t}(),U3=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function tr(t){return typeof t>"u"||t===null}var qi=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),a2=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var s=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(l),f=Object.keys(e),p=0,m=f;p<m.length;p++){var x=m[p];if(c.has(x))return r.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},t}(),Gc={exports:{}};(function(t,e){(function(r,s){s(e)})(Rt,function(r){function s(v){return v==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,n){v.__proto__=n}||function(v,n){for(var i in n)n.hasOwnProperty(i)&&(v[i]=n[i])};function c(v,n){l(v,n);function i(){this.constructor=v}v.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function f(v,n){var i=Object.setPrototypeOf;i?i(v,n):v.__proto__=n}function p(v,n){n===void 0&&(n=v.constructor);var i=Error.captureStackTrace;i&&i(v,n)}var m=function(v){c(n,v);function n(i){var o=this.constructor,a=v.call(this,i)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1}),f(a,o.prototype),p(a),a}return n}(Error);class x extends m{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}x.kind="Exception";class E extends x{}E.kind="ArgumentException";class _ extends x{}_.kind="IllegalArgumentException";class T{constructor(n){if(this.binarizer=n,n===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,o,a){const u=this.binarizer.getLuminanceSource().crop(n,i,o,a);return new T(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends x{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class P{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class L{static arraycopy(n,i,o,a,u){for(;u--;)o[a++]=n[i++]}static currentTimeMillis(){return Date.now()}}class $ extends x{}$.kind="IndexOutOfBoundsException";class R extends ${constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}R.kind="ArrayIndexOutOfBoundsException";class I{static fill(n,i){for(let o=0,a=n.length;o<a;o++)n[o]=i}static fillWithin(n,i,o,a){I.rangeCheck(n.length,i,o);for(let u=i;u<o;u++)n[u]=a}static rangeCheck(n,i,o){if(i>o)throw new _("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new R(i);if(o>n)throw new R(o)}static asList(...n){return n}static create(n,i,o){return Array.from({length:n}).map(u=>Array.from({length:i}).fill(o))}static createInt32Array(n,i,o){return Array.from({length:n}).map(u=>Int32Array.from({length:i}).fill(o))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let o=0,a=n.length;o<a;o++)if(n[o]!==i[o])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const o of n)i=31*i+o;return i}static fillUint8Array(n,i){for(let o=0;o!==n.length;o++)n[o]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const o=new Uint8Array(i);return o.set(n),o}return n.slice(0,i)}static copyOfRange(n,i,o){const a=o-i,u=new Int32Array(a);return L.arraycopy(n,i,u,0,a),u}static binarySearch(n,i,o){o===void 0&&(o=I.numberComparator);let a=0,u=n.length-1;for(;a<=u;){const h=u+a>>1,d=o(i,n[h]);if(d>0)a=h+1;else if(d<0)u=h-1;else return h}return-a-1}static numberComparator(n,i){return n-i}}class S{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let o=31;return i=n<<16,i!==0&&(o-=16,n=i),i=n<<8,i!==0&&(o-=8,n=i),i=n<<4,i!==0&&(o-=4,n=i),i=n<<2,i!==0&&(o-=2,n=i),o-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}S.MIN_VALUE_32_BITS=-2147483648,S.MAX_VALUE=Number.MAX_SAFE_INTEGER;class D{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=D.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=D.makeArray(n);L.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const o=this.bits;let a=Math.floor(n/32),u=o[a];u&=~((1<<(n&31))-1);const h=o.length;for(;u===0;){if(++a===h)return i;u=o[a]}const d=a*32+S.numberOfTrailingZeros(u);return d>i?i:d}getNextUnset(n){const i=this.size;if(n>=i)return i;const o=this.bits;let a=Math.floor(n/32),u=~o[a];u&=~((1<<(n&31))-1);const h=o.length;for(;u===0;){if(++a===h)return i;u=~o[a]}const d=a*32+S.numberOfTrailingZeros(u);return d>i?i:d}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new _;if(i===n)return;i--;const o=Math.floor(n/32),a=Math.floor(i/32),u=this.bits;for(let h=o;h<=a;h++){const d=h>o?0:n&31,w=(2<<(h<a?31:i&31))-(1<<d);u[h]|=w}}clear(){const n=this.bits.length,i=this.bits;for(let o=0;o<n;o++)i[o]=0}isRange(n,i,o){if(i<n||n<0||i>this.size)throw new _;if(i===n)return!0;i--;const a=Math.floor(n/32),u=Math.floor(i/32),h=this.bits;for(let d=a;d<=u;d++){const g=d>a?0:n&31,y=(2<<(d<u?31:i&31))-(1<<g)&4294967295;if((h[d]&y)!==(o?y:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((n>>o-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(n.get(o))}xor(n){if(this.size!==n.size)throw new _("Sizes don't match");const i=this.bits;for(let o=0,a=i.length;o<a;o++)i[o]^=n.bits[o]}toBytes(n,i,o,a){for(let u=0;u<a;u++){let h=0;for(let d=0;d<8;d++)this.get(n)&&(h|=1<<7-d),n++;i[o+u]=h}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,a=this.bits;for(let u=0;u<o;u++){let h=a[u];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,n[i-u]=h}if(this.size!==o*32){const u=o*32-this.size;let h=n[0]>>>u;for(let d=1;d<o;d++){const g=n[d];h|=g<<32-u,n[d-1]=h,h=g>>>u}n[o-1]=h}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof D))return!1;const i=n;return this.size===i.size&&I.equals(this.bits,i.bits)}hashCode(){return 31*this.size+I.hashCode(this.bits)}toString(){let n="";for(let i=0,o=this.size;i<o;i++)i&7||(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new D(this.size,this.bits.slice())}}var G;(function(v){v[v.OTHER=0]="OTHER",v[v.PURE_BARCODE=1]="PURE_BARCODE",v[v.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",v[v.TRY_HARDER=3]="TRY_HARDER",v[v.CHARACTER_SET=4]="CHARACTER_SET",v[v.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",v[v.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",v[v.ASSUME_GS1=7]="ASSUME_GS1",v[v.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",v[v.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",v[v.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(G||(G={}));var V=G;class B extends x{static getFormatInstance(){return new B}}B.kind="FormatException";var Y;(function(v){v[v.Cp437=0]="Cp437",v[v.ISO8859_1=1]="ISO8859_1",v[v.ISO8859_2=2]="ISO8859_2",v[v.ISO8859_3=3]="ISO8859_3",v[v.ISO8859_4=4]="ISO8859_4",v[v.ISO8859_5=5]="ISO8859_5",v[v.ISO8859_6=6]="ISO8859_6",v[v.ISO8859_7=7]="ISO8859_7",v[v.ISO8859_8=8]="ISO8859_8",v[v.ISO8859_9=9]="ISO8859_9",v[v.ISO8859_10=10]="ISO8859_10",v[v.ISO8859_11=11]="ISO8859_11",v[v.ISO8859_13=12]="ISO8859_13",v[v.ISO8859_14=13]="ISO8859_14",v[v.ISO8859_15=14]="ISO8859_15",v[v.ISO8859_16=15]="ISO8859_16",v[v.SJIS=16]="SJIS",v[v.Cp1250=17]="Cp1250",v[v.Cp1251=18]="Cp1251",v[v.Cp1252=19]="Cp1252",v[v.Cp1256=20]="Cp1256",v[v.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",v[v.UTF8=22]="UTF8",v[v.ASCII=23]="ASCII",v[v.Big5=24]="Big5",v[v.GB18030=25]="GB18030",v[v.EUC_KR=26]="EUC_KR"})(Y||(Y={}));class X{constructor(n,i,o,...a){this.valueIdentifier=n,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=a,X.VALUE_IDENTIFIER_TO_ECI.set(n,this),X.NAME_TO_ECI.set(o,this);const u=this.values;for(let h=0,d=u.length;h!==d;h++){const g=u[h];X.VALUES_TO_ECI.set(g,this)}for(const h of a)X.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new B("incorect value");const i=X.VALUES_TO_ECI.get(n);if(i===void 0)throw new B("incorect value");return i}static getCharacterSetECIByName(n){const i=X.NAME_TO_ECI.get(n);if(i===void 0)throw new B("incorect value");return i}equals(n){if(!(n instanceof X))return!1;const i=n;return this.getName()===i.getName()}}X.VALUE_IDENTIFIER_TO_ECI=new Map,X.VALUES_TO_ECI=new Map,X.NAME_TO_ECI=new Map,X.Cp437=new X(Y.Cp437,Int32Array.from([0,2]),"Cp437"),X.ISO8859_1=new X(Y.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),X.ISO8859_2=new X(Y.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),X.ISO8859_3=new X(Y.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),X.ISO8859_4=new X(Y.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),X.ISO8859_5=new X(Y.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),X.ISO8859_6=new X(Y.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),X.ISO8859_7=new X(Y.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),X.ISO8859_8=new X(Y.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),X.ISO8859_9=new X(Y.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),X.ISO8859_10=new X(Y.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),X.ISO8859_11=new X(Y.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),X.ISO8859_13=new X(Y.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),X.ISO8859_14=new X(Y.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),X.ISO8859_15=new X(Y.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),X.ISO8859_16=new X(Y.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),X.SJIS=new X(Y.SJIS,20,"SJIS","Shift_JIS"),X.Cp1250=new X(Y.Cp1250,21,"Cp1250","windows-1250"),X.Cp1251=new X(Y.Cp1251,22,"Cp1251","windows-1251"),X.Cp1252=new X(Y.Cp1252,23,"Cp1252","windows-1252"),X.Cp1256=new X(Y.Cp1256,24,"Cp1256","windows-1256"),X.UnicodeBigUnmarked=new X(Y.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),X.UTF8=new X(Y.UTF8,26,"UTF8","UTF-8"),X.ASCII=new X(Y.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),X.Big5=new X(Y.Big5,28,"Big5"),X.GB18030=new X(Y.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),X.EUC_KR=new X(Y.EUC_KR,30,"EUC_KR","EUC-KR");class ue extends x{}ue.kind="UnsupportedOperationException";class Re{static decode(n,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(n,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(n,o):new TextDecoder(o).decode(n)}static shouldDecodeOnFallback(n){return!Re.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(n,o):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof X?n:X.getCharacterSetECIByName(n)}static decodeFallback(n,i){const o=this.encodingCharacterSet(i);if(Re.isDecodeFallbackSupported(o)){let a="";for(let u=0,h=n.length;u<h;u++){let d=n[u].toString(16);d.length<2&&(d="0"+d),a+="%"+d}return decodeURIComponent(a)}if(o.equals(X.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new ue(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(X.UTF8)||n.equals(X.ISO8859_1)||n.equals(X.ASCII)}static encodeFallback(n){const o=btoa(unescape(encodeURIComponent(n))).split(""),a=[];for(let u=0;u<o.length;u++)a.push(o[u].charCodeAt(0));return new Uint8Array(a)}}class ae{static castAsNonUtf8Char(n,i=null){const o=i?i.getName():this.ISO88591;return Re.decode(new Uint8Array([n]),o)}static guessEncoding(n,i){if(i!=null&&i.get(V.CHARACTER_SET)!==void 0)return i.get(V.CHARACTER_SET).toString();const o=n.length;let a=!0,u=!0,h=!0,d=0,g=0,w=0,y=0,C=0,A=0,N=0,k=0,M=0,U=0,H=0;const Q=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let J=0;J<o&&(a||u||h);J++){const q=n[J]&255;h&&(d>0?q&128?d--:h=!1:q&128&&(q&64?(d++,q&32?(d++,q&16?(d++,q&8?h=!1:y++):w++):g++):h=!1)),a&&(q>127&&q<160?a=!1:q>159&&(q<192||q===215||q===247)&&H++),u&&(C>0?q<64||q===127||q>252?u=!1:C--:q===128||q===160||q>239?u=!1:q>160&&q<224?(A++,k=0,N++,N>M&&(M=N)):q>127?(C++,N=0,k++,k>U&&(U=k)):(N=0,k=0))}return h&&d>0&&(h=!1),u&&C>0&&(u=!1),h&&(Q||g+w+y>0)?ae.UTF8:u&&(ae.ASSUME_SHIFT_JIS||M>=3||U>=3)?ae.SHIFT_JIS:a&&u?M===2&&A===2||H*10>=o?ae.SHIFT_JIS:ae.ISO88591:a?ae.ISO88591:u?ae.SHIFT_JIS:h?ae.UTF8:ae.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let o=-1;function a(h,d,g,w,y,C){if(h==="%%")return"%";if(i[++o]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let A=y?parseInt(y.substr(1)):void 0,N;switch(C){case"s":N=i[o];break;case"c":N=i[o][0];break;case"f":N=parseFloat(i[o]).toFixed(h);break;case"p":N=parseFloat(i[o]).toPrecision(h);break;case"e":N=parseFloat(i[o]).toExponential(h);break;case"x":N=parseInt(i[o]).toString(A||16);break;case"d":N=parseFloat(parseInt(i[o],A||10).toPrecision(h)).toFixed(0);break}N=typeof N=="object"?JSON.stringify(N):(+N).toString(A);let k=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;N.length<k;)N=d!==void 0?N+M:M+N;return N}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(u,a)}static getBytes(n,i){return Re.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}ae.SHIFT_JIS=X.SJIS.getName(),ae.GB2312="GB2312",ae.ISO88591=X.ISO8859_1.getName(),ae.EUC_JP="EUC_JP",ae.UTF8=X.UTF8.getName(),ae.PLATFORM_DEFAULT_ENCODING=ae.UTF8,ae.ASSUME_SHIFT_JIS=!1;class pe{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=ae.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,o){for(let a=i;i<i+o;a++)this.append(n[a]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class lt{constructor(n,i,o,a){if(this.width=n,this.height=i,this.rowSize=o,this.bits=a,i==null&&(i=n),this.height=i,n<1||i<1)throw new _("Both dimensions must be greater than 0");o==null&&(o=Math.floor((n+31)/32)),this.rowSize=o,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,o=n[0].length,a=new lt(o,i);for(let u=0;u<i;u++){const h=n[u];for(let d=0;d<o;d++)h[d]&&a.set(d,u)}return a}static parseFromString(n,i,o){if(n===null)throw new _("stringRepresentation cannot be null");const a=new Array(n.length);let u=0,h=0,d=-1,g=0,w=0;for(;w<n.length;)if(n.charAt(w)===`
`||n.charAt(w)==="\r"){if(u>h){if(d===-1)d=u-h;else if(u-h!==d)throw new _("row lengths do not match");h=u,g++}w++}else if(n.substring(w,w+i.length)===i)w+=i.length,a[u]=!0,u++;else if(n.substring(w,w+o.length)===o)w+=o.length,a[u]=!1,u++;else throw new _("illegal character encountered: "+n.substring(w));if(u>h){if(d===-1)d=u-h;else if(u-h!==d)throw new _("row lengths do not match");g++}const y=new lt(d,g);for(let C=0;C<u;C++)a[C]&&y.set(Math.floor(C%d),Math.floor(C/d));return y}get(n,i){const o=i*this.rowSize+Math.floor(n/32);return(this.bits[o]>>>(n&31)&1)!==0}set(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]|=1<<(n&31)&4294967295}unset(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]&=~(1<<(n&31)&4294967295)}flip(n,i){const o=i*this.rowSize+Math.floor(n/32);this.bits[o]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new _("input matrix dimensions do not match");const i=new D(Math.floor(this.width/32)+1),o=this.rowSize,a=this.bits;for(let u=0,h=this.height;u<h;u++){const d=u*o,g=n.getRow(u,i).getBitArray();for(let w=0;w<o;w++)a[d+w]^=g[w]}}clear(){const n=this.bits,i=n.length;for(let o=0;o<i;o++)n[o]=0}setRegion(n,i,o,a){if(i<0||n<0)throw new _("Left and top must be nonnegative");if(a<1||o<1)throw new _("Height and width must be at least 1");const u=n+o,h=i+a;if(h>this.height||u>this.width)throw new _("The region must fit inside the matrix");const d=this.rowSize,g=this.bits;for(let w=i;w<h;w++){const y=w*d;for(let C=n;C<u;C++)g[y+Math.floor(C/32)]|=1<<(C&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new D(this.width):i.clear();const o=this.rowSize,a=this.bits,u=n*o;for(let h=0;h<o;h++)i.setBulk(h*32,a[u+h]);return i}setRow(n,i){L.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let o=new D(n),a=new D(n);for(let u=0,h=Math.floor((i+1)/2);u<h;u++)o=this.getRow(u,o),a=this.getRow(i-1-u,a),o.reverse(),a.reverse(),this.setRow(u,a),this.setRow(i-1-u,o)}getEnclosingRectangle(){const n=this.width,i=this.height,o=this.rowSize,a=this.bits;let u=n,h=i,d=-1,g=-1;for(let w=0;w<i;w++)for(let y=0;y<o;y++){const C=a[w*o+y];if(C!==0){if(w<h&&(h=w),w>g&&(g=w),y*32<u){let A=0;for(;!(C<<31-A&4294967295);)A++;y*32+A<u&&(u=y*32+A)}if(y*32+31>d){let A=31;for(;!(C>>>A);)A--;y*32+A>d&&(d=y*32+A)}}}return d<u||g<h?null:Int32Array.from([u,h,d-u+1,g-h+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const a=o/n;let u=o%n*32;const h=i[o];let d=0;for(;!(h<<31-d&4294967295);)d++;return u+=d,Int32Array.from([u,a])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const a=Math.floor(o/n);let u=Math.floor(o%n)*32;const h=i[o];let d=31;for(;!(h>>>d);)d--;return u+=d,Int32Array.from([u,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof lt))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&I.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+I.hashCode(this.bits),n}toString(n="X ",i="  ",o=`
`){return this.buildToString(n,i,o)}buildToString(n,i,o){let a=new pe;for(let u=0,h=this.height;u<h;u++){for(let d=0,g=this.width;d<g;d++)a.append(this.get(d,u)?n:i);a.append(o)}return a.toString()}clone(){return new lt(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends x{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class nt extends P{constructor(n){super(n),this.luminances=nt.EMPTY,this.buckets=new Int32Array(nt.LUMINANCE_BUCKETS)}getBlackRow(n,i){const o=this.getLuminanceSource(),a=o.getWidth();i==null||i.getSize()<a?i=new D(a):i.clear(),this.initArrays(a);const u=o.getRow(n,this.luminances),h=this.buckets;for(let g=0;g<a;g++)h[(u[g]&255)>>nt.LUMINANCE_SHIFT]++;const d=nt.estimateBlackPoint(h);if(a<3)for(let g=0;g<a;g++)(u[g]&255)<d&&i.set(g);else{let g=u[0]&255,w=u[1]&255;for(let y=1;y<a-1;y++){const C=u[y+1]&255;(w*4-g-C)/2<d&&i.set(y),g=w,w=C}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight(),a=new lt(i,o);this.initArrays(i);const u=this.buckets;for(let g=1;g<5;g++){const w=Math.floor(o*g/5),y=n.getRow(w,this.luminances),C=Math.floor(i*4/5);for(let A=Math.floor(i/5);A<C;A++){const N=y[A]&255;u[N>>nt.LUMINANCE_SHIFT]++}}const h=nt.estimateBlackPoint(u),d=n.getMatrix();for(let g=0;g<o;g++){const w=g*i;for(let y=0;y<i;y++)(d[w+y]&255)<h&&a.set(y,g)}return a}createBinarizer(n){return new nt(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let o=0;o<nt.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(n){const i=n.length;let o=0,a=0,u=0;for(let y=0;y<i;y++)n[y]>u&&(a=y,u=n[y]),n[y]>o&&(o=n[y]);let h=0,d=0;for(let y=0;y<i;y++){const C=y-a,A=n[y]*C*C;A>d&&(h=y,d=A)}if(a>h){const y=a;a=h,h=y}if(h-a<=i/16)throw new W;let g=h-1,w=-1;for(let y=h-1;y>a;y--){const C=y-a,A=C*C*(h-y)*(o-n[y]);A>w&&(g=y,w=A)}return g<<nt.LUMINANCE_SHIFT}}nt.LUMINANCE_BITS=5,nt.LUMINANCE_SHIFT=8-nt.LUMINANCE_BITS,nt.LUMINANCE_BUCKETS=1<<nt.LUMINANCE_BITS,nt.EMPTY=Uint8ClampedArray.from([0]);class we extends nt{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),o=n.getHeight();if(i>=we.MINIMUM_DIMENSION&&o>=we.MINIMUM_DIMENSION){const a=n.getMatrix();let u=i>>we.BLOCK_SIZE_POWER;i&we.BLOCK_SIZE_MASK&&u++;let h=o>>we.BLOCK_SIZE_POWER;o&we.BLOCK_SIZE_MASK&&h++;const d=we.calculateBlackPoints(a,u,h,i,o),g=new lt(i,o);we.calculateThresholdForBlock(a,u,h,i,o,d,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new we(n)}static calculateThresholdForBlock(n,i,o,a,u,h,d){const g=u-we.BLOCK_SIZE,w=a-we.BLOCK_SIZE;for(let y=0;y<o;y++){let C=y<<we.BLOCK_SIZE_POWER;C>g&&(C=g);const A=we.cap(y,2,o-3);for(let N=0;N<i;N++){let k=N<<we.BLOCK_SIZE_POWER;k>w&&(k=w);const M=we.cap(N,2,i-3);let U=0;for(let Q=-2;Q<=2;Q++){const J=h[A+Q];U+=J[M-2]+J[M-1]+J[M]+J[M+1]+J[M+2]}const H=U/25;we.thresholdBlock(n,k,C,H,a,d)}}}static cap(n,i,o){return n<i?i:n>o?o:n}static thresholdBlock(n,i,o,a,u,h){for(let d=0,g=o*u+i;d<we.BLOCK_SIZE;d++,g+=u)for(let w=0;w<we.BLOCK_SIZE;w++)(n[g+w]&255)<=a&&h.set(i+w,o+d)}static calculateBlackPoints(n,i,o,a,u){const h=u-we.BLOCK_SIZE,d=a-we.BLOCK_SIZE,g=new Array(o);for(let w=0;w<o;w++){g[w]=new Int32Array(i);let y=w<<we.BLOCK_SIZE_POWER;y>h&&(y=h);for(let C=0;C<i;C++){let A=C<<we.BLOCK_SIZE_POWER;A>d&&(A=d);let N=0,k=255,M=0;for(let H=0,Q=y*a+A;H<we.BLOCK_SIZE;H++,Q+=a){for(let J=0;J<we.BLOCK_SIZE;J++){const q=n[Q+J]&255;N+=q,q<k&&(k=q),q>M&&(M=q)}if(M-k>we.MIN_DYNAMIC_RANGE)for(H++,Q+=a;H<we.BLOCK_SIZE;H++,Q+=a)for(let J=0;J<we.BLOCK_SIZE;J++)N+=n[Q+J]&255}let U=N>>we.BLOCK_SIZE_POWER*2;if(M-k<=we.MIN_DYNAMIC_RANGE&&(U=k/2,w>0&&C>0)){const H=(g[w-1][C]+2*g[w][C-1]+g[w-1][C-1])/4;k<H&&(U=H)}g[w][C]=U}}return g}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class te{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,o,a){throw new ue("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ue("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ue("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new pe;for(let o=0;o<this.height;o++){const a=this.getRow(o,n);for(let u=0;u<this.width;u++){const h=a[u]&255;let d;h<64?d="#":h<128?d="+":h<192?d=".":d=" ",i.append(d)}i.append(`
`)}return i.toString()}}class de extends te{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const o=this.delegate.getRow(n,i),a=this.getWidth();for(let u=0;u<a;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let a=0;a<i;a++)o[a]=255-(n[a]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,o,a){return new de(this.delegate.crop(n,i,o,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new de(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new de(this.delegate.rotateCounterClockwise45())}}class ge extends te{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=ge.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return ge.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,o){const a=new Uint8ClampedArray(i*o);for(let u=0,h=0,d=n.length;u<d;u+=4,h++){let g;if(n[u+3]===0)g=255;else{const y=n[u],C=n[u+1],A=n[u+2];g=306*y+601*C+117*A+512>>10}a[h]=g}return a}getRow(n,i){if(n<0||n>=this.getHeight())throw new _("Requested row is outside the image: "+n);const o=this.getWidth(),a=n*o;return i===null?i=this.buffer.slice(a,a+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(a,a+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,o,a){return super.crop(n,i,o,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),o=i.getContext("2d"),a=n*ge.DEGREE_TO_RADIANS,u=this.canvas.width,h=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(a))*u+Math.abs(Math.sin(a))*h),g=Math.ceil(Math.abs(Math.sin(a))*u+Math.abs(Math.cos(a))*h);return i.width=d,i.height=g,o.translate(d/2,g/2),o.rotate(a),o.drawImage(this.canvas,u/-2,h/-2),this.buffer=ge.makeBufferFromCanvasImageData(i),this}invert(){return new de(this)}}ge.DEGREE_TO_RADIANS=Math.PI/180;class Ke{constructor(n,i,o){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Se=(globalThis||Rt||self||window||void 0)&&(globalThis||Rt||self||window||void 0).__awaiter||function(v,n,i,o){function a(u){return u instanceof i?u:new i(function(h){h(u)})}return new(i||(i=Promise))(function(u,h){function d(y){try{w(o.next(y))}catch(C){h(C)}}function g(y){try{w(o.throw(y))}catch(C){h(C)}}function w(y){y.done?u(y.value):a(y.value).then(d,g)}w((o=o.apply(v,n||[])).next())})};class pn{constructor(n,i=500,o){this.reader=n,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return Se(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of n){const a=o.kind==="video"?"videoinput":o.kind;if(a!=="videoinput")continue;const u=o.deviceId||o.id,h=o.label||`Video device ${i.length+1}`,d=o.groupId,g={deviceId:u,label:h,kind:a,groupId:d};i.push(g)}return i})}getVideoInputDevices(){return Se(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new Ke(i.deviceId,i.label))})}findDeviceById(n){return Se(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return Se(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return Se(this,void 0,void 0,function*(){this.reset();let o;n?o={deviceId:{exact:n}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeOnceFromConstraints(a,i)})}decodeOnceFromConstraints(n,i){return Se(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(n,i){return Se(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(n,i,o){return Se(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,o)})}decodeFromVideoDevice(n,i,o){return Se(this,void 0,void 0,function*(){let a;n?a={deviceId:{exact:n}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeFromConstraints(u,i,o)})}decodeFromConstraints(n,i,o){return Se(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(a,i,o)})}decodeFromStream(n,i,o){return Se(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(a,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return Se(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,n),this.videoElement=o,this.stream=n,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(n){return new Promise((i,o)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return Se(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const o=document.getElementById(n);if(!o)throw new E(`element with id '${n}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new E(`element with id '${n}' must be an ${i} element`);return o}decodeFromImage(n,i){if(!n&&!i)throw new E("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new E("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,o){if(n===void 0&&i===void 0)throw new E("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(n,o)}decodeFromImageElement(n){if(!n)throw new E("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const o=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(n){if(!n)throw new E("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new E("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=n,o}decodeFromVideoUrl(n){if(!n)throw new E("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=n,o}decodeFromVideoUrlContinuously(n,i){if(!n)throw new E("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(o,i);return o.src=n,a}_decodeOnLoadImage(n){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,o),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return Se(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return Se(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,o=!0){this._stopAsyncDecode=!1;const a=(u,h)=>{if(this._stopAsyncDecode){h(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(n);u(d)}catch(d){const g=i&&d instanceof W,y=(d instanceof O||d instanceof B)&&o;if(g||y)return setTimeout(a,this._timeBetweenDecodingAttempts,u,h);h(d)}};return new Promise((u,h)=>a(u,h))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(n);i(a,null),setTimeout(o,this.timeBetweenScansMillis)}catch(a){i(null,a);const u=a instanceof O||a instanceof B,h=a instanceof W;(u||h)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,o){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),o=new ge(i),a=new we(o);return new T(a)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,a;return typeof n<"u"&&(n instanceof HTMLVideoElement?(o=n.videoWidth,a=n.videoHeight):n instanceof HTMLImageElement&&(o=n.naturalWidth||n.width,a=n.naturalHeight||n.height)),i.style.width=o+"px",i.style.height=a+"px",i.width=o,i.height=a,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Ze{constructor(n,i,o=i==null?0:8*i.length,a,u,h=L.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=o,this.resultPoints=a,this.format=u,this.timestamp=h,this.text=n,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=a,this.format=u,this.resultMetadata=null,h==null?this.timestamp=L.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const o=new Array(i.length+n.length);L.arraycopy(i,0,o,0,i.length),L.arraycopy(n,0,o,i.length,n.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $r;(function(v){v[v.AZTEC=0]="AZTEC",v[v.CODABAR=1]="CODABAR",v[v.CODE_39=2]="CODE_39",v[v.CODE_93=3]="CODE_93",v[v.CODE_128=4]="CODE_128",v[v.DATA_MATRIX=5]="DATA_MATRIX",v[v.EAN_8=6]="EAN_8",v[v.EAN_13=7]="EAN_13",v[v.ITF=8]="ITF",v[v.MAXICODE=9]="MAXICODE",v[v.PDF_417=10]="PDF_417",v[v.QR_CODE=11]="QR_CODE",v[v.RSS_14=12]="RSS_14",v[v.RSS_EXPANDED=13]="RSS_EXPANDED",v[v.UPC_A=14]="UPC_A",v[v.UPC_E=15]="UPC_E",v[v.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($r||($r={}));var oe=$r,fr;(function(v){v[v.OTHER=0]="OTHER",v[v.ORIENTATION=1]="ORIENTATION",v[v.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",v[v.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",v[v.ISSUE_NUMBER=4]="ISSUE_NUMBER",v[v.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",v[v.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",v[v.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",v[v.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",v[v.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",v[v.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(fr||(fr={}));var Et=fr;class Es{constructor(n,i,o,a,u=-1,h=-1){this.rawBytes=n,this.text=i,this.byteSegments=o,this.ecLevel=a,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=h,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class vs{exp(n){return this.expTable[n]}log(n){if(n===0)throw new _;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class $t{constructor(n,i){if(i.length===0)throw new _;this.field=n;const o=i.length;if(o>1&&i[0]===0){let a=1;for(;a<o&&i[a]===0;)a++;a===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-a),L.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(n===1){o=0;for(let h=0,d=i.length;h!==d;h++){const g=i[h];o=vs.addOrSubtract(o,g)}return o}o=i[0];const a=i.length,u=this.field;for(let h=1;h<a;h++)o=vs.addOrSubtract(u.multiply(n,o),i[h]);return o}addOrSubtract(n){if(!this.field.equals(n.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){const h=i;i=o,o=h}let a=new Int32Array(o.length);const u=o.length-i.length;L.arraycopy(o,0,a,0,u);for(let h=u;h<o.length;h++)a[h]=vs.addOrSubtract(i[h-u],o[h]);return new $t(this.field,a)}multiply(n){if(!this.field.equals(n.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,a=n.coefficients,u=a.length,h=new Int32Array(o+u-1),d=this.field;for(let g=0;g<o;g++){const w=i[g];for(let y=0;y<u;y++)h[g+y]=vs.addOrSubtract(h[g+y],d.multiply(w,a[y]))}return new $t(d,h)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,o=this.field,a=new Int32Array(i),u=this.coefficients;for(let h=0;h<i;h++)a[h]=o.multiply(u[h],n);return new $t(o,a)}multiplyByMonomial(n,i){if(n<0)throw new _;if(i===0)return this.field.getZero();const o=this.coefficients,a=o.length,u=new Int32Array(a+n),h=this.field;for(let d=0;d<a;d++)u[d]=h.multiply(o[d],i);return new $t(h,u)}divide(n){if(!this.field.equals(n.field))throw new _("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new _("Divide by 0");const i=this.field;let o=i.getZero(),a=this;const u=n.getCoefficient(n.getDegree()),h=i.inverse(u);for(;a.getDegree()>=n.getDegree()&&!a.isZero();){const d=a.getDegree()-n.getDegree(),g=i.multiply(a.getCoefficient(a.getDegree()),h),w=n.multiplyByMonomial(d,g),y=i.buildMonomial(d,g);o=o.addOrSubtract(y),a=a.addOrSubtract(w)}return[o,a]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(n+=" - ",o=-o):n.length>0&&(n+=" + "),i===0||o!==1){const a=this.field.log(o);a===0?n+="1":a===1?n+="a":(n+="a^",n+=a)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class Mo extends x{}Mo.kind="ArithmeticException";class Oe extends vs{constructor(n,i,o){super(),this.primitive=n,this.size=i,this.generatorBase=o;const a=new Int32Array(i);let u=1;for(let d=0;d<i;d++)a[d]=u,u*=2,u>=i&&(u^=n,u&=i-1);this.expTable=a;const h=new Int32Array(i);for(let d=0;d<i-1;d++)h[a[d]]=d;this.logTable=h,this.zero=new $t(this,Int32Array.from([0])),this.one=new $t(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new _;if(i===0)return this.zero;const o=new Int32Array(n+1);return o[0]=i,new $t(this,o)}inverse(n){if(n===0)throw new Mo;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+S.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Oe.AZTEC_DATA_12=new Oe(4201,4096,1),Oe.AZTEC_DATA_10=new Oe(1033,1024,1),Oe.AZTEC_DATA_6=new Oe(67,64,1),Oe.AZTEC_PARAM=new Oe(19,16,1),Oe.QR_CODE_FIELD_256=new Oe(285,256,0),Oe.DATA_MATRIX_FIELD_256=new Oe(301,256,1),Oe.AZTEC_DATA_8=Oe.DATA_MATRIX_FIELD_256,Oe.MAXICODE_FIELD_64=Oe.AZTEC_DATA_6;class Ei extends x{}Ei.kind="ReedSolomonException";class Un extends x{}Un.kind="IllegalStateException";class Cs{constructor(n){this.field=n}decode(n,i){const o=this.field,a=new $t(o,n),u=new Int32Array(i);let h=!0;for(let N=0;N<i;N++){const k=a.evaluateAt(o.exp(N+o.getGeneratorBase()));u[u.length-1-N]=k,k!==0&&(h=!1)}if(h)return;const d=new $t(o,u),g=this.runEuclideanAlgorithm(o.buildMonomial(i,1),d,i),w=g[0],y=g[1],C=this.findErrorLocations(w),A=this.findErrorMagnitudes(y,C);for(let N=0;N<C.length;N++){const k=n.length-1-o.log(C[N]);if(k<0)throw new Ei("Bad error location");n[k]=Oe.addOrSubtract(n[k],A[N])}}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){const N=n;n=i,i=N}const a=this.field;let u=n,h=i,d=a.getZero(),g=a.getOne();for(;h.getDegree()>=(o/2|0);){let N=u,k=d;if(u=h,d=g,u.isZero())throw new Ei("r_{i-1} was zero");h=N;let M=a.getZero();const U=u.getCoefficient(u.getDegree()),H=a.inverse(U);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){const Q=h.getDegree()-u.getDegree(),J=a.multiply(h.getCoefficient(h.getDegree()),H);M=M.addOrSubtract(a.buildMonomial(Q,J)),h=h.addOrSubtract(u.multiplyByMonomial(Q,J))}if(g=M.multiply(d).addOrSubtract(k),h.getDegree()>=u.getDegree())throw new Un("Division algorithm failed to reduce polynomial?")}const w=g.getCoefficient(0);if(w===0)throw new Ei("sigmaTilde(0) was zero");const y=a.inverse(w),C=g.multiplyScalar(y),A=h.multiplyScalar(y);return[C,A]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const o=new Int32Array(i);let a=0;const u=this.field;for(let h=1;h<u.getSize()&&a<i;h++)n.evaluateAt(h)===0&&(o[a]=u.inverse(h),a++);if(a!==i)throw new Ei("Error locator degree does not match number of roots");return o}findErrorMagnitudes(n,i){const o=i.length,a=new Int32Array(o),u=this.field;for(let h=0;h<o;h++){const d=u.inverse(i[h]);let g=1;for(let w=0;w<o;w++)if(h!==w){const y=u.multiply(i[w],d),C=y&1?y&-2:y|1;g=u.multiply(g,C)}a[h]=u.multiply(n.evaluateAt(d),u.inverse(g)),u.getGeneratorBase()!==0&&(a[h]=u.multiply(a[h],d))}return a}}var St;(function(v){v[v.UPPER=0]="UPPER",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.DIGIT=3]="DIGIT",v[v.PUNCT=4]="PUNCT",v[v.BINARY=5]="BINARY"})(St||(St={}));class je{decode(n){this.ddata=n;let i=n.getBits(),o=this.extractBits(i),a=this.correctBits(o),u=je.convertBoolArrayToByteArray(a),h=je.getEncodedData(a),d=new Es(u,h,null,null);return d.setNumBits(a.length),d}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,o=St.UPPER,a=St.UPPER,u="",h=0;for(;h<i;)if(a===St.BINARY){if(i-h<5)break;let d=je.readCode(n,h,5);if(h+=5,d===0){if(i-h<11)break;d=je.readCode(n,h,11)+31,h+=11}for(let g=0;g<d;g++){if(i-h<8){h=i;break}const w=je.readCode(n,h,8);u+=ae.castAsNonUtf8Char(w),h+=8}a=o}else{let d=a===St.DIGIT?4:5;if(i-h<d)break;let g=je.readCode(n,h,d);h+=d;let w=je.getCharacter(a,g);w.startsWith("CTRL_")?(o=a,a=je.getTable(w.charAt(5)),w.charAt(6)==="L"&&(o=a)):(u+=w,a=o)}return u}static getTable(n){switch(n){case"L":return St.LOWER;case"P":return St.PUNCT;case"M":return St.MIXED;case"D":return St.DIGIT;case"B":return St.BINARY;case"U":default:return St.UPPER}}static getCharacter(n,i){switch(n){case St.UPPER:return je.UPPER_TABLE[i];case St.LOWER:return je.LOWER_TABLE[i];case St.MIXED:return je.MIXED_TABLE[i];case St.PUNCT:return je.PUNCT_TABLE[i];case St.DIGIT:return je.DIGIT_TABLE[i];default:throw new Un("Bad table")}}correctBits(n){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=Oe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=Oe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=Oe.AZTEC_DATA_10):(o=12,i=Oe.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),u=n.length/o;if(u<a)throw new B;let h=n.length%o,d=new Int32Array(u);for(let A=0;A<u;A++,h+=o)d[A]=je.readCode(n,h,o);try{new Cs(i).decode(d,u-a)}catch(A){throw new B(A)}let g=(1<<o)-1,w=0;for(let A=0;A<a;A++){let N=d[A];if(N===0||N===g)throw new B;(N===1||N===g-1)&&w++}let y=new Array(a*o-w),C=0;for(let A=0;A<a;A++){let N=d[A];if(N===1||N===g-1)y.fill(N>1,C,C+o-1),C+=o-1;else for(let k=o-1;k>=0;--k)y[C++]=(N&1<<k)!==0}return y}extractBits(n){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),a=(i?11:14)+o*4,u=new Int32Array(a),h=new Array(this.totalBitsInLayer(o,i));if(i)for(let d=0;d<u.length;d++)u[d]=d;else{let d=a+1+2*S.truncDivision(S.truncDivision(a,2)-1,15),g=a/2,w=S.truncDivision(d,2);for(let y=0;y<g;y++){let C=y+S.truncDivision(y,15);u[g-y-1]=w-C-1,u[g+y]=w+C+1}}for(let d=0,g=0;d<o;d++){let w=(o-d)*4+(i?9:12),y=d*2,C=a-1-y;for(let A=0;A<w;A++){let N=A*2;for(let k=0;k<2;k++)h[g+N+k]=n.get(u[y+k],u[y+A]),h[g+2*w+N+k]=n.get(u[y+A],u[C-k]),h[g+4*w+N+k]=n.get(u[C-k],u[C-A]),h[g+6*w+N+k]=n.get(u[C-A],u[y+k])}g+=w*8}return h}static readCode(n,i,o){let a=0;for(let u=i;u<i+o;u++)a<<=1,n[u]&&(a|=1);return a}static readByte(n,i){let o=n.length-i;return o>=8?je.readCode(n,i,8):je.readCode(n,i,o)<<8-o}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let o=0;o<i.length;o++)i[o]=je.readByte(n,8*o);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],je.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class be{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,o,a){const u=n-o,h=i-a;return Math.sqrt(u*u+h*h)}static sum(n){let i=0;for(let o=0,a=n.length;o!==a;o++){const u=n[o];i+=u}return i}}class Bo{static floatToIntBits(n){return n}}Bo.MAX_VALUE=Number.MAX_SAFE_INTEGER;class se{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof se){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Bo.floatToIntBits(this.x)+Bo.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),o=this.distance(n[1],n[2]),a=this.distance(n[0],n[2]);let u,h,d;if(o>=i&&o>=a?(h=n[0],u=n[1],d=n[2]):a>=o&&a>=i?(h=n[1],u=n[0],d=n[2]):(h=n[2],u=n[0],d=n[1]),this.crossProductZ(u,h,d)<0){const g=u;u=d,d=g}n[0]=u,n[1]=h,n[2]=d}static distance(n,i){return be.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,o){const a=i.x,u=i.y;return(o.x-a)*(n.y-u)-(o.y-u)*(n.x-a)}}class Lo{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Z0 extends Lo{constructor(n,i,o,a,u){super(n,i),this.compact=o,this.nbDatablocks=a,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Jn{constructor(n,i,o,a){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=Jn.INIT_SIZE),o==null&&(o=n.getWidth()/2|0),a==null&&(a=n.getHeight()/2|0);const u=i/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=a-u,this.downInit=a+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let n=this.leftInit,i=this.rightInit,o=this.upInit,a=this.downInit,u=!1,h=!0,d=!1,g=!1,w=!1,y=!1,C=!1;const A=this.width,N=this.height;for(;h;){h=!1;let k=!0;for(;(k||!g)&&i<A;)k=this.containsBlackPoint(o,a,i,!1),k?(i++,h=!0,g=!0):g||i++;if(i>=A){u=!0;break}let M=!0;for(;(M||!w)&&a<N;)M=this.containsBlackPoint(n,i,a,!0),M?(a++,h=!0,w=!0):w||a++;if(a>=N){u=!0;break}let U=!0;for(;(U||!y)&&n>=0;)U=this.containsBlackPoint(o,a,n,!1),U?(n--,h=!0,y=!0):y||n--;if(n<0){u=!0;break}let H=!0;for(;(H||!C)&&o>=0;)H=this.containsBlackPoint(n,i,o,!0),H?(o--,h=!0,C=!0):C||o--;if(o<0){u=!0;break}h&&(d=!0)}if(!u&&d){const k=i-n;let M=null;for(let J=1;M===null&&J<k;J++)M=this.getBlackPointOnSegment(n,a-J,n+J,a);if(M==null)throw new W;let U=null;for(let J=1;U===null&&J<k;J++)U=this.getBlackPointOnSegment(n,o+J,n+J,o);if(U==null)throw new W;let H=null;for(let J=1;H===null&&J<k;J++)H=this.getBlackPointOnSegment(i,o+J,i-J,o);if(H==null)throw new W;let Q=null;for(let J=1;Q===null&&J<k;J++)Q=this.getBlackPointOnSegment(i,a-J,i-J,a);if(Q==null)throw new W;return this.centerEdges(Q,M,H,U)}else throw new W}getBlackPointOnSegment(n,i,o,a){const u=be.round(be.distance(n,i,o,a)),h=(o-n)/u,d=(a-i)/u,g=this.image;for(let w=0;w<u;w++){const y=be.round(n+w*h),C=be.round(i+w*d);if(g.get(y,C))return new se(y,C)}return null}centerEdges(n,i,o,a){const u=n.getX(),h=n.getY(),d=i.getX(),g=i.getY(),w=o.getX(),y=o.getY(),C=a.getX(),A=a.getY(),N=Jn.CORR;return u<this.width/2?[new se(C-N,A+N),new se(d+N,g+N),new se(w-N,y-N),new se(u+N,h-N)]:[new se(C+N,A+N),new se(d+N,g-N),new se(w-N,y+N),new se(u-N,h-N)]}containsBlackPoint(n,i,o,a){const u=this.image;if(a){for(let h=n;h<=i;h++)if(u.get(h,o))return!0}else for(let h=n;h<=i;h++)if(u.get(o,h))return!0;return!1}}Jn.INIT_SIZE=10,Jn.CORR=1;class kl{static checkAndNudgePoints(n,i){const o=n.getWidth(),a=n.getHeight();let u=!0;for(let h=0;h<i.length&&u;h+=2){const d=Math.floor(i[h]),g=Math.floor(i[h+1]);if(d<-1||d>o||g<-1||g>a)throw new W;u=!1,d===-1?(i[h]=0,u=!0):d===o&&(i[h]=o-1,u=!0),g===-1?(i[h+1]=0,u=!0):g===a&&(i[h+1]=a-1,u=!0)}u=!0;for(let h=i.length-2;h>=0&&u;h-=2){const d=Math.floor(i[h]),g=Math.floor(i[h+1]);if(d<-1||d>o||g<-1||g>a)throw new W;u=!1,d===-1?(i[h]=0,u=!0):d===o&&(i[h]=o-1,u=!0),g===-1?(i[h+1]=0,u=!0):g===a&&(i[h+1]=a-1,u=!0)}}}class In{constructor(n,i,o,a,u,h,d,g,w){this.a11=n,this.a21=i,this.a31=o,this.a12=a,this.a22=u,this.a32=h,this.a13=d,this.a23=g,this.a33=w}static quadrilateralToQuadrilateral(n,i,o,a,u,h,d,g,w,y,C,A,N,k,M,U){const H=In.quadrilateralToSquare(n,i,o,a,u,h,d,g);return In.squareToQuadrilateral(w,y,C,A,N,k,M,U).times(H)}transformPoints(n){const i=n.length,o=this.a11,a=this.a12,u=this.a13,h=this.a21,d=this.a22,g=this.a23,w=this.a31,y=this.a32,C=this.a33;for(let A=0;A<i;A+=2){const N=n[A],k=n[A+1],M=u*N+g*k+C;n[A]=(o*N+h*k+w)/M,n[A+1]=(a*N+d*k+y)/M}}transformPointsWithValues(n,i){const o=this.a11,a=this.a12,u=this.a13,h=this.a21,d=this.a22,g=this.a23,w=this.a31,y=this.a32,C=this.a33,A=n.length;for(let N=0;N<A;N++){const k=n[N],M=i[N],U=u*k+g*M+C;n[N]=(o*k+h*M+w)/U,i[N]=(a*k+d*M+y)/U}}static squareToQuadrilateral(n,i,o,a,u,h,d,g){const w=n-o+u-d,y=i-a+h-g;if(w===0&&y===0)return new In(o-n,u-o,n,a-i,h-a,i,0,0,1);{const C=o-u,A=d-u,N=a-h,k=g-h,M=C*k-A*N,U=(w*k-A*y)/M,H=(C*y-w*N)/M;return new In(o-n+U*o,d-n+H*d,n,a-i+U*a,g-i+H*g,i,U,H,1)}}static quadrilateralToSquare(n,i,o,a,u,h,d,g){return In.squareToQuadrilateral(n,i,o,a,u,h,d,g).buildAdjoint()}buildAdjoint(){return new In(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new In(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Q0 extends kl{sampleGrid(n,i,o,a,u,h,d,g,w,y,C,A,N,k,M,U,H,Q,J){const q=In.quadrilateralToQuadrilateral(a,u,h,d,g,w,y,C,A,N,k,M,U,H,Q,J);return this.sampleGridWithTransform(n,i,o,q)}sampleGridWithTransform(n,i,o,a){if(i<=0||o<=0)throw new W;const u=new lt(i,o),h=new Float32Array(2*i);for(let d=0;d<o;d++){const g=h.length,w=d+.5;for(let y=0;y<g;y+=2)h[y]=y/2+.5,h[y+1]=w;a.transformPoints(h),kl.checkAndNudgePoints(n,h);try{for(let y=0;y<g;y+=2)n.get(Math.floor(h[y]),Math.floor(h[y+1]))&&u.set(y/2,d)}catch{throw new W}}return u}}class gr{static setGridSampler(n){gr.gridSampler=n}static getInstance(){return gr.gridSampler}}gr.gridSampler=new Q0;class Ut{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new se(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class J0{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(n){let h=o[0];o[0]=o[2],o[2]=h}this.extractParameters(o);let a=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new Z0(a,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new W;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(o,i);let a=0;for(let h=0;h<4;h++){let d=o[(this.shift+h)%4];this.compact?(a<<=7,a+=d>>1&127):(a<<=10,a+=(d>>2&992)+(d>>1&31))}let u=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(n,i){let o=0;n.forEach((a,u,h)=>{let d=(a>>i-2<<1)+(a&1);o=(o<<3)+d}),o=((o&1)<<11)+(o>>1);for(let a=0;a<4;a++)if(S.bitCount(o^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new W}getCorrectedParameterData(n,i){let o,a;i?(o=7,a=2):(o=10,a=4);let u=o-a,h=new Int32Array(o);for(let g=o-1;g>=0;--g)h[g]=n&15,n>>=4;try{new Cs(Oe.AZTEC_PARAM).decode(h,u)}catch{throw new W}let d=0;for(let g=0;g<a;g++)d=(d<<4)+h[g];return d}getBullsEyeCorners(n){let i=n,o=n,a=n,u=n,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let C=this.getFirstDifferent(i,h,1,-1),A=this.getFirstDifferent(o,h,1,1),N=this.getFirstDifferent(a,h,-1,1),k=this.getFirstDifferent(u,h,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(k,C)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(C,A,N,k))break}i=C,o=A,a=N,u=k,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let d=new se(i.getX()+.5,i.getY()-.5),g=new se(o.getX()+.5,o.getY()+.5),w=new se(a.getX()-.5,a.getY()+.5),y=new se(u.getX()-.5,u.getY()-.5);return this.expandSquare([d,g,w,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,o,a;try{let d=new Jn(this.image).detect();n=d[0],i=d[1],o=d[2],a=d[3]}catch{let g=this.image.getWidth()/2,w=this.image.getHeight()/2;n=this.getFirstDifferent(new Ut(g+7,w-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Ut(g+7,w+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Ut(g-7,w+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ut(g-7,w-7),!1,-1,-1).toResultPoint()}let u=be.round((n.getX()+a.getX()+i.getX()+o.getX())/4),h=be.round((n.getY()+a.getY()+i.getY()+o.getY())/4);try{let d=new Jn(this.image,15,u,h).detect();n=d[0],i=d[1],o=d[2],a=d[3]}catch{n=this.getFirstDifferent(new Ut(u+7,h-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Ut(u+7,h+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Ut(u-7,h+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ut(u-7,h-7),!1,-1,-1).toResultPoint()}return u=be.round((n.getX()+a.getX()+i.getX()+o.getX())/4),h=be.round((n.getY()+a.getY()+i.getY()+o.getY())/4),new Ut(u,h)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,o,a,u){let h=gr.getInstance(),d=this.getDimension(),g=d/2-this.nbCenterLayers,w=d/2+this.nbCenterLayers;return h.sampleGrid(n,d,d,g,g,w,g,w,w,g,w,i.getX(),i.getY(),o.getX(),o.getY(),a.getX(),a.getY(),u.getX(),u.getY())}sampleLine(n,i,o){let a=0,u=this.distanceResultPoint(n,i),h=u/o,d=n.getX(),g=n.getY(),w=h*(i.getX()-n.getX())/u,y=h*(i.getY()-n.getY())/u;for(let C=0;C<o;C++)this.image.get(be.round(d+C*w),be.round(g+C*y))&&(a|=1<<o-C-1);return a}isWhiteOrBlackRectangle(n,i,o,a){let u=3;n=new Ut(n.getX()-u,n.getY()+u),i=new Ut(i.getX()-u,i.getY()-u),o=new Ut(o.getX()+u,o.getY()-u),a=new Ut(a.getX()+u,a.getY()+u);let h=this.getColor(a,n);if(h===0)return!1;let d=this.getColor(n,i);return d!==h||(d=this.getColor(i,o),d!==h)?!1:(d=this.getColor(o,a),d===h)}getColor(n,i){let o=this.distancePoint(n,i),a=(i.getX()-n.getX())/o,u=(i.getY()-n.getY())/o,h=0,d=n.getX(),g=n.getY(),w=this.image.get(n.getX(),n.getY()),y=Math.ceil(o);for(let A=0;A<y;A++)d+=a,g+=u,this.image.get(be.round(d),be.round(g))!==w&&h++;let C=h/o;return C>.1&&C<.9?0:C<=.1===w?1:-1}getFirstDifferent(n,i,o,a){let u=n.getX()+o,h=n.getY()+a;for(;this.isValid(u,h)&&this.image.get(u,h)===i;)u+=o,h+=a;for(u-=o,h-=a;this.isValid(u,h)&&this.image.get(u,h)===i;)u+=o;for(u-=o;this.isValid(u,h)&&this.image.get(u,h)===i;)h+=a;return h-=a,new Ut(u,h)}expandSquare(n,i,o){let a=o/(2*i),u=n[0].getX()-n[2].getX(),h=n[0].getY()-n[2].getY(),d=(n[0].getX()+n[2].getX())/2,g=(n[0].getY()+n[2].getY())/2,w=new se(d+a*u,g+a*h),y=new se(d-a*u,g-a*h);u=n[1].getX()-n[3].getX(),h=n[1].getY()-n[3].getY(),d=(n[1].getX()+n[3].getX())/2,g=(n[1].getY()+n[3].getY())/2;let C=new se(d+a*u,g+a*h),A=new se(d-a*u,g-a*h);return[w,C,y,A]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=be.round(n.getX()),o=be.round(n.getY());return this.isValid(i,o)}distancePoint(n,i){return be.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return be.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(S.truncDivision(this.nbLayers-4,8)+1)+15}}class Fo{decode(n,i=null){let o=null,a=new J0(n.getBlackMatrix()),u=null,h=null;try{let y=a.detectMirror(!1);u=y.getPoints(),this.reportFoundResultPoints(i,u),h=new je().decode(y)}catch(y){o=y}if(h==null)try{let y=a.detectMirror(!0);u=y.getPoints(),this.reportFoundResultPoints(i,u),h=new je().decode(y)}catch(y){throw o??y}let d=new Ze(h.getText(),h.getRawBytes(),h.getNumBits(),u,oe.AZTEC,L.currentTimeMillis()),g=h.getByteSegments();g!=null&&d.putMetadata(Et.BYTE_SEGMENTS,g);let w=h.getECLevel();return w!=null&&d.putMetadata(Et.ERROR_CORRECTION_LEVEL,w),d}reportFoundResultPoints(n,i){if(n!=null){let o=n.get(V.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((a,u,h)=>{o.foundPossibleResultPoint(a)})}}reset(){}}class u2 extends pn{constructor(n=500){super(new Fo,n)}}class ht{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get(V.TRY_HARDER)===!0&&n.isRotateSupported()){const u=n.rotateCounterClockwise(),h=this.doDecode(u,i),d=h.getResultMetadata();let g=270;d!==null&&d.get(Et.ORIENTATION)===!0&&(g=g+d.get(Et.ORIENTATION)%360),h.putMetadata(Et.ORIENTATION,g);const w=h.getResultPoints();if(w!==null){const y=u.getHeight();for(let C=0;C<w.length;C++)w[C]=new se(y-w[C].getY()-1,w[C].getX())}return h}else throw new W}}reset(){}doDecode(n,i){const o=n.getWidth(),a=n.getHeight();let u=new D(o);const h=i&&i.get(V.TRY_HARDER)===!0,d=Math.max(1,a>>(h?8:5));let g;h?g=a:g=15;const w=Math.trunc(a/2);for(let y=0;y<g;y++){const C=Math.trunc((y+1)/2),A=(y&1)===0,N=w+d*(A?C:-C);if(N<0||N>=a)break;try{u=n.getBlackRow(N,u)}catch{continue}for(let k=0;k<2;k++){if(k===1&&(u.reverse(),i&&i.get(V.NEED_RESULT_POINT_CALLBACK)===!0)){const M=new Map;i.forEach((U,H)=>M.set(H,U)),M.delete(V.NEED_RESULT_POINT_CALLBACK),i=M}try{const M=this.decodeRow(N,u,i);if(k===1){M.putMetadata(Et.ORIENTATION,180);const U=M.getResultPoints();U!==null&&(U[0]=new se(o-U[0].getX()-1,U[0].getY()),U[1]=new se(o-U[1].getX()-1,U[1].getY()))}return M}catch{}}}throw new W}static recordPattern(n,i,o){const a=o.length;for(let w=0;w<a;w++)o[w]=0;const u=n.getSize();if(i>=u)throw new W;let h=!n.get(i),d=0,g=i;for(;g<u;){if(n.get(g)!==h)o[d]++;else{if(++d===a)break;o[d]=1,h=!h}g++}if(!(d===a||d===a-1&&g===u))throw new W}static recordPatternInReverse(n,i,o){let a=o.length,u=n.get(i);for(;i>0&&a>=0;)n.get(--i)!==u&&(a--,u=!u);if(a>=0)throw new W;ht.recordPattern(n,i+1,o)}static patternMatchVariance(n,i,o){const a=n.length;let u=0,h=0;for(let w=0;w<a;w++)u+=n[w],h+=i[w];if(u<h)return Number.POSITIVE_INFINITY;const d=u/h;o*=d;let g=0;for(let w=0;w<a;w++){const y=n[w],C=i[w]*d,A=y>C?y-C:C-y;if(A>o)return Number.POSITIVE_INFINITY;g+=A}return g/u}}class ee extends ht{static findStartPattern(n){const i=n.getSize(),o=n.getNextSet(0);let a=0,u=Int32Array.from([0,0,0,0,0,0]),h=o,d=!1;const g=6;for(let w=o;w<i;w++)if(n.get(w)!==d)u[a]++;else{if(a===g-1){let y=ee.MAX_AVG_VARIANCE,C=-1;for(let A=ee.CODE_START_A;A<=ee.CODE_START_C;A++){const N=ht.patternMatchVariance(u,ee.CODE_PATTERNS[A],ee.MAX_INDIVIDUAL_VARIANCE);N<y&&(y=N,C=A)}if(C>=0&&n.isRange(Math.max(0,h-(w-h)/2),h,!1))return Int32Array.from([h,w,C]);h+=u[0]+u[1],u=u.slice(2,u.length-1),u[a-1]=0,u[a]=0,a--}else a++;u[a]=1,d=!d}throw new W}static decodeCode(n,i,o){ht.recordPattern(n,o,i);let a=ee.MAX_AVG_VARIANCE,u=-1;for(let h=0;h<ee.CODE_PATTERNS.length;h++){const d=ee.CODE_PATTERNS[h],g=this.patternMatchVariance(i,d,ee.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,u=h)}if(u>=0)return u;throw new W}decodeRow(n,i,o){const a=o&&o.get(V.ASSUME_GS1)===!0,u=ee.findStartPattern(i),h=u[2];let d=0;const g=new Uint8Array(20);g[d++]=h;let w;switch(h){case ee.CODE_START_A:w=ee.CODE_CODE_A;break;case ee.CODE_START_B:w=ee.CODE_CODE_B;break;case ee.CODE_START_C:w=ee.CODE_CODE_C;break;default:throw new B}let y=!1,C=!1,A="",N=u[0],k=u[1];const M=Int32Array.from([0,0,0,0,0,0]);let U=0,H=0,Q=h,J=0,q=!0,_e=!1,me=!1;for(;!y;){const Ni=C;switch(C=!1,U=H,H=ee.decodeCode(i,M,k),g[d++]=H,H!==ee.CODE_STOP&&(q=!0),H!==ee.CODE_STOP&&(J++,Q+=J*H),N=k,k+=M.reduce((F2,U2)=>F2+U2,0),H){case ee.CODE_START_A:case ee.CODE_START_B:case ee.CODE_START_C:throw new B}switch(w){case ee.CODE_CODE_A:if(H<64)me===_e?A+=String.fromCharCode(32+H):A+=String.fromCharCode(32+H+128),me=!1;else if(H<96)me===_e?A+=String.fromCharCode(H-64):A+=String.fromCharCode(H+64),me=!1;else switch(H!==ee.CODE_STOP&&(q=!1),H){case ee.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_A:!_e&&me?(_e=!0,me=!1):_e&&me?(_e=!1,me=!1):me=!0;break;case ee.CODE_SHIFT:C=!0,w=ee.CODE_CODE_B;break;case ee.CODE_CODE_B:w=ee.CODE_CODE_B;break;case ee.CODE_CODE_C:w=ee.CODE_CODE_C;break;case ee.CODE_STOP:y=!0;break}break;case ee.CODE_CODE_B:if(H<96)me===_e?A+=String.fromCharCode(32+H):A+=String.fromCharCode(32+H+128),me=!1;else switch(H!==ee.CODE_STOP&&(q=!1),H){case ee.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_B:!_e&&me?(_e=!0,me=!1):_e&&me?(_e=!1,me=!1):me=!0;break;case ee.CODE_SHIFT:C=!0,w=ee.CODE_CODE_A;break;case ee.CODE_CODE_A:w=ee.CODE_CODE_A;break;case ee.CODE_CODE_C:w=ee.CODE_CODE_C;break;case ee.CODE_STOP:y=!0;break}break;case ee.CODE_CODE_C:if(H<100)H<10&&(A+="0"),A+=H;else switch(H!==ee.CODE_STOP&&(q=!1),H){case ee.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case ee.CODE_CODE_A:w=ee.CODE_CODE_A;break;case ee.CODE_CODE_B:w=ee.CODE_CODE_B;break;case ee.CODE_STOP:y=!0;break}break}Ni&&(w=w===ee.CODE_CODE_A?ee.CODE_CODE_B:ee.CODE_CODE_A)}const Zt=k-N;if(k=i.getNextUnset(k),!i.isRange(k,Math.min(i.getSize(),k+(k-N)/2),!1))throw new W;if(Q-=J*U,Q%103!==U)throw new O;const Tn=A.length;if(Tn===0)throw new W;Tn>0&&q&&(w===ee.CODE_CODE_C?A=A.substring(0,Tn-2):A=A.substring(0,Tn-1));const Qt=(u[1]+u[0])/2,Ue=N+Zt/2,Tt=g.length,on=new Uint8Array(Tt);for(let Ni=0;Ni<Tt;Ni++)on[Ni]=g[Ni];const Ti=[new se(Qt,n),new se(Ue,n)];return new Ze(A,on,0,Ti,oe.CODE_128,new Date().getTime())}}ee.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ee.MAX_AVG_VARIANCE=.25,ee.MAX_INDIVIDUAL_VARIANCE=.7,ee.CODE_SHIFT=98,ee.CODE_CODE_C=99,ee.CODE_CODE_B=100,ee.CODE_CODE_A=101,ee.CODE_FNC_1=102,ee.CODE_FNC_2=97,ee.CODE_FNC_3=96,ee.CODE_FNC_4_A=101,ee.CODE_FNC_4_B=100,ee.CODE_START_A=103,ee.CODE_START_B=104,ee.CODE_START_C=105,ee.CODE_STOP=106;class ft extends ht{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,o){let a=this.counters;a.fill(0),this.decodeRowResult="";let u=ft.findAsteriskPattern(i,a),h=i.getNextSet(u[1]),d=i.getSize(),g,w;do{ft.recordPattern(i,h,a);let M=ft.toNarrowWidePattern(a);if(M<0)throw new W;g=ft.patternToChar(M),this.decodeRowResult+=g,w=h;for(let U of a)h+=U;h=i.getNextSet(h)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let y=0;for(let M of a)y+=M;let C=h-w-y;if(h!==d&&C*2<y)throw new W;if(this.usingCheckDigit){let M=this.decodeRowResult.length-1,U=0;for(let H=0;H<M;H++)U+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(H));if(this.decodeRowResult.charAt(M)!==ft.ALPHABET_STRING.charAt(U%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new W;let A;this.extendedMode?A=ft.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let N=(u[1]+u[0])/2,k=w+y/2;return new Ze(A,null,0,[new se(N,n),new se(k,n)],oe.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let o=n.getSize(),a=n.getNextSet(0),u=0,h=a,d=!1,g=i.length;for(let w=a;w<o;w++)if(n.get(w)!==d)i[u]++;else{if(u===g-1){if(this.toNarrowWidePattern(i)===ft.ASTERISK_ENCODING&&n.isRange(Math.max(0,h-Math.floor((w-h)/2)),h,!1))return[h,w];h+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,d=!d}throw new W}static toNarrowWidePattern(n){let i=n.length,o=0,a;do{let u=2147483647;for(let g of n)g<u&&g>o&&(u=g);o=u,a=0;let h=0,d=0;for(let g=0;g<i;g++){let w=n[g];w>o&&(d|=1<<i-1-g,a++,h+=w)}if(a===3){for(let g=0;g<i&&a>0;g++){let w=n[g];if(w>o&&(a--,w*2>=h))return-1}return d}}while(a>3);return-1}static patternToChar(n){for(let i=0;i<ft.CHARACTER_ENCODINGS.length;i++)if(ft.CHARACTER_ENCODINGS[i]===n)return ft.ALPHABET_STRING.charAt(i);if(n===ft.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(n){let i=n.length,o="";for(let a=0;a<i;a++){let u=n.charAt(a);if(u==="+"||u==="$"||u==="%"||u==="/"){let h=n.charAt(a+1),d="\0";switch(u){case"+":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)+32);else throw new B;break;case"$":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)-64);else throw new B;break;case"%":if(h>="A"&&h<="E")d=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")d=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")d=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")d="\0";else if(h==="V")d="@";else if(h==="W")d="`";else if(h==="X"||h==="Y"||h==="Z")d="";else throw new B;break;case"/":if(h>="A"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")d=":";else throw new B;break}o+=d,a++}else o+=u}return o}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class Le extends ht{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,o){let a=this.decodeStart(i),u=this.decodeEnd(i),h=new pe;Le.decodeMiddle(i,a[1],u[0],h);let d=h.toString(),g=null;o!=null&&(g=o.get(V.ALLOWED_LENGTHS)),g==null&&(g=Le.DEFAULT_ALLOWED_LENGTHS);let w=d.length,y=!1,C=0;for(let k of g){if(w===k){y=!0;break}k>C&&(C=k)}if(!y&&w>C&&(y=!0),!y)throw new B;const A=[new se(a[1],n),new se(u[0],n)];return new Ze(d,null,0,A,oe.ITF,new Date().getTime())}static decodeMiddle(n,i,o,a){let u=new Int32Array(10),h=new Int32Array(5),d=new Int32Array(5);for(u.fill(0),h.fill(0),d.fill(0);i<o;){ht.recordPattern(n,i,u);for(let w=0;w<5;w++){let y=2*w;h[w]=u[y],d[w]=u[y+1]}let g=Le.decodeDigit(h);a.append(g.toString()),g=this.decodeDigit(d),a.append(g.toString()),u.forEach(function(w){i+=w})}}decodeStart(n){let i=Le.skipWhiteSpace(n),o=Le.findGuardPattern(n,i,Le.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(n,o[0]),o}validateQuietZone(n,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let a=i-1;o>0&&a>=0&&!n.get(a);a--)o--;if(o!==0)throw new W}static skipWhiteSpace(n){const i=n.getSize(),o=n.getNextSet(0);if(o===i)throw new W;return o}decodeEnd(n){n.reverse();try{let i=Le.skipWhiteSpace(n),o;try{o=Le.findGuardPattern(n,i,Le.END_PATTERN_REVERSED[0])}catch(u){u instanceof W&&(o=Le.findGuardPattern(n,i,Le.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,o[0]);let a=o[0];return o[0]=n.getSize()-o[1],o[1]=n.getSize()-a,o}finally{n.reverse()}}static findGuardPattern(n,i,o){let a=o.length,u=new Int32Array(a),h=n.getSize(),d=!1,g=0,w=i;u.fill(0);for(let y=i;y<h;y++)if(n.get(y)!==d)u[g]++;else{if(g===a-1){if(ht.patternMatchVariance(u,o,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE)return[w,y];w+=u[0]+u[1],L.arraycopy(u,2,u,0,g-1),u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,d=!d}throw new W}static decodeDigit(n){let i=Le.MAX_AVG_VARIANCE,o=-1,a=Le.PATTERNS.length;for(let u=0;u<a;u++){let h=Le.PATTERNS[u],d=ht.patternMatchVariance(n,h,Le.MAX_INDIVIDUAL_VARIANCE);d<i?(i=d,o=u):d===i&&(o=-1)}if(o>=0)return o%10;throw new W}}Le.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Le.MAX_AVG_VARIANCE=.38,Le.MAX_INDIVIDUAL_VARIANCE=.5,Le.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Le.START_PATTERN=Int32Array.from([1,1,1,1]),Le.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class rt extends ht{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,o,a=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),o=rt.findGuardPattern(n,a,!1,this.START_END_PATTERN,u);let h=o[0];a=o[1];let d=h-(a-h);d>=0&&(i=n.isRange(d,h,!1))}return o}static checkChecksum(n){return rt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return rt.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let a=i-1;a>=0;a-=2){let u=n.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new B;o+=u}o*=3;for(let a=i-2;a>=0;a-=2){let u=n.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new B;o+=u}return(1e3-o)%10}static decodeEnd(n,i){return rt.findGuardPattern(n,i,!1,rt.START_END_PATTERN,new Int32Array(rt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,o,a){return this.findGuardPattern(n,i,o,a,new Int32Array(a.length))}static findGuardPattern(n,i,o,a,u){let h=n.getSize();i=o?n.getNextUnset(i):n.getNextSet(i);let d=0,g=i,w=a.length,y=o;for(let C=i;C<h;C++)if(n.get(C)!==y)u[d]++;else{if(d===w-1){if(ht.patternMatchVariance(u,a,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return Int32Array.from([g,C]);g+=u[0]+u[1];let A=u.slice(2,u.length-1);for(let N=0;N<d-1;N++)u[N]=A[N];u[d-1]=0,u[d]=0,d--}else d++;u[d]=1,y=!y}throw new W}static decodeDigit(n,i,o,a){this.recordPattern(n,o,i);let u=this.MAX_AVG_VARIANCE,h=-1,d=a.length;for(let g=0;g<d;g++){let w=a[g],y=ht.patternMatchVariance(i,w,rt.MAX_INDIVIDUAL_VARIANCE);y<u&&(u=y,h=g)}if(h>=0)return h;throw new W}}rt.MAX_AVG_VARIANCE=.48,rt.MAX_INDIVIDUAL_VARIANCE=.7,rt.START_END_PATTERN=Int32Array.from([1,1,1]),rt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),rt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),rt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _s{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let a=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,a),h=a.toString(),d=_s.parseExtensionString(h),g=[new se((o[0]+o[1])/2,n),new se(u,n)],w=new Ze(h,null,0,g,oe.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(n,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=n.getSize(),h=i[1],d=0;for(let w=0;w<5&&h<u;w++){let y=rt.decodeDigit(n,a,h,rt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let C of a)h+=C;y>=10&&(d|=1<<4-w),w!==4&&(h=n.getNextSet(h),h=n.getNextUnset(h))}if(o.length!==5)throw new W;let g=this.determineCheckDigit(d);if(_s.extensionChecksum(o.toString())!==g)throw new W;return h}static extensionChecksum(n){let i=n.length,o=0;for(let a=i-2;a>=0;a-=2)o+=n.charAt(a).charCodeAt(0)-48;o*=3;for(let a=i-1;a>=0;a-=2)o+=n.charAt(a).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new W}static parseExtensionString(n){if(n.length!==5)return null;let i=_s.parseExtension5String(n);return i==null?null:new Map([[Et.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(n.substring(1)),a=(o/100).toString(),u=o%100,h=u<10?"0"+u:u.toString();return i+a+"."+h}}class Dl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,o){let a=this.decodeRowStringBuffer,u=this.decodeMiddle(i,o,a),h=a.toString(),d=Dl.parseExtensionString(h),g=[new se((o[0]+o[1])/2,n),new se(u,n)],w=new Ze(h,null,0,g,oe.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(n,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=n.getSize(),h=i[1],d=0;for(let g=0;g<2&&h<u;g++){let w=rt.decodeDigit(n,a,h,rt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let y of a)h+=y;w>=10&&(d|=1<<1-g),g!==1&&(h=n.getNextSet(h),h=n.getNextUnset(h))}if(o.length!==2)throw new W;if(parseInt(o.toString())%4!==d)throw new W;return h}static parseExtensionString(n){return n.length!==2?null:new Map([[Et.ISSUE_NUMBER,parseInt(n)]])}}class eh{static decodeRow(n,i,o){let a=rt.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new _s().decodeRow(n,i,a)}catch{return new Dl().decodeRow(n,i,a)}}}eh.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ke extends rt{constructor(){super(),this.decodeRowStringBuffer="",ke.L_AND_G_PATTERNS=ke.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=ke.L_PATTERNS[n-10],o=new Int32Array(i.length);for(let a=0;a<i.length;a++)o[a]=i[i.length-a-1];ke.L_AND_G_PATTERNS[n]=o}}decodeRow(n,i,o){let a=ke.findStartGuardPattern(i),u=o==null?null:o.get(V.NEED_RESULT_POINT_CALLBACK);if(u!=null){const q=new se((a[0]+a[1])/2,n);u.foundPossibleResultPoint(q)}let h=this.decodeMiddle(i,a,this.decodeRowStringBuffer),d=h.rowOffset,g=h.resultString;if(u!=null){const q=new se(d,n);u.foundPossibleResultPoint(q)}let w=this.decodeEnd(i,d);if(u!=null){const q=new se((w[0]+w[1])/2,n);u.foundPossibleResultPoint(q)}let y=w[1],C=y+(y-w[0]);if(C>=i.getSize()||!i.isRange(y,C,!1))throw new W;let A=g.toString();if(A.length<8)throw new B;if(!ke.checkChecksum(A))throw new O;let N=(a[1]+a[0])/2,k=(w[1]+w[0])/2,M=this.getBarcodeFormat(),U=[new se(N,n),new se(k,n)],H=new Ze(A,null,0,U,M,new Date().getTime()),Q=0;try{let q=eh.decodeRow(n,i,w[1]);H.putMetadata(Et.UPC_EAN_EXTENSION,q.getText()),H.putAllMetadata(q.getResultMetadata()),H.addResultPoints(q.getResultPoints()),Q=q.getText().length}catch{}let J=o==null?null:o.get(V.ALLOWED_EAN_EXTENSIONS);if(J!=null){let q=!1;for(let _e in J)if(Q.toString()===_e){q=!0;break}if(!q)throw new W}return H}decodeEnd(n,i){return ke.findGuardPattern(n,i,!1,ke.START_END_PATTERN,new Int32Array(ke.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return ke.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let o=parseInt(n.charAt(i-1),10);return ke.getStandardUPCEANChecksum(n.substring(0,i-1))===o}static getStandardUPCEANChecksum(n){let i=n.length,o=0;for(let a=i-1;a>=0;a-=2){let u=n.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new B;o+=u}o*=3;for(let a=i-2;a>=0;a-=2){let u=n.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new B;o+=u}return(1e3-o)%10}}class Kr extends ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=n.getSize(),h=i[1],d=0;for(let w=0;w<6&&h<u;w++){let y=ke.decodeDigit(n,a,h,ke.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let C of a)h+=C;y>=10&&(d|=1<<5-w)}o=Kr.determineFirstDigit(o,d),h=ke.findGuardPattern(n,h,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&h<u;w++){let y=ke.decodeDigit(n,a,h,ke.L_PATTERNS);o+=String.fromCharCode(48+y);for(let C of a)h+=C}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return oe.EAN_13}static determineFirstDigit(n,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return n=String.fromCharCode(48+o)+n,n;throw new W}}Kr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class th extends ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,o){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=n.getSize(),h=i[1];for(let g=0;g<4&&h<u;g++){let w=ke.decodeDigit(n,a,h,ke.L_PATTERNS);o+=String.fromCharCode(48+w);for(let y of a)h+=y}h=ke.findGuardPattern(n,h,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&h<u;g++){let w=ke.decodeDigit(n,a,h,ke.L_PATTERNS);o+=String.fromCharCode(48+w);for(let y of a)h+=y}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return oe.EAN_8}}class nh extends ke{constructor(){super(...arguments),this.ean13Reader=new Kr}getBarcodeFormat(){return oe.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,o))}decodeMiddle(n,i,o){return this.ean13Reader.decodeMiddle(n,i,o)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let o=new Ze(i.substring(1),null,null,n.getResultPoints(),oe.UPC_A);return n.getResultMetadata()!=null&&o.putAllMetadata(n.getResultMetadata()),o}else throw new W}reset(){this.ean13Reader.reset()}}class bn extends ke{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,o){const a=this.decodeMiddleCounters.map(w=>w);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const u=n.getSize();let h=i[1],d=0;for(let w=0;w<6&&h<u;w++){const y=bn.decodeDigit(n,a,h,bn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let C of a)h+=C;y>=10&&(d|=1<<5-w)}let g=bn.determineNumSysAndCheckDigit(o,d);return{rowOffset:h,resultString:g}}decodeEnd(n,i){return bn.findGuardPatternWithoutCounters(n,i,!0,bn.MIDDLE_END_PATTERN)}checkChecksum(n){return ke.checkChecksum(bn.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let o=0;o<=1;o++)for(let a=0;a<10;a++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){let u=String.fromCharCode(48+o),h=String.fromCharCode(48+a);return u+n+h}throw W.getNotFoundInstance()}getBarcodeFormat(){return oe.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new pe;o.append(n.charAt(0));let a=i[5];switch(a){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(a),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(a);break}return n.length>=8&&o.append(n.charAt(7)),o.toString()}}bn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),bn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Pl extends ht{constructor(n){super();let i=n==null?null:n.get(V.POSSIBLE_FORMATS),o=[];s(i)?(o.push(new Kr),o.push(new nh),o.push(new th),o.push(new bn)):(i.indexOf(oe.EAN_13)>-1&&o.push(new Kr),i.indexOf(oe.UPC_A)>-1&&o.push(new nh),i.indexOf(oe.EAN_8)>-1&&o.push(new th),i.indexOf(oe.UPC_E)>-1&&o.push(new bn)),this.readers=o}decodeRow(n,i,o){for(let a of this.readers)try{const u=a.decodeRow(n,i,o),h=u.getBarcodeFormat()===oe.EAN_13&&u.getText().charAt(0)==="0",d=o==null?null:o.get(V.POSSIBLE_FORMATS),g=d==null||d.includes(oe.UPC_A);if(h&&g){const w=u.getRawBytes(),y=new Ze(u.getText().substring(1),w,w?w.length:null,u.getResultPoints(),oe.UPC_A);return y.putAllMetadata(u.getResultMetadata()),y}return u}catch{}throw new W}reset(){for(let n of this.readers)n.reset()}}class Dt extends ht{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let o=0;o<i.length;o++)if(ht.patternMatchVariance(n,i[o],Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return o;throw new W}static count(n){return be.sum(new Int32Array(n))}static increment(n,i){let o=0,a=i[0];for(let u=1;u<n.length;u++)i[u]>a&&(a=i[u],o=u);n[o]++}static decrement(n,i){let o=0,a=i[0];for(let u=1;u<n.length;u++)i[u]<a&&(a=i[u],o=u);n[o]--}static isFinderPattern(n){let i=n[0]+n[1],o=i+n[2]+n[3],a=i/o;if(a>=Dt.MIN_FINDER_PATTERN_RATIO&&a<=Dt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let d of n)d>h&&(h=d),d<u&&(u=d);return h<10*u}return!1}}Dt.MAX_AVG_VARIANCE=.2,Dt.MAX_INDIVIDUAL_VARIANCE=.45,Dt.MIN_FINDER_PATTERN_RATIO=9.5/12,Dt.MAX_FINDER_PATTERN_RATIO=12.5/14;class vi{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof vi))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Uo{constructor(n,i,o,a,u){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new se(o,u)),this.resultPoints.push(new se(a,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Uo))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class jn{constructor(){}static getRSSvalue(n,i,o){let a=0;for(let g of n)a+=g;let u=0,h=0,d=n.length;for(let g=0;g<d-1;g++){let w;for(w=1,h|=1<<g;w<n[g];w++,h&=~(1<<g)){let y=jn.combins(a-w-1,d-g-2);if(o&&h===0&&a-w-(d-g-1)>=d-g-1&&(y-=jn.combins(a-w-(d-g),d-g-2)),d-g-1>1){let C=0;for(let A=a-w-(d-g-2);A>i;A--)C+=jn.combins(a-w-A-1,d-g-3);y-=C*(d-1-g)}else a-w>i&&y--;u+=y}a-=w}return u}static combins(n,i){let o,a;n-i>i?(a=i,o=n-i):(a=n-i,o=i);let u=1,h=1;for(let d=n;d>o;d--)u*=d,h<=a&&(u/=h,h++);for(;h<=a;)u/=h,h++;return u}}class c2{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let o=12*i,a=new D(o),u=0,d=n[0].getRightChar().getValue();for(let g=11;g>=0;--g)d&1<<g&&a.set(u),u++;for(let g=1;g<n.length;++g){let w=n[g],y=w.getLeftChar().getValue();for(let C=11;C>=0;--C)y&1<<C&&a.set(u),u++;if(w.getRightChar()!=null){let C=w.getRightChar().getValue();for(let A=11;A>=0;--A)C&1<<A&&a.set(u),u++}}return a}}class Yr{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ml{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class Kt extends Ml{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Kt.FNC1}}Kt.FNC1="$";class qr extends Ml{constructor(n,i,o){super(n),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wn extends Ml{constructor(n,i,o){if(super(n),i<0||i>10||o<0||o>10)throw new B;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wn.FNC1}isSecondDigitFNC1(){return this.secondDigit===wn.FNC1}isAnyFNC1(){return this.firstDigit===wn.FNC1||this.secondDigit===wn.FNC1}}wn.FNC1=10;class ne{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new W;let i=n.substring(0,2);for(let u of ne.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===ne.VARIABLE_LENGTH?ne.processVariableAI(2,u[2],n):ne.processFixedAI(2,u[1],n);if(n.length<3)throw new W;let o=n.substring(0,3);for(let u of ne.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ne.VARIABLE_LENGTH?ne.processVariableAI(3,u[2],n):ne.processFixedAI(3,u[1],n);for(let u of ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ne.VARIABLE_LENGTH?ne.processVariableAI(4,u[2],n):ne.processFixedAI(4,u[1],n);if(n.length<4)throw new W;let a=n.substring(0,4);for(let u of ne.FOUR_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===ne.VARIABLE_LENGTH?ne.processVariableAI(4,u[2],n):ne.processFixedAI(4,u[1],n);throw new W}static processFixedAI(n,i,o){if(o.length<n)throw new W;let a=o.substring(0,n);if(o.length<n+i)throw new W;let u=o.substring(n,n+i),h=o.substring(n+i),d="("+a+")"+u,g=ne.parseFieldsInGeneralPurpose(h);return g==null?d:d+g}static processVariableAI(n,i,o){let a=o.substring(0,n),u;o.length<n+i?u=o.length:u=n+i;let h=o.substring(n,u),d=o.substring(u),g="("+a+")"+h,w=ne.parseFieldsInGeneralPurpose(d);return w==null?g:g+w}}ne.VARIABLE_LENGTH=[],ne.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ne.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ne.VARIABLE_LENGTH,20],["22",ne.VARIABLE_LENGTH,29],["30",ne.VARIABLE_LENGTH,8],["37",ne.VARIABLE_LENGTH,8],["90",ne.VARIABLE_LENGTH,30],["91",ne.VARIABLE_LENGTH,30],["92",ne.VARIABLE_LENGTH,30],["93",ne.VARIABLE_LENGTH,30],["94",ne.VARIABLE_LENGTH,30],["95",ne.VARIABLE_LENGTH,30],["96",ne.VARIABLE_LENGTH,30],["97",ne.VARIABLE_LENGTH,3],["98",ne.VARIABLE_LENGTH,30],["99",ne.VARIABLE_LENGTH,30]],ne.THREE_DIGIT_DATA_LENGTH=[["240",ne.VARIABLE_LENGTH,30],["241",ne.VARIABLE_LENGTH,30],["242",ne.VARIABLE_LENGTH,6],["250",ne.VARIABLE_LENGTH,30],["251",ne.VARIABLE_LENGTH,30],["253",ne.VARIABLE_LENGTH,17],["254",ne.VARIABLE_LENGTH,20],["400",ne.VARIABLE_LENGTH,30],["401",ne.VARIABLE_LENGTH,30],["402",17],["403",ne.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ne.VARIABLE_LENGTH,20],["421",ne.VARIABLE_LENGTH,15],["422",3],["423",ne.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ne.VARIABLE_LENGTH,15],["391",ne.VARIABLE_LENGTH,18],["392",ne.VARIABLE_LENGTH,15],["393",ne.VARIABLE_LENGTH,18],["703",ne.VARIABLE_LENGTH,30]],ne.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ne.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ne.VARIABLE_LENGTH,20],["8003",ne.VARIABLE_LENGTH,30],["8004",ne.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ne.VARIABLE_LENGTH,30],["8008",ne.VARIABLE_LENGTH,12],["8018",18],["8020",ne.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ne.VARIABLE_LENGTH,70],["8200",ne.VARIABLE_LENGTH,70]];class Ci{constructor(n){this.buffer=new pe,this.information=n}decodeAllCodes(n,i){let o=i,a=null;do{let u=this.decodeGeneralPurposeField(o,a),h=ne.parseFieldsInGeneralPurpose(u.getNewString());if(h!=null&&n.append(h),u.isRemaining()?a=""+u.getRemainingValue():a=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(n,4);return u===0?new wn(this.information.getSize(),wn.FNC1,wn.FNC1):new wn(this.information.getSize(),u-1,wn.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),o=(i-8)/11,a=(i-8)%11;return new wn(n+7,o,a)}extractNumericValueFromBitArray(n,i){return Ci.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,o){let a=0;for(let u=0;u<o;++u)n.get(i+u)&&(a|=1<<o-u-1);return a}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new qr(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new qr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(o!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new qr(this.current.getPosition(),this.buffer.toString()):i=new qr(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Yr(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new qr(this.current.getPosition(),this.buffer.toString());return new Yr(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Yr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new qr(this.current.getPosition(),this.buffer.toString());return new Yr(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Yr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new qr(this.current.getPosition(),this.buffer.toString());return new Yr(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Yr(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<116)return!0;if(n+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,8);return a>=232&&a<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new Kt(n+5,Kt.FNC1);if(i>=5&&i<15)return new Kt(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<90)return new Kt(n+7,""+(o+1));if(o>=90&&o<116)return new Kt(n+7,""+(o+7));let a=this.extractNumericValueFromBitArray(n,8),u;switch(a){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new B}return new Kt(n+8,u)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,6);return o>=16&&o<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new Kt(n+5,Kt.FNC1);if(i>=5&&i<15)return new Kt(n+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(n,6);if(o>=32&&o<58)return new Kt(n+6,""+(o+33));let a;switch(o){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Un("Decoding invalid alphanumeric value: "+o)}return new Kt(n+6,a)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class Bl{constructor(n){this.information=n,this.generalDecoder=new Ci(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Yt extends Bl{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let o=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,o)}encodeCompressedGtinWithoutAI(n,i,o){for(let a=0;a<4;++a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*a,10);u/100===0&&n.append("0"),u/10===0&&n.append("0"),n.append(u)}Yt.appendCheckDigit(n,o)}static appendCheckDigit(n,i){let o=0;for(let a=0;a<13;a++){let u=n.charAt(a+i).charCodeAt(0)-48;o+=a&1?u:3*u}o=10-o%10,o===10&&(o=0),n.append(o)}}Yt.GTIN_SIZE=40;class _i extends Yt{constructor(n){super(n)}parseInformation(){let n=new pe;n.append("(01)");let i=n.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(_i.HEADER_SIZE,4);return n.append(o),this.encodeCompressedGtinWithoutAI(n,_i.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,_i.HEADER_SIZE+44)}}_i.HEADER_SIZE=4;class jo extends Bl{constructor(n){super(n)}parseInformation(){let n=new pe;return this.getGeneralDecoder().decodeAllCodes(n,jo.HEADER_SIZE)}}jo.HEADER_SIZE=5;class Vo extends Yt{constructor(n){super(n)}encodeCompressedWeight(n,i,o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(n,a);let u=this.checkWeight(a),h=1e5;for(let d=0;d<5;++d)u/h===0&&n.append("0"),h/=10;n.append(u)}}class Vn extends Vo{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Vn.HEADER_SIZE+Vo.GTIN_SIZE+Vn.WEIGHT_SIZE)throw new W;let n=new pe;return this.encodeCompressedGtin(n,Vn.HEADER_SIZE),this.encodeCompressedWeight(n,Vn.HEADER_SIZE+Vo.GTIN_SIZE,Vn.WEIGHT_SIZE),n.toString()}}Vn.HEADER_SIZE=5,Vn.WEIGHT_SIZE=15;class h2 extends Vn{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class d2 extends Vn{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class zn extends Yt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<zn.HEADER_SIZE+Yt.GTIN_SIZE)throw new W;let n=new pe;this.encodeCompressedGtin(n,zn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(zn.HEADER_SIZE+Yt.GTIN_SIZE,zn.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(zn.HEADER_SIZE+Yt.GTIN_SIZE+zn.LAST_DIGIT_SIZE,null);return n.append(o.getNewString()),n.toString()}}zn.HEADER_SIZE=8,zn.LAST_DIGIT_SIZE=2;class jt extends Yt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<jt.HEADER_SIZE+Yt.GTIN_SIZE)throw new W;let n=new pe;this.encodeCompressedGtin(n,jt.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(jt.HEADER_SIZE+Yt.GTIN_SIZE,jt.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(jt.HEADER_SIZE+Yt.GTIN_SIZE+jt.LAST_DIGIT_SIZE,jt.FIRST_THREE_DIGITS_SIZE);o/100==0&&n.append("0"),o/10==0&&n.append("0"),n.append(o);let a=this.getGeneralDecoder().decodeGeneralPurposeField(jt.HEADER_SIZE+Yt.GTIN_SIZE+jt.LAST_DIGIT_SIZE+jt.FIRST_THREE_DIGITS_SIZE,null);return n.append(a.getNewString()),n.toString()}}jt.HEADER_SIZE=8,jt.LAST_DIGIT_SIZE=2,jt.FIRST_THREE_DIGITS_SIZE=10;class Ye extends Vo{constructor(n,i,o){super(n),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Ye.HEADER_SIZE+Ye.GTIN_SIZE+Ye.WEIGHT_SIZE+Ye.DATE_SIZE)throw new W;let n=new pe;return this.encodeCompressedGtin(n,Ye.HEADER_SIZE),this.encodeCompressedWeight(n,Ye.HEADER_SIZE+Ye.GTIN_SIZE,Ye.WEIGHT_SIZE),this.encodeCompressedDate(n,Ye.HEADER_SIZE+Ye.GTIN_SIZE+Ye.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Ye.DATE_SIZE);if(o==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let a=o%32;o/=32;let u=o%12+1;o/=12;let h=o;h/10==0&&n.append("0"),n.append(h),u/10==0&&n.append("0"),n.append(u),a/10==0&&n.append("0"),n.append(a)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}Ye.HEADER_SIZE=8,Ye.WEIGHT_SIZE=20,Ye.DATE_SIZE=16;function rh(v){try{if(v.get(1))return new _i(v);if(!v.get(2))return new jo(v);switch(Ci.extractNumericValueFromBitArray(v,1,4)){case 4:return new h2(v);case 5:return new d2(v)}switch(Ci.extractNumericValueFromBitArray(v,1,5)){case 12:return new zn(v);case 13:return new jt(v)}switch(Ci.extractNumericValueFromBitArray(v,1,7)){case 56:return new Ye(v,"310","11");case 57:return new Ye(v,"320","11");case 58:return new Ye(v,"310","13");case 59:return new Ye(v,"320","13");case 60:return new Ye(v,"310","15");case 61:return new Ye(v,"320","15");case 62:return new Ye(v,"310","17");case 63:return new Ye(v,"320","17")}}catch(n){throw console.log(n),new Un("unknown decoder: "+v)}}class pr{constructor(n,i,o,a){this.leftchar=n,this.rightchar=i,this.finderpattern=o,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof pr?pr.equalsOrNull(n.leftchar,i.leftchar)&&pr.equalsOrNull(n.rightchar,i.rightchar)&&pr.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:pr.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ll{constructor(n,i,o){this.pairs=n,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof Ll?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let o;return n.forEach((a,u)=>{i.forEach(h=>{a.getLeftChar().getValue()===h.getLeftChar().getValue()&&a.getRightChar().getValue()===h.getRightChar().getValue()&&a.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(o=!0)})}),o}}class K extends Dt{constructor(n){super(...arguments),this.pairs=new Array(K.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,o){this.pairs.length=0,this.startFromEven=!1;try{return K.constructResult(this.decodeRow2pairs(n,i))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,K.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(u){if(u instanceof W){if(!this.pairs.length)throw new W;o=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(n,!1),a){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new W}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let o=i;o<this.rows.length;o++){let a=this.rows[o];this.pairs.length=0;for(let h of n)this.pairs.push(h.getPairs());if(this.pairs.push(a.getPairs()),!K.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(n);u.push(a);try{return this.checkRows(u,o+1)}catch(h){this.verbose&&console.log(h)}}throw new W}static isValidSequence(n){for(let i of K.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let o=!0;for(let a=0;a<n.length;a++)if(n[a].getFinderPattern().getValue()!=i[a]){o=!1;break}if(o)return!0}return!1}storeRow(n,i){let o=0,a=!1,u=!1;for(;o<this.rows.length;){let h=this.rows[o];if(h.getRowNumber()>n){u=h.isEquivalent(this.pairs);break}a=h.isEquivalent(this.pairs),o++}u||a||K.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Ll(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let o of i)if(o.getPairs().length!==n.length){for(let a of o.getPairs())for(let u of n)if(pr.equals(a,u))break}}static isPartialRow(n,i){for(let o of i){let a=!0;for(let u of n){let h=!1;for(let d of o.getPairs())if(u.equals(d)){h=!0;break}if(!h){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=c2.buildBitArray(n),a=rh(i).parseInformation(),u=n[0].getFinderPattern().getResultPoints(),h=n[n.length-1].getFinderPattern().getResultPoints(),d=[u[0],u[1],h[0],h[1]];return new Ze(a,null,null,d,oe.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),o=n.getRightChar();if(o==null)return!1;let a=o.getChecksumPortion(),u=2;for(let d=1;d<this.pairs.size();++d){let g=this.pairs.get(d);a+=g.getLeftChar().getChecksumPortion(),u++;let w=g.getRightChar();w!=null&&(a+=w.getChecksumPortion(),u++)}return a%=211,211*(u-4)+a==i.getValue()}static getNextSecondBar(n,i){let o;return n.get(i)?(o=n.getNextUnset(i),o=n.getNextSet(o)):(o=n.getNextSet(i),o=n.getNextUnset(o)),o}retrieveNextPair(n,i,o){let a=i.length%2==0;this.startFromEven&&(a=!a);let u,h=!0,d=-1;do this.findNextPair(n,i,d),u=this.parseFoundFinderPattern(n,o,a),u==null?d=K.getNextSecondBar(n,this.startEnd[0]):h=!1;while(h);let g=this.decodeDataCharacter(n,u,a,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new W;let w;try{w=this.decodeDataCharacter(n,u,a,!1)}catch(y){w=null,this.verbose&&console.log(y)}return new pr(g,w,u,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=n.getSize(),h;o>=0?h=o:this.isEmptyPair(i)?h=0:h=i[i.length-1].getFinderPattern().getStartEnd()[1];let d=i.length%2!=0;this.startFromEven&&(d=!d);let g=!1;for(;h<u&&(g=!n.get(h),!!g);)h++;let w=0,y=h;for(let C=h;C<u;C++)if(n.get(C)!=g)a[w]++;else{if(w==3){if(d&&K.reverseCounters(a),K.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=C;return}d&&K.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,w--}else w++;a[w]=1,g=!g}throw new W}static reverseCounters(n){let i=n.length;for(let o=0;o<i/2;++o){let a=n[o];n[o]=n[i-o-1],n[i-o-1]=a}}parseFoundFinderPattern(n,i,o){let a,u,h;if(o){let w=this.startEnd[0]-1;for(;w>=0&&!n.get(w);)w--;w++,a=this.startEnd[0]-w,u=w,h=this.startEnd[1]}else u=this.startEnd[0],h=n.getNextUnset(this.startEnd[1]+1),a=h-this.startEnd[1];let d=this.getDecodeFinderCounters();L.arraycopy(d,0,d,1,d.length-1),d[0]=a;let g;try{g=this.parseFinderValue(d,K.FINDER_PATTERNS)}catch{return null}return new Uo(g,[u,h],u,h,i)}decodeDataCharacter(n,i,o,a){let u=this.getDataCharacterCounters();for(let Ue=0;Ue<u.length;Ue++)u[Ue]=0;if(a)K.recordPatternInReverse(n,i.getStartEnd()[0],u);else{K.recordPattern(n,i.getStartEnd()[1],u);for(let Ue=0,Tt=u.length-1;Ue<Tt;Ue++,Tt--){let on=u[Ue];u[Ue]=u[Tt],u[Tt]=on}}let h=17,d=be.sum(new Int32Array(u))/h,g=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(d-g)/g>.3)throw new W;let w=this.getOddCounts(),y=this.getEvenCounts(),C=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let Ue=0;Ue<u.length;Ue++){let Tt=1*u[Ue]/d,on=Tt+.5;if(on<1){if(Tt<.3)throw new W;on=1}else if(on>8){if(Tt>8.7)throw new W;on=8}let Ti=Ue/2;Ue&1?(y[Ti]=on,A[Ti]=Tt-on):(w[Ti]=on,C[Ti]=Tt-on)}this.adjustOddEvenCounts(h);let N=4*i.getValue()+(o?0:2)+(a?0:1)-1,k=0,M=0;for(let Ue=w.length-1;Ue>=0;Ue--){if(K.isNotA1left(i,o,a)){let Tt=K.WEIGHTS[N][2*Ue];M+=w[Ue]*Tt}k+=w[Ue]}let U=0;for(let Ue=y.length-1;Ue>=0;Ue--)if(K.isNotA1left(i,o,a)){let Tt=K.WEIGHTS[N][2*Ue+1];U+=y[Ue]*Tt}let H=M+U;if(k&1||k>13||k<4)throw new W;let Q=(13-k)/2,J=K.SYMBOL_WIDEST[Q],q=9-J,_e=jn.getRSSvalue(w,J,!0),me=jn.getRSSvalue(y,q,!1),Zt=K.EVEN_TOTAL_SUBSET[Q],Tn=K.GSUM[Q],Qt=_e*Zt+me+Tn;return new vi(Qt,H)}static isNotA1left(n,i,o){return!(n.getValue()==0&&i&&o)}adjustOddEvenCounts(n){let i=be.sum(new Int32Array(this.getOddCounts())),o=be.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1;i>13?u=!0:i<4&&(a=!0);let h=!1,d=!1;o>13?d=!0:o<4&&(h=!0);let g=i+o-n,w=(i&1)==1,y=(o&1)==0;if(g==1)if(w){if(y)throw new W;u=!0}else{if(!y)throw new W;d=!0}else if(g==-1)if(w){if(y)throw new W;a=!0}else{if(!y)throw new W;h=!0}else if(g==0){if(w){if(!y)throw new W;i<o?(a=!0,d=!0):(u=!0,h=!0)}else if(y)throw new W}else throw new W;if(a){if(u)throw new W;K.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&K.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(d)throw new W;K.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&K.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}K.SYMBOL_WIDEST=[7,5,4,3,1],K.EVEN_TOTAL_SUBSET=[4,20,52,104,204],K.GSUM=[0,348,1388,2948,3988],K.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],K.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],K.FINDER_PAT_A=0,K.FINDER_PAT_B=1,K.FINDER_PAT_C=2,K.FINDER_PAT_D=3,K.FINDER_PAT_E=4,K.FINDER_PAT_F=5,K.FINDER_PATTERN_SEQUENCES=[[K.FINDER_PAT_A,K.FINDER_PAT_A],[K.FINDER_PAT_A,K.FINDER_PAT_B,K.FINDER_PAT_B],[K.FINDER_PAT_A,K.FINDER_PAT_C,K.FINDER_PAT_B,K.FINDER_PAT_D],[K.FINDER_PAT_A,K.FINDER_PAT_E,K.FINDER_PAT_B,K.FINDER_PAT_D,K.FINDER_PAT_C],[K.FINDER_PAT_A,K.FINDER_PAT_E,K.FINDER_PAT_B,K.FINDER_PAT_D,K.FINDER_PAT_D,K.FINDER_PAT_F],[K.FINDER_PAT_A,K.FINDER_PAT_E,K.FINDER_PAT_B,K.FINDER_PAT_D,K.FINDER_PAT_E,K.FINDER_PAT_F,K.FINDER_PAT_F],[K.FINDER_PAT_A,K.FINDER_PAT_A,K.FINDER_PAT_B,K.FINDER_PAT_B,K.FINDER_PAT_C,K.FINDER_PAT_C,K.FINDER_PAT_D,K.FINDER_PAT_D],[K.FINDER_PAT_A,K.FINDER_PAT_A,K.FINDER_PAT_B,K.FINDER_PAT_B,K.FINDER_PAT_C,K.FINDER_PAT_C,K.FINDER_PAT_D,K.FINDER_PAT_E,K.FINDER_PAT_E],[K.FINDER_PAT_A,K.FINDER_PAT_A,K.FINDER_PAT_B,K.FINDER_PAT_B,K.FINDER_PAT_C,K.FINDER_PAT_C,K.FINDER_PAT_D,K.FINDER_PAT_E,K.FINDER_PAT_F,K.FINDER_PAT_F],[K.FINDER_PAT_A,K.FINDER_PAT_A,K.FINDER_PAT_B,K.FINDER_PAT_B,K.FINDER_PAT_C,K.FINDER_PAT_D,K.FINDER_PAT_D,K.FINDER_PAT_E,K.FINDER_PAT_E,K.FINDER_PAT_F,K.FINDER_PAT_F]],K.MAX_PAIRS=11;class f2 extends vi{constructor(n,i,o){super(n,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class it extends Dt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,o){const a=this.decodePair(i,!1,n,o);it.addOrTally(this.possibleLeftPairs,a),i.reverse();let u=this.decodePair(i,!0,n,o);it.addOrTally(this.possibleRightPairs,u),i.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&it.checkChecksum(h,d))return it.constructResult(h,d)}throw new W}static addOrTally(n,i){if(i==null)return;let o=!1;for(let a of n)if(a.getValue()===i.getValue()){a.incrementCount(),o=!0;break}o||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let o=4537077*n.getValue()+i.getValue(),a=new String(o).toString(),u=new pe;for(let w=13-a.length;w>0;w--)u.append("0");u.append(a);let h=0;for(let w=0;w<13;w++){let y=u.charAt(w).charCodeAt(0)-48;h+=w&1?y:3*y}h=10-h%10,h===10&&(h=0),u.append(h.toString());let d=n.getFinderPattern().getResultPoints(),g=i.getFinderPattern().getResultPoints();return new Ze(u.toString(),null,0,[d[0],d[1],g[0],g[1]],oe.RSS_14,new Date().getTime())}static checkChecksum(n,i){let o=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,a=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a}decodePair(n,i,o,a){try{let u=this.findFinderPattern(n,i),h=this.parseFoundFinderPattern(n,o,i,u),d=a==null?null:a.get(V.NEED_RESULT_POINT_CALLBACK);if(d!=null){let y=(u[0]+u[1])/2;i&&(y=n.getSize()-1-y),d.foundPossibleResultPoint(new se(y,o))}let g=this.decodeDataCharacter(n,h,!0),w=this.decodeDataCharacter(n,h,!1);return new f2(1597*g.getValue()+w.getValue(),g.getChecksumPortion()+4*w.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(n,i,o){let a=this.getDataCharacterCounters();for(let U=0;U<a.length;U++)a[U]=0;if(o)ht.recordPatternInReverse(n,i.getStartEnd()[0],a);else{ht.recordPattern(n,i.getStartEnd()[1]+1,a);for(let U=0,H=a.length-1;U<H;U++,H--){let Q=a[U];a[U]=a[H],a[H]=Q}}let u=o?16:15,h=be.sum(new Int32Array(a))/u,d=this.getOddCounts(),g=this.getEvenCounts(),w=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors();for(let U=0;U<a.length;U++){let H=a[U]/h,Q=Math.floor(H+.5);Q<1?Q=1:Q>8&&(Q=8);let J=Math.floor(U/2);U&1?(g[J]=Q,y[J]=H-Q):(d[J]=Q,w[J]=H-Q)}this.adjustOddEvenCounts(o,u);let C=0,A=0;for(let U=d.length-1;U>=0;U--)A*=9,A+=d[U],C+=d[U];let N=0,k=0;for(let U=g.length-1;U>=0;U--)N*=9,N+=g[U],k+=g[U];let M=A+3*N;if(o){if(C&1||C>12||C<4)throw new W;let U=(12-C)/2,H=it.OUTSIDE_ODD_WIDEST[U],Q=9-H,J=jn.getRSSvalue(d,H,!1),q=jn.getRSSvalue(g,Q,!0),_e=it.OUTSIDE_EVEN_TOTAL_SUBSET[U],me=it.OUTSIDE_GSUM[U];return new vi(J*_e+q+me,M)}else{if(k&1||k>10||k<4)throw new W;let U=(10-k)/2,H=it.INSIDE_ODD_WIDEST[U],Q=9-H,J=jn.getRSSvalue(d,H,!0),q=jn.getRSSvalue(g,Q,!1),_e=it.INSIDE_ODD_TOTAL_SUBSET[U],me=it.INSIDE_GSUM[U];return new vi(q*_e+J+me,M)}}findFinderPattern(n,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=n.getSize(),u=!1,h=0;for(;h<a&&(u=!n.get(h),i!==u);)h++;let d=0,g=h;for(let w=h;w<a;w++)if(n.get(w)!==u)o[d]++;else{if(d===3){if(Dt.isFinderPattern(o))return[g,w];g+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,d--}else d++;o[d]=1,u=!u}throw new W}parseFoundFinderPattern(n,i,o,a){let u=n.get(a[0]),h=a[0]-1;for(;h>=0&&u!==n.get(h);)h--;h++;const d=a[0]-h,g=this.getDecodeFinderCounters(),w=new Int32Array(g.length);L.arraycopy(g,0,w,1,g.length-1),w[0]=d;const y=this.parseFinderValue(w,it.FINDER_PATTERNS);let C=h,A=a[1];return o&&(C=n.getSize()-1-C,A=n.getSize()-1-A),new Uo(y,[h,a[1]],C,A,i)}adjustOddEvenCounts(n,i){let o=be.sum(new Int32Array(this.getOddCounts())),a=be.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1,d=!1,g=!1;n?(o>12?h=!0:o<4&&(u=!0),a>12?g=!0:a<4&&(d=!0)):(o>11?h=!0:o<5&&(u=!0),a>10?g=!0:a<4&&(d=!0));let w=o+a-i,y=(o&1)===(n?1:0),C=(a&1)===1;if(w===1)if(y){if(C)throw new W;h=!0}else{if(!C)throw new W;g=!0}else if(w===-1)if(y){if(C)throw new W;u=!0}else{if(!C)throw new W;d=!0}else if(w===0){if(y){if(!C)throw new W;o<a?(u=!0,g=!0):(h=!0,d=!0)}else if(C)throw new W}else throw new W;if(u){if(h)throw new W;Dt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Dt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(g)throw new W;Dt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Dt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}it.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],it.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],it.OUTSIDE_GSUM=[0,161,961,2015,2715],it.INSIDE_GSUM=[0,336,1036,1516],it.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],it.INSIDE_ODD_WIDEST=[2,4,6,8],it.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ai extends ht{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const o=n?n.get(V.POSSIBLE_FORMATS):null,a=n&&n.get(V.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(oe.EAN_13)||o.includes(oe.UPC_A)||o.includes(oe.EAN_8)||o.includes(oe.UPC_E))&&this.readers.push(new Pl(n)),o.includes(oe.CODE_39)&&this.readers.push(new ft(a)),o.includes(oe.CODE_128)&&this.readers.push(new ee),o.includes(oe.ITF)&&this.readers.push(new Le),o.includes(oe.RSS_14)&&this.readers.push(new it),o.includes(oe.RSS_EXPANDED)&&this.readers.push(new K(this.verbose))):(this.readers.push(new Pl(n)),this.readers.push(new ft),this.readers.push(new Pl(n)),this.readers.push(new ee),this.readers.push(new Le),this.readers.push(new it),this.readers.push(new K(this.verbose)))}decodeRow(n,i,o){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(n,i,o)}catch{}throw new W}reset(){this.readers.forEach(n=>n.reset())}}class g2 extends pn{constructor(n=500,i){super(new Ai(i),n,i)}}class Pe{constructor(n,i,o){this.ecCodewords=n,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class De{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ae{constructor(n,i,o,a,u,h){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=u,this.ecBlocks=h;let d=0;const g=h.getECCodewords(),w=h.getECBlocks();for(let y of w)d+=y.getCount()*(y.getDataCodewords()+g);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if(n&1||i&1)throw new B;for(let o of Ae.VERSIONS)if(o.symbolSizeRows===n&&o.symbolSizeColumns===i)return o;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Ae(1,10,10,8,8,new Pe(5,new De(1,3))),new Ae(2,12,12,10,10,new Pe(7,new De(1,5))),new Ae(3,14,14,12,12,new Pe(10,new De(1,8))),new Ae(4,16,16,14,14,new Pe(12,new De(1,12))),new Ae(5,18,18,16,16,new Pe(14,new De(1,18))),new Ae(6,20,20,18,18,new Pe(18,new De(1,22))),new Ae(7,22,22,20,20,new Pe(20,new De(1,30))),new Ae(8,24,24,22,22,new Pe(24,new De(1,36))),new Ae(9,26,26,24,24,new Pe(28,new De(1,44))),new Ae(10,32,32,14,14,new Pe(36,new De(1,62))),new Ae(11,36,36,16,16,new Pe(42,new De(1,86))),new Ae(12,40,40,18,18,new Pe(48,new De(1,114))),new Ae(13,44,44,20,20,new Pe(56,new De(1,144))),new Ae(14,48,48,22,22,new Pe(68,new De(1,174))),new Ae(15,52,52,24,24,new Pe(42,new De(2,102))),new Ae(16,64,64,14,14,new Pe(56,new De(2,140))),new Ae(17,72,72,16,16,new Pe(36,new De(4,92))),new Ae(18,80,80,18,18,new Pe(48,new De(4,114))),new Ae(19,88,88,20,20,new Pe(56,new De(4,144))),new Ae(20,96,96,22,22,new Pe(68,new De(4,174))),new Ae(21,104,104,24,24,new Pe(56,new De(6,136))),new Ae(22,120,120,18,18,new Pe(68,new De(6,175))),new Ae(23,132,132,20,20,new Pe(62,new De(8,163))),new Ae(24,144,144,22,22,new Pe(62,new De(8,156),new De(2,155))),new Ae(25,8,18,6,16,new Pe(7,new De(1,5))),new Ae(26,8,32,6,14,new Pe(11,new De(1,10))),new Ae(27,12,26,10,24,new Pe(14,new De(1,16))),new Ae(28,12,36,10,16,new Pe(18,new De(1,22))),new Ae(29,16,36,14,16,new Pe(24,new De(1,32))),new Ae(30,16,48,14,22,new Pe(28,new De(1,49)))]}}Ae.VERSIONS=Ae.buildVersions();class Fl{constructor(n){const i=n.getHeight();if(i<8||i>144||i&1)throw new B;this.version=Fl.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new lt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),o=n.getWidth();return Ae.getVersionForDimensions(i,o)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,a=0;const u=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let d=!1,g=!1,w=!1,y=!1;do if(o===u&&a===0&&!d)n[i++]=this.readCorner1(u,h)&255,o-=2,a+=2,d=!0;else if(o===u-2&&a===0&&h&3&&!g)n[i++]=this.readCorner2(u,h)&255,o-=2,a+=2,g=!0;else if(o===u+4&&a===2&&!(h&7)&&!w)n[i++]=this.readCorner3(u,h)&255,o-=2,a+=2,w=!0;else if(o===u-2&&a===0&&(h&7)===4&&!y)n[i++]=this.readCorner4(u,h)&255,o-=2,a+=2,y=!0;else{do o<u&&a>=0&&!this.readMappingMatrix.get(a,o)&&(n[i++]=this.readUtah(o,a,u,h)&255),o-=2,a+=2;while(o>=0&&a<h);o+=1,a+=3;do o>=0&&a<h&&!this.readMappingMatrix.get(a,o)&&(n[i++]=this.readUtah(o,a,u,h)&255),o+=2,a-=2;while(o<u&&a>=0);o+=3,a+=1}while(o<u||a<h);if(i!==this.version.getTotalCodewords())throw new B;return n}readModule(n,i,o,a){return n<0&&(n+=o,i+=4-(o+4&7)),i<0&&(i+=a,n+=4-(a+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,o,a){let u=0;return this.readModule(n-2,i-2,o,a)&&(u|=1),u<<=1,this.readModule(n-2,i-1,o,a)&&(u|=1),u<<=1,this.readModule(n-1,i-2,o,a)&&(u|=1),u<<=1,this.readModule(n-1,i-1,o,a)&&(u|=1),u<<=1,this.readModule(n-1,i,o,a)&&(u|=1),u<<=1,this.readModule(n,i-2,o,a)&&(u|=1),u<<=1,this.readModule(n,i-1,o,a)&&(u|=1),u<<=1,this.readModule(n,i,o,a)&&(u|=1),u}readCorner1(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,1,n,i)&&(o|=1),o<<=1,this.readModule(n-1,2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}readCorner2(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-4,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner3(n,i){let o=0;return this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(0,i-3,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-3,n,i)&&(o|=1),o<<=1,this.readModule(1,i-2,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o}readCorner4(n,i){let o=0;return this.readModule(n-3,0,n,i)&&(o|=1),o<<=1,this.readModule(n-2,0,n,i)&&(o|=1),o<<=1,this.readModule(n-1,0,n,i)&&(o|=1),o<<=1,this.readModule(0,i-2,n,i)&&(o|=1),o<<=1,this.readModule(0,i-1,n,i)&&(o|=1),o<<=1,this.readModule(1,i-1,n,i)&&(o|=1),o<<=1,this.readModule(2,i-1,n,i)&&(o|=1),o<<=1,this.readModule(3,i-1,n,i)&&(o|=1),o}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new _("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),h=i/a|0,d=o/u|0,g=h*a,w=d*u,y=new lt(w,g);for(let C=0;C<h;++C){const A=C*a;for(let N=0;N<d;++N){const k=N*u;for(let M=0;M<a;++M){const U=C*(a+2)+1+M,H=A+M;for(let Q=0;Q<u;++Q){const J=N*(u+2)+1+Q;if(n.get(J,U)){const q=k+Q;y.set(q,H)}}}}}return y}}class Ul{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const o=i.getECBlocks();let a=0;const u=o.getECBlocks();for(let M of u)a+=M.getCount();const h=new Array(a);let d=0;for(let M of u)for(let U=0;U<M.getCount();U++){const H=M.getDataCodewords(),Q=o.getECCodewords()+H;h[d++]=new Ul(H,new Uint8Array(Q))}const w=h[0].codewords.length-o.getECCodewords(),y=w-1;let C=0;for(let M=0;M<y;M++)for(let U=0;U<d;U++)h[U].codewords[M]=n[C++];const A=i.getVersionNumber()===24,N=A?8:d;for(let M=0;M<N;M++)h[M].codewords[w-1]=n[C++];const k=h[0].codewords.length;for(let M=w;M<k;M++)for(let U=0;U<d;U++){const H=A?(U+8)%d:U,Q=A&&H>7?M-1:M;h[H].codewords[Q]=n[C++]}if(C!==n.length)throw new _;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class jl{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new _(""+n);let i=0,o=this.bitOffset,a=this.byteOffset;const u=this.bytes;if(o>0){const h=8-o,d=n<h?n:h,g=h-d,w=255>>8-d<<g;i=(u[a]&w)>>g,n-=d,o+=d,o===8&&(o=0,a++)}if(n>0){for(;n>=8;)i=i<<8|u[a]&255,a++,n-=8;if(n>0){const h=8-n,d=255>>h<<h;i=i<<n|(u[a]&d)>>h,o+=n}}return this.bitOffset=o,this.byteOffset=a,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var gt;(function(v){v[v.PAD_ENCODE=0]="PAD_ENCODE",v[v.ASCII_ENCODE=1]="ASCII_ENCODE",v[v.C40_ENCODE=2]="C40_ENCODE",v[v.TEXT_ENCODE=3]="TEXT_ENCODE",v[v.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",v[v.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",v[v.BASE256_ENCODE=6]="BASE256_ENCODE"})(gt||(gt={}));class wr{static decode(n){const i=new jl(n),o=new pe,a=new pe,u=new Array;let h=gt.ASCII_ENCODE;do if(h===gt.ASCII_ENCODE)h=this.decodeAsciiSegment(i,o,a);else{switch(h){case gt.C40_ENCODE:this.decodeC40Segment(i,o);break;case gt.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case gt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case gt.BASE256_ENCODE:this.decodeBase256Segment(i,o,u);break;default:throw new B}h=gt.ASCII_ENCODE}while(h!==gt.PAD_ENCODE&&i.available()>0);return a.length()>0&&o.append(a.toString()),new Es(n,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(n,i,o){let a=!1;do{let u=n.readBits(8);if(u===0)throw new B;if(u<=128)return a&&(u+=128),i.append(String.fromCharCode(u-1)),gt.ASCII_ENCODE;if(u===129)return gt.PAD_ENCODE;if(u<=229){const h=u-130;h<10&&i.append("0"),i.append(""+h)}else switch(u){case 230:return gt.C40_ENCODE;case 231:return gt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return gt.ANSIX12_ENCODE;case 239:return gt.TEXT_ENCODE;case 240:return gt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||n.available()!==0)throw new B;break}}while(n.available()>0);return gt.ASCII_ENCODE}static decodeC40Segment(n,i){let o=!1;const a=[];let u=0;do{if(n.available()===8)return;const h=n.readBits(8);if(h===254)return;this.parseTwoBytes(h,n.readBits(8),a);for(let d=0;d<3;d++){const g=a[d];switch(u){case 0:if(g<3)u=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[g];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else throw new B;break;case 1:o?(i.append(String.fromCharCode(g+128)),o=!1):i.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[g];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else switch(g){case 27:i.append("");break;case 30:o=!0;break;default:throw new B}u=0;break;case 3:o?(i.append(String.fromCharCode(g+224)),o=!1):i.append(String.fromCharCode(g+96)),u=0;break;default:throw new B}}}while(n.available()>0)}static decodeTextSegment(n,i){let o=!1,a=[],u=0;do{if(n.available()===8)return;const h=n.readBits(8);if(h===254)return;this.parseTwoBytes(h,n.readBits(8),a);for(let d=0;d<3;d++){const g=a[d];switch(u){case 0:if(g<3)u=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[g];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else throw new B;break;case 1:o?(i.append(String.fromCharCode(g+128)),o=!1):i.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[g];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w)}else switch(g){case 27:i.append("");break;case 30:o=!0;break;default:throw new B}u=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[g];o?(i.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):i.append(w),u=0}else throw new B;break;default:throw new B}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const o=[];do{if(n.available()===8)return;const a=n.readBits(8);if(a===254)return;this.parseTwoBytes(a,n.readBits(8),o);for(let u=0;u<3;u++){const h=o[u];switch(h){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(h<14)i.append(String.fromCharCode(h+44));else if(h<40)i.append(String.fromCharCode(h+51));else throw new B;break}}}while(n.available()>0)}static parseTwoBytes(n,i,o){let a=(n<<8)+i-1,u=Math.floor(a/1600);o[0]=u,a-=u*1600,u=Math.floor(a/40),o[1]=u,o[2]=a-u*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let o=0;o<4;o++){let a=n.readBits(6);if(a===31){const u=8-n.getBitOffset();u!==8&&n.readBits(u);return}a&32||(a|=64),i.append(String.fromCharCode(a))}}while(n.available()>0)}static decodeBase256Segment(n,i,o){let a=1+n.getByteOffset();const u=this.unrandomize255State(n.readBits(8),a++);let h;if(u===0?h=n.available()/8|0:u<250?h=u:h=250*(u-249)+this.unrandomize255State(n.readBits(8),a++),h<0)throw new B;const d=new Uint8Array(h);for(let g=0;g<h;g++){if(n.available()<8)throw new B;d[g]=this.unrandomize255State(n.readBits(8),a++)}o.push(d);try{i.append(Re.decode(d,ae.ISO88591))}catch(g){throw new Un("Platform does not support required encoding: "+g.message)}}static unrandomize255State(n,i){const o=149*i%255+1,a=n-o;return a>=0?a:a+256}}wr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],wr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],wr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],wr.TEXT_SHIFT2_SET_CHARS=wr.C40_SHIFT2_SET_CHARS,wr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class p2{constructor(){this.rsDecoder=new Cs(Oe.DATA_MATRIX_FIELD_256)}decode(n){const i=new Fl(n),o=i.getVersion(),a=i.readCodewords(),u=Ul.getDataBlocks(a,o);let h=0;for(let w of u)h+=w.getNumDataCodewords();const d=new Uint8Array(h),g=u.length;for(let w=0;w<g;w++){const y=u[w],C=y.getCodewords(),A=y.getNumDataCodewords();this.correctErrors(C,A);for(let N=0;N<A;N++)d[N*g+w]=C[N]}return wr.decode(d)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new O}for(let a=0;a<i;a++)n[a]=o[a]}}class ut{constructor(n){this.image=n,this.rectangleDetector=new Jn(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new W;i=this.shiftToModuleCenter(i);const o=i[0],a=i[1],u=i[2],h=i[3];let d=this.transitionsBetween(o,h)+1,g=this.transitionsBetween(u,h)+1;(d&1)===1&&(d+=1),(g&1)===1&&(g+=1),4*d<7*g&&4*g<7*d&&(d=g=Math.max(d,g));let w=ut.sampleGrid(this.image,o,a,u,h,d,g);return new Lo(w,[o,a,u,h])}static shiftPoint(n,i,o){let a=(i.getX()-n.getX())/(o+1),u=(i.getY()-n.getY())/(o+1);return new se(n.getX()+a,n.getY()+u)}static moveAway(n,i,o){let a=n.getX(),u=n.getY();return a<i?a-=1:a+=1,u<o?u-=1:u+=1,new se(a,u)}detectSolid1(n){let i=n[0],o=n[1],a=n[3],u=n[2],h=this.transitionsBetween(i,o),d=this.transitionsBetween(o,a),g=this.transitionsBetween(a,u),w=this.transitionsBetween(u,i),y=h,C=[u,i,o,a];return y>d&&(y=d,C[0]=i,C[1]=o,C[2]=a,C[3]=u),y>g&&(y=g,C[0]=o,C[1]=a,C[2]=u,C[3]=i),y>w&&(C[0]=a,C[1]=u,C[2]=i,C[3]=o),C}detectSolid2(n){let i=n[0],o=n[1],a=n[2],u=n[3],h=this.transitionsBetween(i,u),d=ut.shiftPoint(o,a,(h+1)*4),g=ut.shiftPoint(a,o,(h+1)*4),w=this.transitionsBetween(d,i),y=this.transitionsBetween(g,u);return w<y?(n[0]=i,n[1]=o,n[2]=a,n[3]=u):(n[0]=o,n[1]=a,n[2]=u,n[3]=i),n}correctTopRight(n){let i=n[0],o=n[1],a=n[2],u=n[3],h=this.transitionsBetween(i,u),d=this.transitionsBetween(o,u),g=ut.shiftPoint(i,o,(d+1)*4),w=ut.shiftPoint(a,o,(h+1)*4);h=this.transitionsBetween(g,u),d=this.transitionsBetween(w,u);let y=new se(u.getX()+(a.getX()-o.getX())/(h+1),u.getY()+(a.getY()-o.getY())/(h+1)),C=new se(u.getX()+(i.getX()-o.getX())/(d+1),u.getY()+(i.getY()-o.getY())/(d+1));if(!this.isValid(y))return this.isValid(C)?C:null;if(!this.isValid(C))return y;let A=this.transitionsBetween(g,y)+this.transitionsBetween(w,y),N=this.transitionsBetween(g,C)+this.transitionsBetween(w,C);return A>N?y:C}shiftToModuleCenter(n){let i=n[0],o=n[1],a=n[2],u=n[3],h=this.transitionsBetween(i,u)+1,d=this.transitionsBetween(a,u)+1,g=ut.shiftPoint(i,o,d*4),w=ut.shiftPoint(a,o,h*4);h=this.transitionsBetween(g,u)+1,d=this.transitionsBetween(w,u)+1,(h&1)===1&&(h+=1),(d&1)===1&&(d+=1);let y=(i.getX()+o.getX()+a.getX()+u.getX())/4,C=(i.getY()+o.getY()+a.getY()+u.getY())/4;i=ut.moveAway(i,y,C),o=ut.moveAway(o,y,C),a=ut.moveAway(a,y,C),u=ut.moveAway(u,y,C);let A,N;return g=ut.shiftPoint(i,o,d*4),g=ut.shiftPoint(g,u,h*4),A=ut.shiftPoint(o,i,d*4),A=ut.shiftPoint(A,a,h*4),w=ut.shiftPoint(a,u,d*4),w=ut.shiftPoint(w,o,h*4),N=ut.shiftPoint(u,a,d*4),N=ut.shiftPoint(N,i,h*4),[g,A,w,N]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,o,a,u,h,d){return gr.getInstance().sampleGrid(n,h,d,.5,.5,h-.5,.5,h-.5,d-.5,.5,d-.5,i.getX(),i.getY(),u.getX(),u.getY(),a.getX(),a.getY(),o.getX(),o.getY())}transitionsBetween(n,i){let o=Math.trunc(n.getX()),a=Math.trunc(n.getY()),u=Math.trunc(i.getX()),h=Math.trunc(i.getY()),d=Math.abs(h-a)>Math.abs(u-o);if(d){let M=o;o=a,a=M,M=u,u=h,h=M}let g=Math.abs(u-o),w=Math.abs(h-a),y=-g/2,C=a<h?1:-1,A=o<u?1:-1,N=0,k=this.image.get(d?a:o,d?o:a);for(let M=o,U=a;M!==u;M+=A){let H=this.image.get(d?U:M,d?M:U);if(H!==k&&(N++,k=H),y+=w,y>0){if(U===h)break;U+=C,y-=g}}return N}}class mr{constructor(){this.decoder=new p2}decode(n,i=null){let o,a;if(i!=null&&i.has(V.PURE_BARCODE)){const w=mr.extractPureBits(n.getBlackMatrix());o=this.decoder.decode(w),a=mr.NO_POINTS}else{const w=new ut(n.getBlackMatrix()).detect();o=this.decoder.decode(w.getBits()),a=w.getPoints()}const u=o.getRawBytes(),h=new Ze(o.getText(),u,8*u.length,a,oe.DATA_MATRIX,L.currentTimeMillis()),d=o.getByteSegments();d!=null&&h.putMetadata(Et.BYTE_SEGMENTS,d);const g=o.getECLevel();return g!=null&&h.putMetadata(Et.ERROR_CORRECTION_LEVEL,g),h}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i==null||o==null)throw new W;const a=this.moduleSize(i,n);let u=i[1];const h=o[1];let d=i[0];const w=(o[0]-d+1)/a,y=(h-u+1)/a;if(w<=0||y<=0)throw new W;const C=a/2;u+=C,d+=C;const A=new lt(w,y);for(let N=0;N<y;N++){const k=u+N*a;for(let M=0;M<w;M++)n.get(d+M*a,k)&&A.set(M,N)}return A}static moduleSize(n,i){const o=i.getWidth();let a=n[0];const u=n[1];for(;a<o&&i.get(a,u);)a++;if(a===o)throw new W;const h=a-n[0];if(h===0)throw new W;return h}}mr.NO_POINTS=[];class w2 extends pn{constructor(n=500){super(new mr,n)}}var Si;(function(v){v[v.L=0]="L",v[v.M=1]="M",v[v.Q=2]="Q",v[v.H=3]="H"})(Si||(Si={}));class Ve{constructor(n,i,o){this.value=n,this.stringValue=i,this.bits=o,Ve.FOR_BITS.set(o,this),Ve.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return Ve.L;case"M":return Ve.M;case"Q":return Ve.Q;case"H":return Ve.H;default:throw new E(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof Ve))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=Ve.FOR_BITS.size)throw new _;return Ve.FOR_BITS.get(n)}}Ve.FOR_BITS=new Map,Ve.FOR_VALUE=new Map,Ve.L=new Ve(Si.L,"L",1),Ve.M=new Ve(Si.M,"M",0),Ve.Q=new Ve(Si.Q,"Q",3),Ve.H=new Ve(Si.H,"H",2);class Pt{constructor(n){this.errorCorrectionLevel=Ve.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return S.bitCount(n^i)}static decodeFormatInformation(n,i){const o=Pt.doDecodeFormatInformation(n,i);return o!==null?o:Pt.doDecodeFormatInformation(n^Pt.FORMAT_INFO_MASK_QR,i^Pt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let o=Number.MAX_SAFE_INTEGER,a=0;for(const u of Pt.FORMAT_INFO_DECODE_LOOKUP){const h=u[0];if(h===n||h===i)return new Pt(u[1]);let d=Pt.numBitsDiffering(n,h);d<o&&(a=u[1],o=d),n!==i&&(d=Pt.numBitsDiffering(i,h),d<o&&(a=u[1],o=d))}return o<=3?new Pt(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Pt))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Pt.FORMAT_INFO_MASK_QR=21522,Pt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class j{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const o of i)n+=o.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class b{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class le{constructor(n,i,...o){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=o;let a=0;const u=o[0].getECCodewordsPerBlock(),h=o[0].getECBlocks();for(const d of h)a+=d.getCount()*(d.getDataCodewords()+u);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new B;try{return this.getVersionForNumber((n-17)/4)}catch{throw new B}}static getVersionForNumber(n){if(n<1||n>40)throw new _;return le.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,o=0;for(let a=0;a<le.VERSION_DECODE_INFO.length;a++){const u=le.VERSION_DECODE_INFO[a];if(u===n)return le.getVersionForNumber(a+7);const h=Pt.numBitsDiffering(n,u);h<i&&(o=a+7,i=h)}return i<=3?le.getVersionForNumber(o):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new lt(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const o=this.alignmentPatternCenters.length;for(let a=0;a<o;a++){const u=this.alignmentPatternCenters[a]-2;for(let h=0;h<o;h++)a===0&&(h===0||h===o-1)||a===o-1&&h===0||i.setRegion(this.alignmentPatternCenters[h]-2,u,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}le.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),le.VERSIONS=[new le(1,new Int32Array(0),new j(7,new b(1,19)),new j(10,new b(1,16)),new j(13,new b(1,13)),new j(17,new b(1,9))),new le(2,Int32Array.from([6,18]),new j(10,new b(1,34)),new j(16,new b(1,28)),new j(22,new b(1,22)),new j(28,new b(1,16))),new le(3,Int32Array.from([6,22]),new j(15,new b(1,55)),new j(26,new b(1,44)),new j(18,new b(2,17)),new j(22,new b(2,13))),new le(4,Int32Array.from([6,26]),new j(20,new b(1,80)),new j(18,new b(2,32)),new j(26,new b(2,24)),new j(16,new b(4,9))),new le(5,Int32Array.from([6,30]),new j(26,new b(1,108)),new j(24,new b(2,43)),new j(18,new b(2,15),new b(2,16)),new j(22,new b(2,11),new b(2,12))),new le(6,Int32Array.from([6,34]),new j(18,new b(2,68)),new j(16,new b(4,27)),new j(24,new b(4,19)),new j(28,new b(4,15))),new le(7,Int32Array.from([6,22,38]),new j(20,new b(2,78)),new j(18,new b(4,31)),new j(18,new b(2,14),new b(4,15)),new j(26,new b(4,13),new b(1,14))),new le(8,Int32Array.from([6,24,42]),new j(24,new b(2,97)),new j(22,new b(2,38),new b(2,39)),new j(22,new b(4,18),new b(2,19)),new j(26,new b(4,14),new b(2,15))),new le(9,Int32Array.from([6,26,46]),new j(30,new b(2,116)),new j(22,new b(3,36),new b(2,37)),new j(20,new b(4,16),new b(4,17)),new j(24,new b(4,12),new b(4,13))),new le(10,Int32Array.from([6,28,50]),new j(18,new b(2,68),new b(2,69)),new j(26,new b(4,43),new b(1,44)),new j(24,new b(6,19),new b(2,20)),new j(28,new b(6,15),new b(2,16))),new le(11,Int32Array.from([6,30,54]),new j(20,new b(4,81)),new j(30,new b(1,50),new b(4,51)),new j(28,new b(4,22),new b(4,23)),new j(24,new b(3,12),new b(8,13))),new le(12,Int32Array.from([6,32,58]),new j(24,new b(2,92),new b(2,93)),new j(22,new b(6,36),new b(2,37)),new j(26,new b(4,20),new b(6,21)),new j(28,new b(7,14),new b(4,15))),new le(13,Int32Array.from([6,34,62]),new j(26,new b(4,107)),new j(22,new b(8,37),new b(1,38)),new j(24,new b(8,20),new b(4,21)),new j(22,new b(12,11),new b(4,12))),new le(14,Int32Array.from([6,26,46,66]),new j(30,new b(3,115),new b(1,116)),new j(24,new b(4,40),new b(5,41)),new j(20,new b(11,16),new b(5,17)),new j(24,new b(11,12),new b(5,13))),new le(15,Int32Array.from([6,26,48,70]),new j(22,new b(5,87),new b(1,88)),new j(24,new b(5,41),new b(5,42)),new j(30,new b(5,24),new b(7,25)),new j(24,new b(11,12),new b(7,13))),new le(16,Int32Array.from([6,26,50,74]),new j(24,new b(5,98),new b(1,99)),new j(28,new b(7,45),new b(3,46)),new j(24,new b(15,19),new b(2,20)),new j(30,new b(3,15),new b(13,16))),new le(17,Int32Array.from([6,30,54,78]),new j(28,new b(1,107),new b(5,108)),new j(28,new b(10,46),new b(1,47)),new j(28,new b(1,22),new b(15,23)),new j(28,new b(2,14),new b(17,15))),new le(18,Int32Array.from([6,30,56,82]),new j(30,new b(5,120),new b(1,121)),new j(26,new b(9,43),new b(4,44)),new j(28,new b(17,22),new b(1,23)),new j(28,new b(2,14),new b(19,15))),new le(19,Int32Array.from([6,30,58,86]),new j(28,new b(3,113),new b(4,114)),new j(26,new b(3,44),new b(11,45)),new j(26,new b(17,21),new b(4,22)),new j(26,new b(9,13),new b(16,14))),new le(20,Int32Array.from([6,34,62,90]),new j(28,new b(3,107),new b(5,108)),new j(26,new b(3,41),new b(13,42)),new j(30,new b(15,24),new b(5,25)),new j(28,new b(15,15),new b(10,16))),new le(21,Int32Array.from([6,28,50,72,94]),new j(28,new b(4,116),new b(4,117)),new j(26,new b(17,42)),new j(28,new b(17,22),new b(6,23)),new j(30,new b(19,16),new b(6,17))),new le(22,Int32Array.from([6,26,50,74,98]),new j(28,new b(2,111),new b(7,112)),new j(28,new b(17,46)),new j(30,new b(7,24),new b(16,25)),new j(24,new b(34,13))),new le(23,Int32Array.from([6,30,54,78,102]),new j(30,new b(4,121),new b(5,122)),new j(28,new b(4,47),new b(14,48)),new j(30,new b(11,24),new b(14,25)),new j(30,new b(16,15),new b(14,16))),new le(24,Int32Array.from([6,28,54,80,106]),new j(30,new b(6,117),new b(4,118)),new j(28,new b(6,45),new b(14,46)),new j(30,new b(11,24),new b(16,25)),new j(30,new b(30,16),new b(2,17))),new le(25,Int32Array.from([6,32,58,84,110]),new j(26,new b(8,106),new b(4,107)),new j(28,new b(8,47),new b(13,48)),new j(30,new b(7,24),new b(22,25)),new j(30,new b(22,15),new b(13,16))),new le(26,Int32Array.from([6,30,58,86,114]),new j(28,new b(10,114),new b(2,115)),new j(28,new b(19,46),new b(4,47)),new j(28,new b(28,22),new b(6,23)),new j(30,new b(33,16),new b(4,17))),new le(27,Int32Array.from([6,34,62,90,118]),new j(30,new b(8,122),new b(4,123)),new j(28,new b(22,45),new b(3,46)),new j(30,new b(8,23),new b(26,24)),new j(30,new b(12,15),new b(28,16))),new le(28,Int32Array.from([6,26,50,74,98,122]),new j(30,new b(3,117),new b(10,118)),new j(28,new b(3,45),new b(23,46)),new j(30,new b(4,24),new b(31,25)),new j(30,new b(11,15),new b(31,16))),new le(29,Int32Array.from([6,30,54,78,102,126]),new j(30,new b(7,116),new b(7,117)),new j(28,new b(21,45),new b(7,46)),new j(30,new b(1,23),new b(37,24)),new j(30,new b(19,15),new b(26,16))),new le(30,Int32Array.from([6,26,52,78,104,130]),new j(30,new b(5,115),new b(10,116)),new j(28,new b(19,47),new b(10,48)),new j(30,new b(15,24),new b(25,25)),new j(30,new b(23,15),new b(25,16))),new le(31,Int32Array.from([6,30,56,82,108,134]),new j(30,new b(13,115),new b(3,116)),new j(28,new b(2,46),new b(29,47)),new j(30,new b(42,24),new b(1,25)),new j(30,new b(23,15),new b(28,16))),new le(32,Int32Array.from([6,34,60,86,112,138]),new j(30,new b(17,115)),new j(28,new b(10,46),new b(23,47)),new j(30,new b(10,24),new b(35,25)),new j(30,new b(19,15),new b(35,16))),new le(33,Int32Array.from([6,30,58,86,114,142]),new j(30,new b(17,115),new b(1,116)),new j(28,new b(14,46),new b(21,47)),new j(30,new b(29,24),new b(19,25)),new j(30,new b(11,15),new b(46,16))),new le(34,Int32Array.from([6,34,62,90,118,146]),new j(30,new b(13,115),new b(6,116)),new j(28,new b(14,46),new b(23,47)),new j(30,new b(44,24),new b(7,25)),new j(30,new b(59,16),new b(1,17))),new le(35,Int32Array.from([6,30,54,78,102,126,150]),new j(30,new b(12,121),new b(7,122)),new j(28,new b(12,47),new b(26,48)),new j(30,new b(39,24),new b(14,25)),new j(30,new b(22,15),new b(41,16))),new le(36,Int32Array.from([6,24,50,76,102,128,154]),new j(30,new b(6,121),new b(14,122)),new j(28,new b(6,47),new b(34,48)),new j(30,new b(46,24),new b(10,25)),new j(30,new b(2,15),new b(64,16))),new le(37,Int32Array.from([6,28,54,80,106,132,158]),new j(30,new b(17,122),new b(4,123)),new j(28,new b(29,46),new b(14,47)),new j(30,new b(49,24),new b(10,25)),new j(30,new b(24,15),new b(46,16))),new le(38,Int32Array.from([6,32,58,84,110,136,162]),new j(30,new b(4,122),new b(18,123)),new j(28,new b(13,46),new b(32,47)),new j(30,new b(48,24),new b(14,25)),new j(30,new b(42,15),new b(32,16))),new le(39,Int32Array.from([6,26,54,82,110,138,166]),new j(30,new b(20,117),new b(4,118)),new j(28,new b(40,47),new b(7,48)),new j(30,new b(43,24),new b(22,25)),new j(30,new b(10,15),new b(67,16))),new le(40,Int32Array.from([6,30,58,86,114,142,170]),new j(30,new b(19,118),new b(6,119)),new j(28,new b(18,47),new b(31,48)),new j(30,new b(34,24),new b(34,25)),new j(30,new b(20,15),new b(61,16)))];var vt;(function(v){v[v.DATA_MASK_000=0]="DATA_MASK_000",v[v.DATA_MASK_001=1]="DATA_MASK_001",v[v.DATA_MASK_010=2]="DATA_MASK_010",v[v.DATA_MASK_011=3]="DATA_MASK_011",v[v.DATA_MASK_100=4]="DATA_MASK_100",v[v.DATA_MASK_101=5]="DATA_MASK_101",v[v.DATA_MASK_110=6]="DATA_MASK_110",v[v.DATA_MASK_111=7]="DATA_MASK_111"})(vt||(vt={}));class mn{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let o=0;o<i;o++)for(let a=0;a<i;a++)this.isMasked(o,a)&&n.flip(a,o)}}mn.values=new Map([[vt.DATA_MASK_000,new mn(vt.DATA_MASK_000,(v,n)=>(v+n&1)===0)],[vt.DATA_MASK_001,new mn(vt.DATA_MASK_001,(v,n)=>(v&1)===0)],[vt.DATA_MASK_010,new mn(vt.DATA_MASK_010,(v,n)=>n%3===0)],[vt.DATA_MASK_011,new mn(vt.DATA_MASK_011,(v,n)=>(v+n)%3===0)],[vt.DATA_MASK_100,new mn(vt.DATA_MASK_100,(v,n)=>(Math.floor(v/2)+Math.floor(n/3)&1)===0)],[vt.DATA_MASK_101,new mn(vt.DATA_MASK_101,(v,n)=>v*n%6===0)],[vt.DATA_MASK_110,new mn(vt.DATA_MASK_110,(v,n)=>v*n%6<3)],[vt.DATA_MASK_111,new mn(vt.DATA_MASK_111,(v,n)=>(v+n+v*n%3&1)===0)]]);class m2{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new B;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let u=0;u<6;u++)n=this.copyBit(u,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let u=5;u>=0;u--)n=this.copyBit(8,u,n);const i=this.bitMatrix.getHeight();let o=0;const a=i-7;for(let u=i-1;u>=a;u--)o=this.copyBit(8,u,o);for(let u=i-8;u<i;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=Pt.decodeFormatInformation(n,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return le.getVersionForNumber(i);let o=0;const a=n-11;for(let h=5;h>=0;h--)for(let d=n-9;d>=a;d--)o=this.copyBit(d,h,o);let u=le.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===n)return this.parsedVersion=u,u;o=0;for(let h=5;h>=0;h--)for(let d=n-9;d>=a;d--)o=this.copyBit(h,d,o);if(u=le.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===n)return this.parsedVersion=u,u;throw new B}copyBit(n,i,o){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?o<<1|1:o<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),o=mn.values.get(n.getDataMask()),a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a);const u=i.buildFunctionPattern();let h=!0;const d=new Uint8Array(i.getTotalCodewords());let g=0,w=0,y=0;for(let C=a-1;C>0;C-=2){C===6&&C--;for(let A=0;A<a;A++){const N=h?a-1-A:A;for(let k=0;k<2;k++)u.get(C-k,N)||(y++,w<<=1,this.bitMatrix.get(C-k,N)&&(w|=1),y===8&&(d[g++]=w,y=0,w=0))}h=!h}if(g!==i.getTotalCodewords())throw new B;return d}remask(){if(this.parsedFormatInfo===null)return;const n=mn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,o=n.getWidth();i<o;i++)for(let a=i+1,u=n.getHeight();a<u;a++)n.get(i,a)!==n.get(a,i)&&(n.flip(a,i),n.flip(i,a))}}class Vl{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,o){if(n.length!==i.getTotalCodewords())throw new _;const a=i.getECBlocksForLevel(o);let u=0;const h=a.getECBlocks();for(const k of h)u+=k.getCount();const d=new Array(u);let g=0;for(const k of h)for(let M=0;M<k.getCount();M++){const U=k.getDataCodewords(),H=a.getECCodewordsPerBlock()+U;d[g++]=new Vl(U,new Uint8Array(H))}const w=d[0].codewords.length;let y=d.length-1;for(;y>=0&&d[y].codewords.length!==w;)y--;y++;const C=w-a.getECCodewordsPerBlock();let A=0;for(let k=0;k<C;k++)for(let M=0;M<g;M++)d[M].codewords[k]=n[A++];for(let k=y;k<g;k++)d[k].codewords[C]=n[A++];const N=d[0].codewords.length;for(let k=C;k<N;k++)for(let M=0;M<g;M++){const U=M<y?k:k+1;d[M].codewords[U]=n[A++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var xn;(function(v){v[v.TERMINATOR=0]="TERMINATOR",v[v.NUMERIC=1]="NUMERIC",v[v.ALPHANUMERIC=2]="ALPHANUMERIC",v[v.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",v[v.BYTE=4]="BYTE",v[v.ECI=5]="ECI",v[v.KANJI=6]="KANJI",v[v.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",v[v.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",v[v.HANZI=9]="HANZI"})(xn||(xn={}));class ce{constructor(n,i,o,a){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=a,ce.FOR_BITS.set(a,this),ce.FOR_VALUE.set(n,this)}static forBits(n){const i=ce.FOR_BITS.get(n);if(i===void 0)throw new _;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof ce))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}ce.FOR_BITS=new Map,ce.FOR_VALUE=new Map,ce.TERMINATOR=new ce(xn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ce.NUMERIC=new ce(xn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ce.ALPHANUMERIC=new ce(xn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ce.STRUCTURED_APPEND=new ce(xn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ce.BYTE=new ce(xn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ce.ECI=new ce(xn.ECI,"ECI",Int32Array.from([0,0,0]),7),ce.KANJI=new ce(xn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ce.FNC1_FIRST_POSITION=new ce(xn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ce.FNC1_SECOND_POSITION=new ce(xn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ce.HANZI=new ce(xn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Qe{static decode(n,i,o,a){const u=new jl(n);let h=new pe;const d=new Array;let g=-1,w=-1;try{let y=null,C=!1,A;do{if(u.available()<4)A=ce.TERMINATOR;else{const N=u.readBits(4);A=ce.forBits(N)}switch(A){case ce.TERMINATOR:break;case ce.FNC1_FIRST_POSITION:case ce.FNC1_SECOND_POSITION:C=!0;break;case ce.STRUCTURED_APPEND:if(u.available()<16)throw new B;g=u.readBits(8),w=u.readBits(8);break;case ce.ECI:const N=Qe.parseECIValue(u);if(y=X.getCharacterSetECIByValue(N),y===null)throw new B;break;case ce.HANZI:const k=u.readBits(4),M=u.readBits(A.getCharacterCountBits(i));k===Qe.GB2312_SUBSET&&Qe.decodeHanziSegment(u,h,M);break;default:const U=u.readBits(A.getCharacterCountBits(i));switch(A){case ce.NUMERIC:Qe.decodeNumericSegment(u,h,U);break;case ce.ALPHANUMERIC:Qe.decodeAlphanumericSegment(u,h,U,C);break;case ce.BYTE:Qe.decodeByteSegment(u,h,U,y,d,a);break;case ce.KANJI:Qe.decodeKanjiSegment(u,h,U);break;default:throw new B}break}}while(A!==ce.TERMINATOR)}catch{throw new B}return new Es(n,h.toString(),d.length===0?null:d,o===null?null:o.toString(),g,w)}static decodeHanziSegment(n,i,o){if(o*13>n.available())throw new B;const a=new Uint8Array(2*o);let u=0;for(;o>0;){const h=n.readBits(13);let d=h/96<<8&4294967295|h%96;d<959?d+=41377:d+=42657,a[u]=d>>8&255,a[u+1]=d&255,u+=2,o--}try{i.append(Re.decode(a,ae.GB2312))}catch(h){throw new B(h)}}static decodeKanjiSegment(n,i,o){if(o*13>n.available())throw new B;const a=new Uint8Array(2*o);let u=0;for(;o>0;){const h=n.readBits(13);let d=h/192<<8&4294967295|h%192;d<7936?d+=33088:d+=49472,a[u]=d>>8,a[u+1]=d,u+=2,o--}try{i.append(Re.decode(a,ae.SHIFT_JIS))}catch(h){throw new B(h)}}static decodeByteSegment(n,i,o,a,u,h){if(8*o>n.available())throw new B;const d=new Uint8Array(o);for(let w=0;w<o;w++)d[w]=n.readBits(8);let g;a===null?g=ae.guessEncoding(d,h):g=a.getName();try{i.append(Re.decode(d,g))}catch(w){throw new B(w)}u.push(d)}static toAlphaNumericChar(n){if(n>=Qe.ALPHANUMERIC_CHARS.length)throw new B;return Qe.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,o,a){const u=i.length();for(;o>1;){if(n.available()<11)throw new B;const h=n.readBits(11);i.append(Qe.toAlphaNumericChar(Math.floor(h/45))),i.append(Qe.toAlphaNumericChar(h%45)),o-=2}if(o===1){if(n.available()<6)throw new B;i.append(Qe.toAlphaNumericChar(n.readBits(6)))}if(a)for(let h=u;h<i.length();h++)i.charAt(h)==="%"&&(h<i.length()-1&&i.charAt(h+1)==="%"?i.deleteCharAt(h+1):i.setCharAt(h,""))}static decodeNumericSegment(n,i,o){for(;o>=3;){if(n.available()<10)throw new B;const a=n.readBits(10);if(a>=1e3)throw new B;i.append(Qe.toAlphaNumericChar(Math.floor(a/100))),i.append(Qe.toAlphaNumericChar(Math.floor(a/10)%10)),i.append(Qe.toAlphaNumericChar(a%10)),o-=3}if(o===2){if(n.available()<7)throw new B;const a=n.readBits(7);if(a>=100)throw new B;i.append(Qe.toAlphaNumericChar(Math.floor(a/10))),i.append(Qe.toAlphaNumericChar(a%10))}else if(o===1){if(n.available()<4)throw new B;const a=n.readBits(4);if(a>=10)throw new B;i.append(Qe.toAlphaNumericChar(a))}}static parseECIValue(n){const i=n.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const o=n.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=n.readBits(16);return(i&31)<<16&4294967295|o}throw new B}}Qe.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Qe.GB2312_SUBSET=1;class ih{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class x2{constructor(){this.rsDecoder=new Cs(Oe.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix(lt.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const o=new m2(n);let a=null;try{return this.decodeBitMatrixParser(o,i)}catch(u){a=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,i);return u.setOther(new ih(!0)),u}catch(u){throw a!==null?a:u}}decodeBitMatrixParser(n,i){const o=n.readVersion(),a=n.readFormatInformation().getErrorCorrectionLevel(),u=n.readCodewords(),h=Vl.getDataBlocks(u,o,a);let d=0;for(const y of h)d+=y.getNumDataCodewords();const g=new Uint8Array(d);let w=0;for(const y of h){const C=y.getCodewords(),A=y.getNumDataCodewords();this.correctErrors(C,A);for(let N=0;N<A;N++)g[w++]=C[N]}return Qe.decode(g,o,a,i)}correctErrors(n,i){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-i)}catch{throw new O}for(let a=0;a<i;a++)n[a]=o[a]}}class zl extends se{constructor(n,i,o){super(n,i),this.estimatedModuleSize=o}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const a=(this.getX()+i)/2,u=(this.getY()+n)/2,h=(this.estimatedModuleSize+o)/2;return new zl(a,u,h)}}class zo{constructor(n,i,o,a,u,h,d){this.image=n,this.startX=i,this.startY=o,this.width=a,this.height=u,this.moduleSize=h,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,o=this.width,a=n+o,u=this.startY+i/2,h=new Int32Array(3),d=this.image;for(let g=0;g<i;g++){const w=u+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));h[0]=0,h[1]=0,h[2]=0;let y=n;for(;y<a&&!d.get(y,w);)y++;let C=0;for(;y<a;){if(d.get(y,w))if(C===1)h[1]++;else if(C===2){if(this.foundPatternCross(h)){const A=this.handlePossibleCenter(h,w,y);if(A!==null)return A}h[0]=h[2],h[1]=1,h[2]=0,C=1}else h[++C]++;else C===1&&C++,h[C]++;y++}if(this.foundPatternCross(h)){const A=this.handlePossibleCenter(h,w,a);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,o=i/2;for(let a=0;a<3;a++)if(Math.abs(i-n[a])>=o)return!1;return!0}crossCheckVertical(n,i,o,a){const u=this.image,h=u.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let g=n;for(;g>=0&&u.get(i,g)&&d[1]<=o;)d[1]++,g--;if(g<0||d[1]>o)return NaN;for(;g>=0&&!u.get(i,g)&&d[0]<=o;)d[0]++,g--;if(d[0]>o)return NaN;for(g=n+1;g<h&&u.get(i,g)&&d[1]<=o;)d[1]++,g++;if(g===h||d[1]>o)return NaN;for(;g<h&&!u.get(i,g)&&d[2]<=o;)d[2]++,g++;if(d[2]>o)return NaN;const w=d[0]+d[1]+d[2];return 5*Math.abs(w-a)>=2*a?NaN:this.foundPatternCross(d)?zo.centerFromEnd(d,g):NaN}handlePossibleCenter(n,i,o){const a=n[0]+n[1]+n[2],u=zo.centerFromEnd(n,o),h=this.crossCheckVertical(i,u,2*n[1],a);if(!isNaN(h)){const d=(n[0]+n[1]+n[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(d,h,u))return w.combineEstimate(h,u,d);const g=new zl(u,h,d);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Hl extends se{constructor(n,i,o,a){super(n,i),this.estimatedModuleSize=o,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,o){if(Math.abs(i-this.getY())<=n&&Math.abs(o-this.getX())<=n){const a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(n,i,o){const a=this.count+1,u=(this.count*this.getX()+i)/a,h=(this.count*this.getY()+n)/a,d=(this.count*this.estimatedModuleSize+o)/a;return new Hl(u,h,d,a)}}class y2{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ct{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get(V.TRY_HARDER)!==void 0,o=n!=null&&n.get(V.PURE_BARCODE)!==void 0,a=this.image,u=a.getHeight(),h=a.getWidth();let d=Math.floor(3*u/(4*Ct.MAX_MODULES));(d<Ct.MIN_SKIP||i)&&(d=Ct.MIN_SKIP);let g=!1;const w=new Int32Array(5);for(let C=d-1;C<u&&!g;C+=d){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let A=0;for(let N=0;N<h;N++)if(a.get(N,C))(A&1)===1&&A++,w[A]++;else if(A&1)w[A]++;else if(A===4)if(Ct.foundPatternCross(w)){if(this.handlePossibleCenter(w,C,N,o)===!0)if(d=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const M=this.findRowSkip();M>w[2]&&(C+=M-w[2]-d,N=h-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,A=3;continue}A=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,A=3;else w[++A]++;Ct.foundPatternCross(w)&&this.handlePossibleCenter(w,C,h,o)===!0&&(d=w[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const y=this.selectBestPatterns();return se.orderBestPatterns(y),new y2(y)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let u=0;u<5;u++){const h=n[u];if(h===0)return!1;i+=h}if(i<7)return!1;const o=i/7,a=o/2;return Math.abs(o-n[0])<a&&Math.abs(o-n[1])<a&&Math.abs(3*o-n[2])<3*a&&Math.abs(o-n[3])<a&&Math.abs(o-n[4])<a}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,o,a){const u=this.getCrossCheckStateCount();let h=0;const d=this.image;for(;n>=h&&i>=h&&d.get(i-h,n-h);)u[2]++,h++;if(n<h||i<h)return!1;for(;n>=h&&i>=h&&!d.get(i-h,n-h)&&u[1]<=o;)u[1]++,h++;if(n<h||i<h||u[1]>o)return!1;for(;n>=h&&i>=h&&d.get(i-h,n-h)&&u[0]<=o;)u[0]++,h++;if(u[0]>o)return!1;const g=d.getHeight(),w=d.getWidth();for(h=1;n+h<g&&i+h<w&&d.get(i+h,n+h);)u[2]++,h++;if(n+h>=g||i+h>=w)return!1;for(;n+h<g&&i+h<w&&!d.get(i+h,n+h)&&u[3]<o;)u[3]++,h++;if(n+h>=g||i+h>=w||u[3]>=o)return!1;for(;n+h<g&&i+h<w&&d.get(i+h,n+h)&&u[4]<o;)u[4]++,h++;if(u[4]>=o)return!1;const y=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(y-a)<2*a&&Ct.foundPatternCross(u)}crossCheckVertical(n,i,o,a){const u=this.image,h=u.getHeight(),d=this.getCrossCheckStateCount();let g=n;for(;g>=0&&u.get(i,g);)d[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(i,g)&&d[1]<=o;)d[1]++,g--;if(g<0||d[1]>o)return NaN;for(;g>=0&&u.get(i,g)&&d[0]<=o;)d[0]++,g--;if(d[0]>o)return NaN;for(g=n+1;g<h&&u.get(i,g);)d[2]++,g++;if(g===h)return NaN;for(;g<h&&!u.get(i,g)&&d[3]<o;)d[3]++,g++;if(g===h||d[3]>=o)return NaN;for(;g<h&&u.get(i,g)&&d[4]<o;)d[4]++,g++;if(d[4]>=o)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-a)>=2*a?NaN:Ct.foundPatternCross(d)?Ct.centerFromEnd(d,g):NaN}crossCheckHorizontal(n,i,o,a){const u=this.image,h=u.getWidth(),d=this.getCrossCheckStateCount();let g=n;for(;g>=0&&u.get(g,i);)d[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(g,i)&&d[1]<=o;)d[1]++,g--;if(g<0||d[1]>o)return NaN;for(;g>=0&&u.get(g,i)&&d[0]<=o;)d[0]++,g--;if(d[0]>o)return NaN;for(g=n+1;g<h&&u.get(g,i);)d[2]++,g++;if(g===h)return NaN;for(;g<h&&!u.get(g,i)&&d[3]<o;)d[3]++,g++;if(g===h||d[3]>=o)return NaN;for(;g<h&&u.get(g,i)&&d[4]<o;)d[4]++,g++;if(d[4]>=o)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-a)>=a?NaN:Ct.foundPatternCross(d)?Ct.centerFromEnd(d,g):NaN}handlePossibleCenter(n,i,o,a){const u=n[0]+n[1]+n[2]+n[3]+n[4];let h=Ct.centerFromEnd(n,o),d=this.crossCheckVertical(i,Math.floor(h),n[2],u);if(!isNaN(d)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(d),n[2],u),!isNaN(h)&&(!a||this.crossCheckDiagonal(Math.floor(d),Math.floor(h),n[2],u)))){const g=u/7;let w=!1;const y=this.possibleCenters;for(let C=0,A=y.length;C<A;C++){const N=y[C];if(N.aboutEquals(g,d,h)){y[C]=N.combineEstimate(d,h,g),w=!0;break}}if(!w){const C=new Hl(h,d,g);y.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=Ct.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const o=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=Ct.CENTER_QUORUM&&(n++,i+=h.getEstimatedModuleSize());if(n<3)return!1;const a=i/o;let u=0;for(const h of this.possibleCenters)u+=Math.abs(h.getEstimatedModuleSize()-a);return u<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new W;const i=this.possibleCenters;let o;if(n>3){let a=0,u=0;for(const g of this.possibleCenters){const w=g.getEstimatedModuleSize();a+=w,u+=w*w}o=a/n;let h=Math.sqrt(u/n-o*o);i.sort((g,w)=>{const y=Math.abs(w.getEstimatedModuleSize()-o),C=Math.abs(g.getEstimatedModuleSize()-o);return y<C?-1:y>C?1:0});const d=Math.max(.2*o,h);for(let g=0;g<i.length&&i.length>3;g++){const w=i[g];Math.abs(w.getEstimatedModuleSize()-o)>d&&(i.splice(g,1),g--)}}if(i.length>3){let a=0;for(const u of i)a+=u.getEstimatedModuleSize();o=a/i.length,i.sort((u,h)=>{if(h.getCount()===u.getCount()){const d=Math.abs(h.getEstimatedModuleSize()-o),g=Math.abs(u.getEstimatedModuleSize()-o);return d<g?1:d>g?-1:0}else return h.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Ct.CENTER_QUORUM=2,Ct.MIN_SKIP=3,Ct.MAX_MODULES=57;class As{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(V.NEED_RESULT_POINT_CALLBACK);const o=new Ct(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(o)}processFinderPatternInfo(n){const i=n.getTopLeft(),o=n.getTopRight(),a=n.getBottomLeft(),u=this.calculateModuleSize(i,o,a);if(u<1)throw new W("No pattern found in proccess finder.");const h=As.computeDimension(i,o,a,u),d=le.getProvisionalVersionForDimension(h),g=d.getDimensionForVersion()-7;let w=null;if(d.getAlignmentPatternCenters().length>0){const N=o.getX()-i.getX()+a.getX(),k=o.getY()-i.getY()+a.getY(),M=1-3/g,U=Math.floor(i.getX()+M*(N-i.getX())),H=Math.floor(i.getY()+M*(k-i.getY()));for(let Q=4;Q<=16;Q<<=1)try{w=this.findAlignmentInRegion(u,U,H,Q);break}catch(J){if(!(J instanceof W))throw J}}const y=As.createTransform(i,o,a,w,h),C=As.sampleGrid(this.image,y,h);let A;return w===null?A=[a,i,o]:A=[a,i,o,w],new Lo(C,A)}static createTransform(n,i,o,a,u){const h=u-3.5;let d,g,w,y;return a!==null?(d=a.getX(),g=a.getY(),w=h-3,y=w):(d=i.getX()-n.getX()+o.getX(),g=i.getY()-n.getY()+o.getY(),w=h,y=h),In.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,w,y,3.5,h,n.getX(),n.getY(),i.getX(),i.getY(),d,g,o.getX(),o.getY())}static sampleGrid(n,i,o){return gr.getInstance().sampleGridWithTransform(n,o,o,i)}static computeDimension(n,i,o,a){const u=be.round(se.distance(n,i)/a),h=be.round(se.distance(n,o)/a);let d=Math.floor((u+h)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new W("Dimensions could be not found.")}return d}calculateModuleSize(n,i,o){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,o))/2}calculateModuleSizeOneWay(n,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(o)?a/7:isNaN(a)?o/7:(o+a)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,o,a){let u=this.sizeOfBlackWhiteBlackRun(n,i,o,a),h=1,d=n-(o-n);d<0?(h=n/(n-d),d=0):d>=this.image.getWidth()&&(h=(this.image.getWidth()-1-n)/(d-n),d=this.image.getWidth()-1);let g=Math.floor(i-(a-i)*h);return h=1,g<0?(h=i/(i-g),g=0):g>=this.image.getHeight()&&(h=(this.image.getHeight()-1-i)/(g-i),g=this.image.getHeight()-1),d=Math.floor(n+(d-n)*h),u+=this.sizeOfBlackWhiteBlackRun(n,i,d,g),u-1}sizeOfBlackWhiteBlackRun(n,i,o,a){const u=Math.abs(a-i)>Math.abs(o-n);if(u){let N=n;n=i,i=N,N=o,o=a,a=N}const h=Math.abs(o-n),d=Math.abs(a-i);let g=-h/2;const w=n<o?1:-1,y=i<a?1:-1;let C=0;const A=o+w;for(let N=n,k=i;N!==A;N+=w){const M=u?k:N,U=u?N:k;if(C===1===this.image.get(M,U)){if(C===2)return be.distance(N,k,n,i);C++}if(g+=d,g>0){if(k===a)break;k+=y,g-=h}}return C===2?be.distance(o+w,a,n,i):NaN}findAlignmentInRegion(n,i,o,a){const u=Math.floor(a*n),h=Math.max(0,i-u),d=Math.min(this.image.getWidth()-1,i+u);if(d-h<n*3)throw new W("Alignment top exceeds estimated module size.");const g=Math.max(0,o-u),w=Math.min(this.image.getHeight()-1,o+u);if(w-g<n*3)throw new W("Alignment bottom exceeds estimated module size.");return new zo(this.image,h,g,d-h,w-g,n,this.resultPointCallback).find()}}class xr{constructor(){this.decoder=new x2}getDecoder(){return this.decoder}decode(n,i){let o,a;if(i!=null&&i.get(V.PURE_BARCODE)!==void 0){const g=xr.extractPureBits(n.getBlackMatrix());o=this.decoder.decodeBitMatrix(g,i),a=xr.NO_POINTS}else{const g=new As(n.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(g.getBits(),i),a=g.getPoints()}o.getOther()instanceof ih&&o.getOther().applyMirroredCorrection(a);const u=new Ze(o.getText(),o.getRawBytes(),void 0,a,oe.QR_CODE,void 0),h=o.getByteSegments();h!==null&&u.putMetadata(Et.BYTE_SEGMENTS,h);const d=o.getECLevel();return d!==null&&u.putMetadata(Et.ERROR_CORRECTION_LEVEL,d),o.hasStructuredAppend()&&(u.putMetadata(Et.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(Et.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(i===null||o===null)throw new W;const a=this.moduleSize(i,n);let u=i[1],h=o[1],d=i[0],g=o[0];if(d>=g||u>=h)throw new W;if(h-u!==g-d&&(g=d+(h-u),g>=n.getWidth()))throw new W;const w=Math.round((g-d+1)/a),y=Math.round((h-u+1)/a);if(w<=0||y<=0)throw new W;if(y!==w)throw new W;const C=Math.floor(a/2);u+=C,d+=C;const A=d+Math.floor((w-1)*a)-g;if(A>0){if(A>C)throw new W;d-=A}const N=u+Math.floor((y-1)*a)-h;if(N>0){if(N>C)throw new W;u-=N}const k=new lt(w,y);for(let M=0;M<y;M++){const U=u+Math.floor(M*a);for(let H=0;H<w;H++)n.get(d+Math.floor(H*a),U)&&k.set(H,M)}return k}static moduleSize(n,i){const o=i.getHeight(),a=i.getWidth();let u=n[0],h=n[1],d=!0,g=0;for(;u<a&&h<o;){if(d!==i.get(u,h)){if(++g===5)break;d=!d}u++,h++}if(u===a||h===o)throw new W;return(u-n[0])/7}}xr.NO_POINTS=new Array;class fe{PDF417Common(){}static getBitCountSum(n){return be.sum(n)}static toIntArray(n){if(n==null||!n.length)return fe.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let o=0;for(const a of n)i[o++]=a;return i}static getCodeword(n){const i=I.binarySearch(fe.SYMBOL_TABLE,n&262143);return i<0?-1:(fe.CODEWORD_TABLE[i]-1)%fe.NUMBER_OF_CODEWORDS}}fe.NUMBER_OF_CODEWORDS=929,fe.MAX_CODEWORDS_IN_BARCODE=fe.NUMBER_OF_CODEWORDS-1,fe.MIN_ROWS_IN_BARCODE=3,fe.MAX_ROWS_IN_BARCODE=90,fe.MODULES_IN_CODEWORD=17,fe.MODULES_IN_STOP_PATTERN=18,fe.BARS_IN_MODULE=8,fe.EMPTY_INT_ARRAY=new Int32Array([]),fe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),fe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class E2{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class ye{static detectMultiple(n,i,o){let a=n.getBlackMatrix(),u=ye.detect(o,a);return u.length||(a=a.clone(),a.rotate180(),u=ye.detect(o,a)),new E2(a,u)}static detect(n,i){const o=new Array;let a=0,u=0,h=!1;for(;a<i.getHeight();){const d=ye.findVertices(i,a,u);if(d[0]==null&&d[3]==null){if(!h)break;h=!1,u=0;for(const g of o)g[1]!=null&&(a=Math.trunc(Math.max(a,g[1].getY()))),g[3]!=null&&(a=Math.max(a,Math.trunc(g[3].getY())));a+=ye.ROW_STEP;continue}if(h=!0,o.push(d),!n)break;d[2]!=null?(u=Math.trunc(d[2].getX()),a=Math.trunc(d[2].getY())):(u=Math.trunc(d[4].getX()),a=Math.trunc(d[4].getY()))}return o}static findVertices(n,i,o){const a=n.getHeight(),u=n.getWidth(),h=new Array(8);return ye.copyToResult(h,ye.findRowsWithPattern(n,a,u,i,o,ye.START_PATTERN),ye.INDEXES_START_PATTERN),h[4]!=null&&(o=Math.trunc(h[4].getX()),i=Math.trunc(h[4].getY())),ye.copyToResult(h,ye.findRowsWithPattern(n,a,u,i,o,ye.STOP_PATTERN),ye.INDEXES_STOP_PATTERN),h}static copyToResult(n,i,o){for(let a=0;a<o.length;a++)n[o[a]]=i[a]}static findRowsWithPattern(n,i,o,a,u,h){const d=new Array(4);let g=!1;const w=new Int32Array(h.length);for(;a<i;a+=ye.ROW_STEP){let C=ye.findGuardPattern(n,u,a,o,!1,h,w);if(C!=null){for(;a>0;){const A=ye.findGuardPattern(n,u,--a,o,!1,h,w);if(A!=null)C=A;else{a++;break}}d[0]=new se(C[0],a),d[1]=new se(C[1],a),g=!0;break}}let y=a+1;if(g){let C=0,A=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;y<i;y++){const N=ye.findGuardPattern(n,A[0],y,o,!1,h,w);if(N!=null&&Math.abs(A[0]-N[0])<ye.MAX_PATTERN_DRIFT&&Math.abs(A[1]-N[1])<ye.MAX_PATTERN_DRIFT)A=N,C=0;else{if(C>ye.SKIPPED_ROW_COUNT_MAX)break;C++}}y-=C+1,d[2]=new se(A[0],y),d[3]=new se(A[1],y)}return y-a<ye.BARCODE_MIN_HEIGHT&&I.fill(d,null),d}static findGuardPattern(n,i,o,a,u,h,d){I.fillWithin(d,0,d.length,0);let g=i,w=0;for(;n.get(g,o)&&g>0&&w++<ye.MAX_PIXEL_DRIFT;)g--;let y=g,C=0,A=h.length;for(let N=u;y<a;y++)if(n.get(y,o)!==N)d[C]++;else{if(C===A-1){if(ye.patternMatchVariance(d,h,ye.MAX_INDIVIDUAL_VARIANCE)<ye.MAX_AVG_VARIANCE)return new Int32Array([g,y]);g+=d[0]+d[1],L.arraycopy(d,2,d,0,C-1),d[C-1]=0,d[C]=0,C--}else C++;d[C]=1,N=!N}return C===A-1&&ye.patternMatchVariance(d,h,ye.MAX_INDIVIDUAL_VARIANCE)<ye.MAX_AVG_VARIANCE?new Int32Array([g,y-1]):null}static patternMatchVariance(n,i,o){let a=n.length,u=0,h=0;for(let w=0;w<a;w++)u+=n[w],h+=i[w];if(u<h)return 1/0;let d=u/h;o*=d;let g=0;for(let w=0;w<a;w++){let y=n[w],C=i[w]*d,A=y>C?y-C:C-y;if(A>o)return 1/0;g+=A}return g/u}}ye.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ye.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ye.MAX_AVG_VARIANCE=.42,ye.MAX_INDIVIDUAL_VARIANCE=.8,ye.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ye.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ye.MAX_PIXEL_DRIFT=3,ye.MAX_PATTERN_DRIFT=5,ye.SKIPPED_ROW_COUNT_MAX=25,ye.ROW_STEP=5,ye.BARCODE_MIN_HEIGHT=10;class It{constructor(n,i){if(i.length===0)throw new _;this.field=n;let o=i.length;if(o>1&&i[0]===0){let a=1;for(;a<o&&i[a]===0;)a++;a===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-a),L.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let a=0;for(let u of this.coefficients)a=this.field.add(a,u);return a}let i=this.coefficients[0],o=this.coefficients.length;for(let a=1;a<o;a++)i=this.field.add(this.field.multiply(n,i),this.coefficients[a]);return i}add(n){if(!this.field.equals(n.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,o=n.coefficients;if(i.length>o.length){let h=i;i=o,o=h}let a=new Int32Array(o.length),u=o.length-i.length;L.arraycopy(o,0,a,0,u);for(let h=u;h<o.length;h++)a[h]=this.field.add(i[h-u],o[h]);return new It(this.field,a)}subtract(n){if(!this.field.equals(n.field))throw new _("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof It?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new It(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,a=n.coefficients,u=a.length,h=new Int32Array(o+u-1);for(let d=0;d<o;d++){let g=i[d];for(let w=0;w<u;w++)h[d+w]=this.field.add(h[d+w],this.field.multiply(g,a[w]))}return new It(this.field,h)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let o=0;o<n;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new It(this.field,i)}multiplyScalar(n){if(n===0)return new It(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let a=0;a<i;a++)o[a]=this.field.multiply(this.coefficients[a],n);return new It(this.field,o)}multiplyByMonomial(n,i){if(n<0)throw new _;if(i===0)return new It(this.field,new Int32Array([0]));let o=this.coefficients.length,a=new Int32Array(o+n);for(let u=0;u<o;u++)a[u]=this.field.multiply(this.coefficients[u],i);return new It(this.field,a)}toString(){let n=new pe;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(n.append(" - "),o=-o):n.length()>0&&n.append(" + "),(i===0||o!==1)&&n.append(o),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class v2{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new _;return this.logTable[n]}inverse(n){if(n===0)throw new Mo;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Wl extends v2{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let o=1;for(let a=0;a<n;a++)this.expTable[a]=o,o=o*i%n;for(let a=0;a<n-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new It(this,new Int32Array([0])),this.one=new It(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new _;if(i===0)return this.zero;let o=new Int32Array(n+1);return o[0]=i,new It(this,o)}}Wl.PDF417_GF=new Wl(fe.NUMBER_OF_CODEWORDS,3);class sh{constructor(){this.field=Wl.PDF417_GF}decode(n,i,o){let a=new It(this.field,n),u=new Int32Array(i),h=!1;for(let k=i;k>0;k--){let M=a.evaluateAt(this.field.exp(k));u[i-k]=M,M!==0&&(h=!0)}if(!h)return 0;let d=this.field.getOne();if(o!=null)for(const k of o){let M=this.field.exp(n.length-1-k),U=new It(this.field,new Int32Array([this.field.subtract(0,M),1]));d=d.multiply(U)}let g=new It(this.field,u),w=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),g,i),y=w[0],C=w[1],A=this.findErrorLocations(y),N=this.findErrorMagnitudes(C,y,A);for(let k=0;k<A.length;k++){let M=n.length-1-this.field.log(A[k]);if(M<0)throw O.getChecksumInstance();n[M]=this.field.subtract(n[M],N[k])}return A.length}runEuclideanAlgorithm(n,i,o){if(n.getDegree()<i.getDegree()){let A=n;n=i,i=A}let a=n,u=i,h=this.field.getZero(),d=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let A=a,N=h;if(a=u,h=d,a.isZero())throw O.getChecksumInstance();u=A;let k=this.field.getZero(),M=a.getCoefficient(a.getDegree()),U=this.field.inverse(M);for(;u.getDegree()>=a.getDegree()&&!u.isZero();){let H=u.getDegree()-a.getDegree(),Q=this.field.multiply(u.getCoefficient(u.getDegree()),U);k=k.add(this.field.buildMonomial(H,Q)),u=u.subtract(a.multiplyByMonomial(H,Q))}d=k.multiply(h).subtract(N).negative()}let g=d.getCoefficient(0);if(g===0)throw O.getChecksumInstance();let w=this.field.inverse(g),y=d.multiply(w),C=u.multiply(w);return[y,C]}findErrorLocations(n){let i=n.getDegree(),o=new Int32Array(i),a=0;for(let u=1;u<this.field.getSize()&&a<i;u++)n.evaluateAt(u)===0&&(o[a]=this.field.inverse(u),a++);if(a!==i)throw O.getChecksumInstance();return o}findErrorMagnitudes(n,i,o){let a=i.getDegree(),u=new Int32Array(a);for(let w=1;w<=a;w++)u[a-w]=this.field.multiply(w,i.getCoefficient(w));let h=new It(this.field,u),d=o.length,g=new Int32Array(d);for(let w=0;w<d;w++){let y=this.field.inverse(o[w]),C=this.field.subtract(0,n.evaluateAt(y)),A=this.field.inverse(h.evaluateAt(y));g[w]=this.field.multiply(C,A)}return g}}class Zr{constructor(n,i,o,a,u){n instanceof Zr?this.constructor_2(n):this.constructor_1(n,i,o,a,u)}constructor_1(n,i,o,a,u){const h=i==null||o==null,d=a==null||u==null;if(h&&d)throw new W;h?(i=new se(0,a.getY()),o=new se(0,u.getY())):d&&(a=new se(n.getWidth()-1,i.getY()),u=new se(n.getWidth()-1,o.getY())),this.image=n,this.topLeft=i,this.bottomLeft=o,this.topRight=a,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(a.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),a.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new Zr(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,o){let a=this.topLeft,u=this.bottomLeft,h=this.topRight,d=this.bottomRight;if(n>0){let g=o?this.topLeft:this.topRight,w=Math.trunc(g.getY()-n);w<0&&(w=0);let y=new se(g.getX(),w);o?a=y:h=y}if(i>0){let g=o?this.bottomLeft:this.bottomRight,w=Math.trunc(g.getY()+i);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let y=new se(g.getX(),w);o?u=y:d=y}return new Zr(this.image,a,u,h,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class C2{constructor(n,i,o,a){this.columnCount=n,this.errorCorrectionLevel=a,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ss{constructor(){this.buffer=""}static form(n,i){let o=-1;function a(h,d,g,w,y,C){if(h==="%%")return"%";if(i[++o]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let A=y?parseInt(y.substr(1)):void 0,N;switch(C){case"s":N=i[o];break;case"c":N=i[o][0];break;case"f":N=parseFloat(i[o]).toFixed(h);break;case"p":N=parseFloat(i[o]).toPrecision(h);break;case"e":N=parseFloat(i[o]).toExponential(h);break;case"x":N=parseInt(i[o]).toString(A||16);break;case"d":N=parseFloat(parseInt(i[o],A||10).toPrecision(h)).toFixed(0);break}N=typeof N=="object"?JSON.stringify(N):(+N).toString(A);let k=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;N.length<k;)N=d!==void 0?N+M:M+N;return N}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(u,a)}format(n,...i){this.buffer+=Ss.form(n,i)}toString(){return this.buffer}}class Is{constructor(n){this.boundingBox=new Zr(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let o=1;o<Is.MAX_NEARBY_DISTANCE;o++){let a=this.imageRowToCodewordIndex(n)-o;if(a>=0&&(i=this.codewords[a],i!=null)||(a=this.imageRowToCodewordIndex(n)+o,a<this.codewords.length&&(i=this.codewords[a],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Ss;let i=0;for(const o of this.codewords){if(o==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return n.toString()}}Is.MAX_NEARBY_DISTANCE=5;class bs{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[o,a]of this.values.entries()){const u={getKey:()=>o,getValue:()=>a};u.getValue()>n?(n=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===n&&i.push(u.getKey())}return fe.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class oh extends Is{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=-1,w=1,y=0;for(let C=h;C<d;C++){if(i[C]==null)continue;let A=i[C],N=A.getRowNumber()-g;if(N===0)y++;else if(N===1)w=Math.max(w,y),y=1,g=A.getRowNumber();else if(N<0||A.getRowNumber()>=n.getRowCount()||N>C)i[C]=null;else{let k;w>2?k=(w-2)*N:k=N;let M=k>=C;for(let U=1;U<=k&&!M;U++)M=i[C-U]!=null;M?i[C]=null:(g=A.getRowNumber(),y=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let o of this.getCodewords())if(o!=null){let a=o.getRowNumber();if(a>=i.length)continue;i[a]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.getCodewords(),g=-1;for(let w=u;w<h;w++){if(d[w]==null)continue;let y=d[w];y.setRowNumberAsRowIndicatorColumn();let C=y.getRowNumber()-g;C===0||(C===1?g=y.getRowNumber():y.getRowNumber()>=n.getRowCount()?d[w]=null:g=y.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new bs,o=new bs,a=new bs,u=new bs;for(let d of n){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let g=d.getValue()%30,w=d.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(g*3+1);break;case 1:u.setValue(g/3),a.setValue(g%3);break;case 2:i.setValue(g+1);break}}if(i.getValue().length===0||o.getValue().length===0||a.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<fe.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>fe.MAX_ROWS_IN_BARCODE)return null;let h=new C2(i.getValue()[0],o.getValue()[0],a.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(n,h),h}removeIncorrectCodewords(n,i){for(let o=0;o<n.length;o++){let a=n[o];if(n[o]==null)continue;let u=a.getValue()%30,h=a.getRowNumber();if(h>i.getRowCount()){n[o]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(n[o]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(n[o]=null);break;case 2:u+1!==i.getColumnCount()&&(n[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ts{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=fe.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let a=0;a<o.length;a++)o[a]!=null&&(o[a].hasValidRowNumber()||this.adjustRowNumbers(i,a,o))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<n.length;o++)if(n[o]!=null&&i[o]!=null&&n[o].getRowNumber()===i[o].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let u=this.detectionResultColumns[a].getCodewords()[o];u!=null&&(u.setRowNumber(n[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let a=i[o].getRowNumber(),u=0;for(let h=this.barcodeColumnCount+1;h>0&&u<this.ADJUST_ROW_NUMBER_SKIP;h--){let d=this.detectionResultColumns[h].getCodewords()[o];d!=null&&(u=Ts.adjustRowNumberIfValid(a,u,d),d.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let a=i[o].getRowNumber(),u=0;for(let h=1;h<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;h++){let d=this.detectionResultColumns[h].getCodewords()[o];d!=null&&(u=Ts.adjustRowNumberIfValid(a,u,d),d.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(n)?(o.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,o){if(!this.detectionResultColumns[n-1])return;let a=o[i],u=this.detectionResultColumns[n-1].getCodewords(),h=u;this.detectionResultColumns[n+1]!=null&&(h=this.detectionResultColumns[n+1].getCodewords());let d=new Array(14);d[2]=u[i],d[3]=h[i],i>0&&(d[0]=o[i-1],d[4]=u[i-1],d[5]=h[i-1]),i>1&&(d[8]=o[i-2],d[10]=u[i-2],d[11]=h[i-2]),i<o.length-1&&(d[1]=o[i+1],d[6]=u[i+1],d[7]=h[i+1]),i<o.length-2&&(d[9]=o[i+2],d[12]=u[i+2],d[13]=h[i+2]);for(let g of d)if(Ts.adjustRowNumber(a,g))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Ss;for(let o=0;o<n.getCodewords().length;o++){i.format("CW %3d:",o);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[a].getCodewords()[o];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class Ns{constructor(n,i,o,a){this.rowNumber=Ns.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Ns.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Ns.BARCODE_ROW_UNKNOWN=-1;class qt{static initialize(){for(let n=0;n<fe.SYMBOL_TABLE.length;n++){let i=fe.SYMBOL_TABLE[n],o=i&1;for(let a=0;a<fe.BARS_IN_MODULE;a++){let u=0;for(;(i&1)===o;)u+=1,i>>=1;o=i&1,qt.RATIOS_TABLE[n]||(qt.RATIOS_TABLE[n]=new Array(fe.BARS_IN_MODULE)),qt.RATIOS_TABLE[n][fe.BARS_IN_MODULE-a-1]=Math.fround(u/fe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=qt.getDecodedCodewordValue(qt.sampleBitCounts(n));return i!==-1?i:qt.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=be.sum(n),o=new Int32Array(fe.BARS_IN_MODULE),a=0,u=0;for(let h=0;h<fe.MODULES_IN_CODEWORD;h++){let d=i/(2*fe.MODULES_IN_CODEWORD)+h*i/fe.MODULES_IN_CODEWORD;u+n[a]<=d&&(u+=n[a],a++),o[a]++}return o}static getDecodedCodewordValue(n){let i=qt.getBitValue(n);return fe.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let o=0;o<n.length;o++)for(let a=0;a<n[o];a++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=be.sum(n),o=new Array(fe.BARS_IN_MODULE);if(i>1)for(let h=0;h<o.length;h++)o[h]=Math.fround(n[h]/i);let a=Bo.MAX_VALUE,u=-1;this.bSymbolTableReady||qt.initialize();for(let h=0;h<qt.RATIOS_TABLE.length;h++){let d=0,g=qt.RATIOS_TABLE[h];for(let w=0;w<fe.BARS_IN_MODULE;w++){let y=Math.fround(g[w]-o[w]);if(d+=Math.fround(y*y),d>=a)break}d<a&&(a=d,u=fe.SYMBOL_TABLE[h])}return u}}qt.bSymbolTableReady=!1,qt.RATIOS_TABLE=new Array(fe.SYMBOL_TABLE.length).map(v=>new Array(fe.BARS_IN_MODULE));class ah{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class lh{static parseLong(n,i=void 0){return parseInt(n,i)}}class uh extends x{}uh.kind="NullPointerException";class _2{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,o){if(n==null)throw new uh;if(i<0||i>n.length||o<0||i+o>n.length||i+o<0)throw new $;if(o===0)return;for(let a=0;a<o;a++)this.write(n[i+a])}flush(){}close(){}}class A2 extends x{}class S2 extends _2{constructor(n=32){if(super(),this.count=0,n<0)throw new _("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let o=this.buf.length<<1;if(o-n<0&&(o=n),o<0){if(n<0)throw new A2;o=S.MAX_VALUE}this.buf=I.copyOfUint8Array(this.buf,o)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,o){if(i<0||i>n.length||o<0||i+o-n.length>0)throw new $;this.ensureCapacity(this.count+o),L.arraycopy(n,i,this.buf,this.count,o),this.count+=o}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return I.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Be;(function(v){v[v.ALPHA=0]="ALPHA",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.PUNCT=3]="PUNCT",v[v.ALPHA_SHIFT=4]="ALPHA_SHIFT",v[v.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Be||(Be={}));function ch(){if(typeof window<"u")return window.BigInt||null;if(typeof Rt<"u")return Rt.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ho;function yr(v){if(typeof Ho>"u"&&(Ho=ch()),Ho===null)throw new Error("BigInt is not supported!");return Ho(v)}function I2(){let v=[];v[0]=yr(1);let n=yr(900);v[1]=n;for(let i=2;i<16;i++)v[i]=v[i-1]*n;return v}class z{static decode(n,i){let o=new pe(""),a=X.ISO8859_1;o.enableDecoding(a);let u=1,h=n[u++],d=new ah;for(;u<n[0];){switch(h){case z.TEXT_COMPACTION_MODE_LATCH:u=z.textCompaction(n,u,o);break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:u=z.byteCompaction(h,n,a,u,o);break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[u++]);break;case z.NUMERIC_COMPACTION_MODE_LATCH:u=z.numericCompaction(n,u,o);break;case z.ECI_CHARSET:X.getCharacterSetECIByValue(n[u++]);break;case z.ECI_GENERAL_PURPOSE:u+=2;break;case z.ECI_USER_DEFINED:u++;break;case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=z.decodeMacroBlock(n,u,d);break;case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:throw new B;default:u--,u=z.textCompaction(n,u,o);break}if(u<n.length)h=n[u++];else throw B.getFormatInstance()}if(o.length()===0)throw B.getFormatInstance();let g=new Es(null,o.toString(),null,i);return g.setOther(d),g}static decodeMacroBlock(n,i,o){if(i+z.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw B.getFormatInstance();let a=new Int32Array(z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<z.NUMBER_OF_SEQUENCE_CODEWORDS;d++,i++)a[d]=n[i];o.setSegmentIndex(S.parseInt(z.decodeBase900toBase10(a,z.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new pe;i=z.textCompaction(n,i,u),o.setFileId(u.toString());let h=-1;for(n[i]===z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=i+1);i<n[0];)switch(n[i]){case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new pe;i=z.textCompaction(n,i+1,d),o.setFileName(d.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new pe;i=z.textCompaction(n,i+1,g),o.setSender(g.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new pe;i=z.textCompaction(n,i+1,w),o.setAddressee(w.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let y=new pe;i=z.numericCompaction(n,i+1,y),o.setSegmentCount(S.parseInt(y.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let C=new pe;i=z.numericCompaction(n,i+1,C),o.setTimestamp(lh.parseLong(C.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new pe;i=z.numericCompaction(n,i+1,A),o.setChecksum(S.parseInt(A.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let N=new pe;i=z.numericCompaction(n,i+1,N),o.setFileSize(lh.parseLong(N.toString()));break;default:throw B.getFormatInstance()}break;case z.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(h!==-1){let d=i-h;o.isLastSegment()&&d--,o.setOptionalData(I.copyOfRange(n,h,h+d))}return i}static textCompaction(n,i,o){let a=new Int32Array((n[0]-i)*2),u=new Int32Array((n[0]-i)*2),h=0,d=!1;for(;i<n[0]&&!d;){let g=n[i++];if(g<z.TEXT_COMPACTION_MODE_LATCH)a[h]=g/30,a[h+1]=g%30,h+=2;else switch(g){case z.TEXT_COMPACTION_MODE_LATCH:a[h++]=z.TEXT_COMPACTION_MODE_LATCH;break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:i--,d=!0;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[h]=z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=n[i++],u[h]=g,h++;break}}return z.decodeTextCompaction(a,u,h,o),i}static decodeTextCompaction(n,i,o,a){let u=Be.ALPHA,h=Be.ALPHA,d=0;for(;d<o;){let g=n[d],w="";switch(u){case Be.ALPHA:if(g<26)w=String.fromCharCode(65+g);else switch(g){case 26:w=" ";break;case z.LL:u=Be.LOWER;break;case z.ML:u=Be.MIXED;break;case z.PS:h=u,u=Be.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Be.ALPHA;break}break;case Be.LOWER:if(g<26)w=String.fromCharCode(97+g);else switch(g){case 26:w=" ";break;case z.AS:h=u,u=Be.ALPHA_SHIFT;break;case z.ML:u=Be.MIXED;break;case z.PS:h=u,u=Be.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Be.ALPHA;break}break;case Be.MIXED:if(g<z.PL)w=z.MIXED_CHARS[g];else switch(g){case z.PL:u=Be.PUNCT;break;case 26:w=" ";break;case z.LL:u=Be.LOWER;break;case z.AL:u=Be.ALPHA;break;case z.PS:h=u,u=Be.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Be.ALPHA;break}break;case Be.PUNCT:if(g<z.PAL)w=z.PUNCT_CHARS[g];else switch(g){case z.PAL:u=Be.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Be.ALPHA;break}break;case Be.ALPHA_SHIFT:if(u=h,g<26)w=String.fromCharCode(65+g);else switch(g){case 26:w=" ";break;case z.TEXT_COMPACTION_MODE_LATCH:u=Be.ALPHA;break}break;case Be.PUNCT_SHIFT:if(u=h,g<z.PAL)w=z.PUNCT_CHARS[g];else switch(g){case z.PAL:u=Be.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Be.ALPHA;break}break}w!==""&&a.append(w),d++}}static byteCompaction(n,i,o,a,u){let h=new S2,d=0,g=0,w=!1;switch(n){case z.BYTE_COMPACTION_MODE_LATCH:let y=new Int32Array(6),C=i[a++];for(;a<i[0]&&!w;)switch(y[d++]=C,g=900*g+C,C=i[a++],C){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:a--,w=!0;break;default:if(d%5===0&&d>0){for(let A=0;A<6;++A)h.write(Number(yr(g)>>yr(8*(5-A))));g=0,d=0}break}a===i[0]&&C<z.TEXT_COMPACTION_MODE_LATCH&&(y[d++]=C);for(let A=0;A<d;A++)h.write(y[A]);break;case z.BYTE_COMPACTION_MODE_LATCH_6:for(;a<i[0]&&!w;){let A=i[a++];if(A<z.TEXT_COMPACTION_MODE_LATCH)d++,g=900*g+A;else switch(A){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:a--,w=!0;break}if(d%5===0&&d>0){for(let N=0;N<6;++N)h.write(Number(yr(g)>>yr(8*(5-N))));g=0,d=0}}break}return u.append(Re.decode(h.toByteArray(),o)),a}static numericCompaction(n,i,o){let a=0,u=!1,h=new Int32Array(z.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!u;){let d=n[i++];if(i===n[0]&&(u=!0),d<z.TEXT_COMPACTION_MODE_LATCH)h[a]=d,a++;else switch(d){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(a%z.MAX_NUMERIC_CODEWORDS===0||d===z.NUMERIC_COMPACTION_MODE_LATCH||u)&&a>0&&(o.append(z.decodeBase900toBase10(h,a)),a=0)}return i}static decodeBase900toBase10(n,i){let o=yr(0);for(let u=0;u<i;u++)o+=z.EXP900[i-u-1]*yr(n[u]);let a=o.toString();if(a.charAt(0)!=="1")throw new B;return a.substring(1)}}z.TEXT_COMPACTION_MODE_LATCH=900,z.BYTE_COMPACTION_MODE_LATCH=901,z.NUMERIC_COMPACTION_MODE_LATCH=902,z.BYTE_COMPACTION_MODE_LATCH_6=924,z.ECI_USER_DEFINED=925,z.ECI_GENERAL_PURPOSE=926,z.ECI_CHARSET=927,z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,z.MACRO_PDF417_TERMINATOR=922,z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,z.MAX_NUMERIC_CODEWORDS=15,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,z.PL=25,z.LL=27,z.AS=27,z.ML=28,z.AL=28,z.PS=29,z.PAL=29,z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",z.EXP900=ch()?I2():[],z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ee{constructor(){}static decode(n,i,o,a,u,h,d){let g=new Zr(n,i,o,a,u),w=null,y=null,C;for(let k=!0;;k=!1){if(i!=null&&(w=Ee.getRowIndicatorColumn(n,g,i,!0,h,d)),a!=null&&(y=Ee.getRowIndicatorColumn(n,g,a,!1,h,d)),C=Ee.merge(w,y),C==null)throw W.getNotFoundInstance();let M=C.getBoundingBox();if(k&&M!=null&&(M.getMinY()<g.getMinY()||M.getMaxY()>g.getMaxY()))g=M;else break}C.setBoundingBox(g);let A=C.getBarcodeColumnCount()+1;C.setDetectionResultColumn(0,w),C.setDetectionResultColumn(A,y);let N=w!=null;for(let k=1;k<=A;k++){let M=N?k:A-k;if(C.getDetectionResultColumn(M)!==void 0)continue;let U;M===0||M===A?U=new oh(g,M===0):U=new Is(g),C.setDetectionResultColumn(M,U);let H=-1,Q=H;for(let J=g.getMinY();J<=g.getMaxY();J++){if(H=Ee.getStartColumn(C,M,J,N),H<0||H>g.getMaxX()){if(Q===-1)continue;H=Q}let q=Ee.detectCodeword(n,g.getMinX(),g.getMaxX(),N,H,J,h,d);q!=null&&(U.setCodeword(J,q),Q=H,h=Math.min(h,q.getWidth()),d=Math.max(d,q.getWidth()))}}return Ee.createDecoderResult(C)}static merge(n,i){if(n==null&&i==null)return null;let o=Ee.getBarcodeMetadata(n,i);if(o==null)return null;let a=Zr.merge(Ee.adjustBoundingBox(n),Ee.adjustBoundingBox(i));return new Ts(o,a)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let o=Ee.getMax(i),a=0;for(let d of i)if(a+=o-d,d>0)break;let u=n.getCodewords();for(let d=0;a>0&&u[d]==null;d++)a--;let h=0;for(let d=i.length-1;d>=0&&(h+=o-i[d],!(i[d]>0));d--);for(let d=u.length-1;h>0&&u[d]==null;d--)h--;return n.getBoundingBox().addMissingRows(a,h,n.isLeft())}static getMax(n){let i=-1;for(let o of n)i=Math.max(i,o);return i}static getBarcodeMetadata(n,i){let o;if(n==null||(o=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let a;return i==null||(a=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==a.getColumnCount()&&o.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&o.getRowCount()!==a.getRowCount()?null:o}static getRowIndicatorColumn(n,i,o,a,u,h){let d=new oh(i,a);for(let g=0;g<2;g++){let w=g===0?1:-1,y=Math.trunc(Math.trunc(o.getX()));for(let C=Math.trunc(Math.trunc(o.getY()));C<=i.getMaxY()&&C>=i.getMinY();C+=w){let A=Ee.detectCodeword(n,0,n.getWidth(),a,y,C,u,h);A!=null&&(d.setCodeword(C,A),a?y=A.getStartX():y=A.getEndX())}}return d}static adjustCodewordCount(n,i){let o=i[0][1],a=o.getValue(),u=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Ee.getNumberOfECCodeWords(n.getBarcodeECLevel());if(a.length===0){if(u<1||u>fe.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();o.setValue(u)}else a[0]!==u&&o.setValue(u)}static createDecoderResult(n){let i=Ee.createBarcodeMatrix(n);Ee.adjustCodewordCount(n,i);let o=new Array,a=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),u=[],h=new Array;for(let g=0;g<n.getBarcodeRowCount();g++)for(let w=0;w<n.getBarcodeColumnCount();w++){let y=i[g][w+1].getValue(),C=g*n.getBarcodeColumnCount()+w;y.length===0?o.push(C):y.length===1?a[C]=y[0]:(h.push(C),u.push(y))}let d=new Array(u.length);for(let g=0;g<d.length;g++)d[g]=u[g];return Ee.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),a,fe.toIntArray(o),fe.toIntArray(h),d)}static createDecoderResultFromAmbiguousValues(n,i,o,a,u){let h=new Int32Array(a.length),d=100;for(;d-- >0;){for(let g=0;g<h.length;g++)i[a[g]]=u[g][h[g]];try{return Ee.decodeCodewords(i,n,o)}catch(g){if(!(g instanceof O))throw g}if(h.length===0)throw O.getChecksumInstance();for(let g=0;g<h.length;g++)if(h[g]<u[g].length-1){h[g]++;break}else if(h[g]=0,g===h.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let a=0;a<i.length;a++)for(let u=0;u<i[a].length;u++)i[a][u]=new bs;let o=0;for(let a of n.getDetectionResultColumns()){if(a!=null){for(let u of a.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=0){if(h>=i.length)continue;i[h][o].setValue(u.getValue())}}}o++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,o,a){let u=a?1:-1,h=null;if(Ee.isValidBarcodeColumn(n,i-u)&&(h=n.getDetectionResultColumn(i-u).getCodeword(o)),h!=null)return a?h.getEndX():h.getStartX();if(h=n.getDetectionResultColumn(i).getCodewordNearby(o),h!=null)return a?h.getStartX():h.getEndX();if(Ee.isValidBarcodeColumn(n,i-u)&&(h=n.getDetectionResultColumn(i-u).getCodewordNearby(o)),h!=null)return a?h.getEndX():h.getStartX();let d=0;for(;Ee.isValidBarcodeColumn(n,i-u);){i-=u;for(let g of n.getDetectionResultColumn(i).getCodewords())if(g!=null)return(a?g.getEndX():g.getStartX())+u*d*(g.getEndX()-g.getStartX());d++}return a?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,o,a,u,h,d,g){u=Ee.adjustCodewordStartColumn(n,i,o,a,u,h);let w=Ee.getModuleBitCount(n,i,o,a,u,h);if(w==null)return null;let y,C=be.sum(w);if(a)y=u+C;else{for(let k=0;k<w.length/2;k++){let M=w[k];w[k]=w[w.length-1-k],w[w.length-1-k]=M}y=u,u=y-C}if(!Ee.checkCodewordSkew(C,d,g))return null;let A=qt.getDecodedValue(w),N=fe.getCodeword(A);return N===-1?null:new Ns(u,y,Ee.getCodewordBucketNumber(A),N)}static getModuleBitCount(n,i,o,a,u,h){let d=u,g=new Int32Array(8),w=0,y=a?1:-1,C=a;for(;(a?d<o:d>=i)&&w<g.length;)n.get(d,h)===C?(g[w]++,d+=y):(w++,C=!C);return w===g.length||d===(a?o:i)&&w===g.length-1?g:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,o,a,u,h){let d=u,g=a?-1:1;for(let w=0;w<2;w++){for(;(a?d>=i:d<o)&&a===n.get(d,h);){if(Math.abs(u-d)>Ee.CODEWORD_SKEW_SIZE)return u;d+=g}g=-g,a=!a}return d}static checkCodewordSkew(n,i,o){return i-Ee.CODEWORD_SKEW_SIZE<=n&&n<=o+Ee.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,o){if(n.length===0)throw B.getFormatInstance();let a=1<<i+1,u=Ee.correctErrors(n,o,a);Ee.verifyCodewordCount(n,a);let h=z.decode(n,""+i);return h.setErrorsCorrected(u),h.setErasures(o.length),h}static correctErrors(n,i,o){if(i!=null&&i.length>o/2+Ee.MAX_ERRORS||o<0||o>Ee.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return Ee.errorCorrection.decode(n,o,i)}static verifyCodewordCount(n,i){if(n.length<4)throw B.getFormatInstance();let o=n[0];if(o>n.length)throw B.getFormatInstance();if(o===0)if(i<n.length)n[0]=n.length-i;else throw B.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),o=0,a=i.length-1;for(;!((n&1)!==o&&(o=n&1,a--,a<0));)i[a]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Ee.getCodewordBucketNumber(Ee.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new Ss;for(let o=0;o<n.length;o++){i.format("Row %2d: ",o);for(let a=0;a<n[o].length;a++){let u=n[o][a];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}Ee.CODEWORD_SKEW_SIZE=2,Ee.MAX_ERRORS=3,Ee.MAX_EC_CODEWORDS=512,Ee.errorCorrection=new sh;class bt{decode(n,i=null){let o=bt.decode(n,i,!1);if(o==null||o.length===0||o[0]==null)throw W.getNotFoundInstance();return o[0]}decodeMultiple(n,i=null){try{return bt.decode(n,i,!0)}catch(o){throw o instanceof B||o instanceof O?W.getNotFoundInstance():o}}static decode(n,i,o){const a=new Array,u=ye.detectMultiple(n,i,o);for(const h of u.getPoints()){const d=Ee.decode(u.getBits(),h[4],h[5],h[6],h[7],bt.getMinCodewordWidth(h),bt.getMaxCodewordWidth(h)),g=new Ze(d.getText(),d.getRawBytes(),void 0,h,oe.PDF_417);g.putMetadata(Et.ERROR_CORRECTION_LEVEL,d.getECLevel());const w=d.getOther();w!=null&&g.putMetadata(Et.PDF417_EXTRA_METADATA,w),a.push(g)}return a.map(h=>h)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?S.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(bt.getMaxWidth(n[0],n[4]),bt.getMaxWidth(n[6],n[2])*fe.MODULES_IN_CODEWORD/fe.MODULES_IN_STOP_PATTERN),Math.max(bt.getMaxWidth(n[1],n[5]),bt.getMaxWidth(n[7],n[3])*fe.MODULES_IN_CODEWORD/fe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(bt.getMinWidth(n[0],n[4]),bt.getMinWidth(n[6],n[2])*fe.MODULES_IN_CODEWORD/fe.MODULES_IN_STOP_PATTERN),Math.min(bt.getMinWidth(n[1],n[5]),bt.getMinWidth(n[7],n[3])*fe.MODULES_IN_CODEWORD/fe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Wo extends x{}Wo.kind="ReaderException";class hh{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!s(n)&&n.get(V.TRY_HARDER)===!0,o=s(n)?null:n.get(V.POSSIBLE_FORMATS),a=new Array;if(!s(o)){const u=o.some(h=>h===oe.UPC_A||h===oe.UPC_E||h===oe.EAN_13||h===oe.EAN_8||h===oe.CODABAR||h===oe.CODE_39||h===oe.CODE_93||h===oe.CODE_128||h===oe.ITF||h===oe.RSS_14||h===oe.RSS_EXPANDED);u&&!i&&a.push(new Ai(n,this.verbose)),o.includes(oe.QR_CODE)&&a.push(new xr),o.includes(oe.DATA_MATRIX)&&a.push(new mr),o.includes(oe.AZTEC)&&a.push(new Fo),o.includes(oe.PDF_417)&&a.push(new bt),u&&i&&a.push(new Ai(n,this.verbose))}a.length===0&&(i||a.push(new Ai(n,this.verbose)),a.push(new xr),a.push(new mr),a.push(new Fo),a.push(new bt),i&&a.push(new Ai(n,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Wo("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(o){if(o instanceof Wo)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class b2 extends pn{constructor(n=null,i=500){const o=new hh;o.setHints(n),super(o,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class T2 extends pn{constructor(n=500){super(new bt,n)}}class N2 extends pn{constructor(n=500){super(new xr,n)}}var Gl;(function(v){v[v.ERROR_CORRECTION=0]="ERROR_CORRECTION",v[v.CHARACTER_SET=1]="CHARACTER_SET",v[v.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",v[v.MIN_SIZE=3]="MIN_SIZE",v[v.MAX_SIZE=4]="MAX_SIZE",v[v.MARGIN=5]="MARGIN",v[v.PDF417_COMPACT=6]="PDF417_COMPACT",v[v.PDF417_COMPACTION=7]="PDF417_COMPACTION",v[v.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",v[v.AZTEC_LAYERS=9]="AZTEC_LAYERS",v[v.QR_VERSION=10]="QR_VERSION"})(Gl||(Gl={}));var pt=Gl;class Xl{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new $t(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let o=i[i.length-1];const a=this.field;for(let u=i.length;u<=n;u++){const h=o.multiply(new $t(a,Int32Array.from([1,a.exp(u-1+a.getGeneratorBase())])));i.push(h),o=h}}return i[n]}encode(n,i){if(i===0)throw new _("No error correction bytes");const o=n.length-i;if(o<=0)throw new _("No data bytes provided");const a=this.buildGenerator(i),u=new Int32Array(o);L.arraycopy(n,0,u,0,o);let h=new $t(this.field,u);h=h.multiplyByMonomial(i,1);const g=h.divide(a)[1].getCoefficients(),w=i-g.length;for(let y=0;y<w;y++)n[o+y]=0;L.arraycopy(g,0,n,o+w,g.length)}}class st{constructor(){}static applyMaskPenaltyRule1(n){return st.applyMaskPenaltyRule1Internal(n,!0)+st.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const o=n.getArray(),a=n.getWidth(),u=n.getHeight();for(let h=0;h<u-1;h++){const d=o[h];for(let g=0;g<a-1;g++){const w=d[g];w===d[g+1]&&w===o[h+1][g]&&w===o[h+1][g+1]&&i++}}return st.N2*i}static applyMaskPenaltyRule3(n){let i=0;const o=n.getArray(),a=n.getWidth(),u=n.getHeight();for(let h=0;h<u;h++)for(let d=0;d<a;d++){const g=o[h];d+6<a&&g[d]===1&&g[d+1]===0&&g[d+2]===1&&g[d+3]===1&&g[d+4]===1&&g[d+5]===0&&g[d+6]===1&&(st.isWhiteHorizontal(g,d-4,d)||st.isWhiteHorizontal(g,d+7,d+11))&&i++,h+6<u&&o[h][d]===1&&o[h+1][d]===0&&o[h+2][d]===1&&o[h+3][d]===1&&o[h+4][d]===1&&o[h+5][d]===0&&o[h+6][d]===1&&(st.isWhiteVertical(o,d,h-4,h)||st.isWhiteVertical(o,d,h+7,h+11))&&i++}return i*st.N3}static isWhiteHorizontal(n,i,o){i=Math.max(i,0),o=Math.min(o,n.length);for(let a=i;a<o;a++)if(n[a]===1)return!1;return!0}static isWhiteVertical(n,i,o,a){o=Math.max(o,0),a=Math.min(a,n.length);for(let u=o;u<a;u++)if(n[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const o=n.getArray(),a=n.getWidth(),u=n.getHeight();for(let g=0;g<u;g++){const w=o[g];for(let y=0;y<a;y++)w[y]===1&&i++}const h=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-h)*10/h)*st.N4}static getDataMaskBit(n,i,o){let a,u;switch(n){case 0:a=o+i&1;break;case 1:a=o&1;break;case 2:a=i%3;break;case 3:a=(o+i)%3;break;case 4:a=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:u=o*i,a=(u&1)+u%3;break;case 6:u=o*i,a=(u&1)+u%3&1;break;case 7:u=o*i,a=u%3+(o+i&1)&1;break;default:throw new _("Invalid mask pattern: "+n)}return a===0}static applyMaskPenaltyRule1Internal(n,i){let o=0;const a=i?n.getHeight():n.getWidth(),u=i?n.getWidth():n.getHeight(),h=n.getArray();for(let d=0;d<a;d++){let g=0,w=-1;for(let y=0;y<u;y++){const C=i?h[d][y]:h[y][d];C===w?g++:(g>=5&&(o+=st.N1+(g-5)),g=1,w=C)}g>=5&&(o+=st.N1+(g-5))}return o}}st.N1=3,st.N2=3,st.N3=40,st.N4=10;class Go{constructor(n,i){this.width=n,this.height=i;const o=new Array(i);for(let a=0;a!==i;a++)o[a]=new Uint8Array(n);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,o){this.bytes[i][n]=o}setBoolean(n,i,o){this.bytes[i][n]=o?1:0}clear(n){for(const i of this.bytes)I.fill(i,n)}equals(n){if(!(n instanceof Go))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,a=this.height;o<a;++o){const u=this.bytes[o],h=i.bytes[o];for(let d=0,g=this.width;d<g;++d)if(u[d]!==h[d])return!1}return!0}toString(){const n=new pe;for(let i=0,o=this.height;i<o;++i){const a=this.bytes[i];for(let u=0,h=this.width;u<h;++u)switch(a[u]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Qr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new pe;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Qr.NUM_MASK_PATTERNS}}Qr.NUM_MASK_PATTERNS=8;class Fe extends x{}Fe.kind="WriterException";class he{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,o,a,u){he.clearMatrix(u),he.embedBasicPatterns(o,u),he.embedTypeInfo(i,a,u),he.maybeEmbedVersionInfo(o,u),he.embedDataBits(n,a,u)}static embedBasicPatterns(n,i){he.embedPositionDetectionPatternsAndSeparators(i),he.embedDarkDotAtLeftBottomCorner(i),he.maybeEmbedPositionAdjustmentPatterns(n,i),he.embedTimingPatterns(i)}static embedTypeInfo(n,i,o){const a=new D;he.makeTypeInfoBits(n,i,a);for(let u=0,h=a.getSize();u<h;++u){const d=a.get(a.getSize()-1-u),g=he.TYPE_INFO_COORDINATES[u],w=g[0],y=g[1];if(o.setBoolean(w,y,d),u<8){const C=o.getWidth()-u-1;o.setBoolean(C,8,d)}else{const A=o.getHeight()-7+(u-8);o.setBoolean(8,A,d)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const o=new D;he.makeVersionInfoBits(n,o);let a=6*3-1;for(let u=0;u<6;++u)for(let h=0;h<3;++h){const d=o.get(a);a--,i.setBoolean(u,i.getHeight()-11+h,d),i.setBoolean(i.getHeight()-11+h,u,d)}}static embedDataBits(n,i,o){let a=0,u=-1,h=o.getWidth()-1,d=o.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);d>=0&&d<o.getHeight();){for(let g=0;g<2;++g){const w=h-g;if(!he.isEmpty(o.get(w,d)))continue;let y;a<n.getSize()?(y=n.get(a),++a):y=!1,i!==255&&st.getDataMaskBit(i,w,d)&&(y=!y),o.setBoolean(w,d,y)}d+=u}u=-u,d+=u,h-=2}if(a!==n.getSize())throw new Fe("Not all bits consumed: "+a+"/"+n.getSize())}static findMSBSet(n){return 32-S.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new _("0 polynomial");const o=he.findMSBSet(i);for(n<<=o-1;he.findMSBSet(n)>=o;)n^=i<<he.findMSBSet(n)-o;return n}static makeTypeInfoBits(n,i,o){if(!Qr.isValidMaskPattern(i))throw new Fe("Invalid mask pattern");const a=n.getBits()<<3|i;o.appendBits(a,5);const u=he.calculateBCHCode(a,he.TYPE_INFO_POLY);o.appendBits(u,10);const h=new D;if(h.appendBits(he.TYPE_INFO_MASK_PATTERN,15),o.xor(h),o.getSize()!==15)throw new Fe("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const o=he.calculateBCHCode(n.getVersionNumber(),he.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new Fe("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const o=(i+1)%2;he.isEmpty(n.get(i,6))&&n.setNumber(i,6,o),he.isEmpty(n.get(6,i))&&n.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Fe;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,o){for(let a=0;a<8;++a){if(!he.isEmpty(o.get(n+a,i)))throw new Fe;o.setNumber(n+a,i,0)}}static embedVerticalSeparationPattern(n,i,o){for(let a=0;a<7;++a){if(!he.isEmpty(o.get(n,i+a)))throw new Fe;o.setNumber(n,i+a,0)}}static embedPositionAdjustmentPattern(n,i,o){for(let a=0;a<5;++a){const u=he.POSITION_ADJUSTMENT_PATTERN[a];for(let h=0;h<5;++h)o.setNumber(n+h,i+a,u[h])}}static embedPositionDetectionPattern(n,i,o){for(let a=0;a<7;++a){const u=he.POSITION_DETECTION_PATTERN[a];for(let h=0;h<7;++h)o.setNumber(n+h,i+a,u[h])}}static embedPositionDetectionPatternsAndSeparators(n){const i=he.POSITION_DETECTION_PATTERN[0].length;he.embedPositionDetectionPattern(0,0,n),he.embedPositionDetectionPattern(n.getWidth()-i,0,n),he.embedPositionDetectionPattern(0,n.getWidth()-i,n);const o=8;he.embedHorizontalSeparationPattern(0,o-1,n),he.embedHorizontalSeparationPattern(n.getWidth()-o,o-1,n),he.embedHorizontalSeparationPattern(0,n.getWidth()-o,n);const a=7;he.embedVerticalSeparationPattern(a,0,n),he.embedVerticalSeparationPattern(n.getHeight()-a-1,0,n),he.embedVerticalSeparationPattern(a,n.getHeight()-a,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const o=n.getVersionNumber()-1,a=he.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,h=a.length;u!==h;u++){const d=a[u];if(d>=0)for(let g=0;g!==h;g++){const w=a[g];w>=0&&he.isEmpty(i.get(w,d))&&he.embedPositionAdjustmentPattern(w-2,d-2,i)}}}}he.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),he.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),he.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),he.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),he.VERSION_INFO_POLY=7973,he.TYPE_INFO_POLY=1335,he.TYPE_INFO_MASK_PATTERN=21522;class R2{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class We{constructor(){}static calculateMaskPenalty(n){return st.applyMaskPenaltyRule1(n)+st.applyMaskPenaltyRule2(n)+st.applyMaskPenaltyRule3(n)+st.applyMaskPenaltyRule4(n)}static encode(n,i,o=null){let a=We.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(pt.CHARACTER_SET)!==void 0;u&&(a=o.get(pt.CHARACTER_SET).toString());const h=this.chooseMode(n,a),d=new D;if(h===ce.BYTE&&(u||We.DEFAULT_BYTE_MODE_ENCODING!==a)){const J=X.getCharacterSetECIByName(a);J!==void 0&&this.appendECI(J,d)}this.appendModeInfo(h,d);const g=new D;this.appendBytes(n,h,g,a);let w;if(o!==null&&o.get(pt.QR_VERSION)!==void 0){const J=Number.parseInt(o.get(pt.QR_VERSION).toString(),10);w=le.getVersionForNumber(J);const q=this.calculateBitsNeeded(h,d,g,w);if(!this.willFit(q,w,i))throw new Fe("Data too big for requested version")}else w=this.recommendVersion(i,h,d,g);const y=new D;y.appendBitArray(d);const C=h===ce.BYTE?g.getSizeInBytes():n.length;this.appendLengthInfo(C,w,h,y),y.appendBitArray(g);const A=w.getECBlocksForLevel(i),N=w.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(N,y);const k=this.interleaveWithECBytes(y,w.getTotalCodewords(),N,A.getNumBlocks()),M=new Qr;M.setECLevel(i),M.setMode(h),M.setVersion(w);const U=w.getDimensionForVersion(),H=new Go(U,U),Q=this.chooseMaskPattern(k,i,w,H);return M.setMaskPattern(Q),he.buildMatrix(k,i,w,Q,H),M.setMatrix(H),M}static recommendVersion(n,i,o,a){const u=this.calculateBitsNeeded(i,o,a,le.getVersionForNumber(1)),h=this.chooseVersion(u,n),d=this.calculateBitsNeeded(i,o,a,h);return this.chooseVersion(d,n)}static calculateBitsNeeded(n,i,o,a){return i.getSize()+n.getCharacterCountBits(a)+o.getSize()}static getAlphanumericCode(n){return n<We.ALPHANUMERIC_TABLE.length?We.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(X.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return ce.KANJI;let o=!1,a=!1;for(let u=0,h=n.length;u<h;++u){const d=n.charAt(u);if(We.isDigit(d))o=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)a=!0;else return ce.BYTE}return a?ce.ALPHANUMERIC:o?ce.NUMERIC:ce.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=Re.encode(n,X.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let a=0;a<o;a+=2){const u=i[a]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(n,i,o,a){let u=Number.MAX_SAFE_INTEGER,h=-1;for(let d=0;d<Qr.NUM_MASK_PATTERNS;d++){he.buildMatrix(n,i,o,d,a);let g=this.calculateMaskPenalty(a);g<u&&(u=g,h=d)}return h}static chooseVersion(n,i){for(let o=1;o<=40;o++){const a=le.getVersionForNumber(o);if(We.willFit(n,a,i))return a}throw new Fe("Data too big")}static willFit(n,i,o){const a=i.getTotalCodewords(),h=i.getECBlocksForLevel(o).getTotalECCodewords(),d=a-h,g=(n+7)/8;return d>=g}static terminateBits(n,i){const o=n*8;if(i.getSize()>o)throw new Fe("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let h=0;h<4&&i.getSize()<o;++h)i.appendBit(!1);const a=i.getSize()&7;if(a>0)for(let h=a;h<8;h++)i.appendBit(!1);const u=n-i.getSizeInBytes();for(let h=0;h<u;++h)i.appendBits(h&1?17:236,8);if(i.getSize()!==o)throw new Fe("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,o,a,u,h){if(a>=o)throw new Fe("Block ID too large");const d=n%o,g=o-d,w=Math.floor(n/o),y=w+1,C=Math.floor(i/o),A=C+1,N=w-C,k=y-A;if(N!==k)throw new Fe("EC bytes mismatch");if(o!==g+d)throw new Fe("RS blocks mismatch");if(n!==(C+N)*g+(A+k)*d)throw new Fe("Total bytes mismatch");a<g?(u[0]=C,h[0]=N):(u[0]=A,h[0]=k)}static interleaveWithECBytes(n,i,o,a){if(n.getSizeInBytes()!==o)throw new Fe("Number of bits and data bytes does not match");let u=0,h=0,d=0;const g=new Array;for(let y=0;y<a;++y){const C=new Int32Array(1),A=new Int32Array(1);We.getNumDataBytesAndNumECBytesForBlockID(i,o,a,y,C,A);const N=C[0],k=new Uint8Array(N);n.toBytes(8*u,k,0,N);const M=We.generateECBytes(k,A[0]);g.push(new R2(k,M)),h=Math.max(h,N),d=Math.max(d,M.length),u+=C[0]}if(o!==u)throw new Fe("Data bytes does not match offset");const w=new D;for(let y=0;y<h;++y)for(const C of g){const A=C.getDataBytes();y<A.length&&w.appendBits(A[y],8)}for(let y=0;y<d;++y)for(const C of g){const A=C.getErrorCorrectionBytes();y<A.length&&w.appendBits(A[y],8)}if(i!==w.getSizeInBytes())throw new Fe("Interleaving error: "+i+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(n,i){const o=n.length,a=new Int32Array(o+i);for(let h=0;h<o;h++)a[h]=n[h]&255;new Xl(Oe.QR_CODE_FIELD_256).encode(a,i);const u=new Uint8Array(i);for(let h=0;h<i;h++)u[h]=a[o+h];return u}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,o,a){const u=o.getCharacterCountBits(i);if(n>=1<<u)throw new Fe(n+" is bigger than "+((1<<u)-1));a.appendBits(n,u)}static appendBytes(n,i,o,a){switch(i){case ce.NUMERIC:We.appendNumericBytes(n,o);break;case ce.ALPHANUMERIC:We.appendAlphanumericBytes(n,o);break;case ce.BYTE:We.append8BitBytes(n,o,a);break;case ce.KANJI:We.appendKanjiBytes(n,o);break;default:throw new Fe("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=We.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const o=n.length;let a=0;for(;a<o;){const u=We.getDigit(n.charAt(a));if(a+2<o){const h=We.getDigit(n.charAt(a+1)),d=We.getDigit(n.charAt(a+2));i.appendBits(u*100+h*10+d,10),a+=3}else if(a+1<o){const h=We.getDigit(n.charAt(a+1));i.appendBits(u*10+h,7),a+=2}else i.appendBits(u,4),a++}}static appendAlphanumericBytes(n,i){const o=n.length;let a=0;for(;a<o;){const u=We.getAlphanumericCode(n.charCodeAt(a));if(u===-1)throw new Fe;if(a+1<o){const h=We.getAlphanumericCode(n.charCodeAt(a+1));if(h===-1)throw new Fe;i.appendBits(u*45+h,11),a+=2}else i.appendBits(u,6),a++}}static append8BitBytes(n,i,o){let a;try{a=Re.encode(n,o)}catch(u){throw new Fe(u)}for(let u=0,h=a.length;u!==h;u++){const d=a[u];i.appendBits(d,8)}}static appendKanjiBytes(n,i){let o;try{o=Re.encode(n,X.SJIS)}catch(u){throw new Fe(u)}const a=o.length;for(let u=0;u<a;u+=2){const h=o[u]&255,d=o[u+1]&255,g=h<<8&4294967295|d;let w=-1;if(g>=33088&&g<=40956?w=g-33088:g>=57408&&g<=60351&&(w=g-49472),w===-1)throw new Fe("Invalid byte sequence");const y=(w>>8)*192+(w&255);i.appendBits(y,13)}}static appendECI(n,i){i.appendBits(ce.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}We.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),We.DEFAULT_BYTE_MODE_ENCODING=X.UTF8.getName();class Jr{write(n,i,o,a=null){if(n.length===0)throw new _("Found empty contents");if(i<0||o<0)throw new _("Requested dimensions are too small: "+i+"x"+o);let u=Ve.L,h=Jr.QUIET_ZONE_SIZE;a!==null&&(a.get(pt.ERROR_CORRECTION)!==void 0&&(u=Ve.fromString(a.get(pt.ERROR_CORRECTION).toString())),a.get(pt.MARGIN)!==void 0&&(h=Number.parseInt(a.get(pt.MARGIN).toString(),10)));const d=We.encode(n,u,a);return this.renderResult(d,i,o,h)}writeToDom(n,i,o,a,u=null){typeof n=="string"&&(n=document.querySelector(n));const h=this.write(i,o,a,u);n&&n.appendChild(h)}renderResult(n,i,o,a){const u=n.getMatrix();if(u===null)throw new Un;const h=u.getWidth(),d=u.getHeight(),g=h+a*2,w=d+a*2,y=Math.max(i,g),C=Math.max(o,w),A=Math.min(Math.floor(y/g),Math.floor(C/w)),N=Math.floor((y-h*A)/2),k=Math.floor((C-d*A)/2),M=this.createSVGElement(y,C);for(let U=0,H=k;U<d;U++,H+=A)for(let Q=0,J=N;Q<h;Q++,J+=A)if(u.get(Q,U)===1){const q=this.createSvgRectElement(J,H,A,A);M.appendChild(q)}return M}createSVGElement(n,i){const o=document.createElementNS(Jr.SVG_NS,"svg");return o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(n,i,o,a){const u=document.createElementNS(Jr.SVG_NS,"rect");return u.setAttributeNS(null,"x",n.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",a.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Jr.QUIET_ZONE_SIZE=4,Jr.SVG_NS="http://www.w3.org/2000/svg";class Ii{encode(n,i,o,a,u){if(n.length===0)throw new _("Found empty contents");if(i!==oe.QR_CODE)throw new _("Can only encode QR_CODE, but got "+i);if(o<0||a<0)throw new _(`Requested dimensions are too small: ${o}x${a}`);let h=Ve.L,d=Ii.QUIET_ZONE_SIZE;u!==null&&(u.get(pt.ERROR_CORRECTION)!==void 0&&(h=Ve.fromString(u.get(pt.ERROR_CORRECTION).toString())),u.get(pt.MARGIN)!==void 0&&(d=Number.parseInt(u.get(pt.MARGIN).toString(),10)));const g=We.encode(n,h,u);return Ii.renderResult(g,o,a,d)}static renderResult(n,i,o,a){const u=n.getMatrix();if(u===null)throw new Un;const h=u.getWidth(),d=u.getHeight(),g=h+a*2,w=d+a*2,y=Math.max(i,g),C=Math.max(o,w),A=Math.min(Math.floor(y/g),Math.floor(C/w)),N=Math.floor((y-h*A)/2),k=Math.floor((C-d*A)/2),M=new lt(y,C);for(let U=0,H=k;U<d;U++,H+=A)for(let Q=0,J=N;Q<h;Q++,J+=A)u.get(Q,U)===1&&M.setRegion(J,H,A,A);return M}}Ii.QUIET_ZONE_SIZE=4;class O2{encode(n,i,o,a,u){let h;switch(i){case oe.QR_CODE:h=new Ii;break;default:throw new _("No encoder available for format "+i)}return h.encode(n,i,o,a,u)}}class Hn extends te{constructor(n,i,o,a,u,h,d,g){if(super(h,d),this.yuvData=n,this.dataWidth=i,this.dataHeight=o,this.left=a,this.top=u,a+h>i||u+d>o)throw new _("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(h,d)}getRow(n,i){if(n<0||n>=this.getHeight())throw new _("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const a=(n+this.top)*this.dataWidth+this.left;return L.arraycopy(this.yuvData,a,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=n*i,a=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return L.arraycopy(this.yuvData,u,a,0,o),a;for(let h=0;h<i;h++){const d=h*n;L.arraycopy(this.yuvData,u,a,d,n),u+=this.dataWidth}return a}isCropSupported(){return!0}crop(n,i,o,a){return new Hn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,o,a,!1)}renderThumbnail(){const n=this.getWidth()/Hn.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Hn.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(n*i),a=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let h=0;h<i;h++){const d=h*n;for(let g=0;g<n;g++){const w=a[u+g*Hn.THUMBNAIL_SCALE_FACTOR]&255;o[d+g]=4278190080|w*65793}u+=this.dataWidth*Hn.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/Hn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Hn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const o=this.yuvData;for(let a=0,u=this.top*this.dataWidth+this.left;a<i;a++,u+=this.dataWidth){const h=u+n/2;for(let d=u,g=u+n-1;d<h;d++,g--){const w=o[d];o[d]=o[g],o[g]=w}}}invert(){return new de(this)}}Hn.THUMBNAIL_SCALE_FACTOR=2;class $l extends te{constructor(n,i,o,a,u,h,d){if(super(i,o),this.dataWidth=a,this.dataHeight=u,this.left=h,this.top=d,n.BYTES_PER_ELEMENT===4){const g=i*o,w=new Uint8ClampedArray(g);for(let y=0;y<g;y++){const C=n[y],A=C>>16&255,N=C>>7&510,k=C&255;w[y]=(A+N+k)/4&255}this.luminances=w}else this.luminances=n;if(a===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=o),h===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new _("Requested row is outside the image: "+n);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const a=(n+this.top)*this.dataWidth+this.left;return L.arraycopy(this.luminances,a,i,0,o),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=n*i,a=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return L.arraycopy(this.luminances,u,a,0,o),a;for(let h=0;h<i;h++){const d=h*n;L.arraycopy(this.luminances,u,a,d,n),u+=this.dataWidth}return a}isCropSupported(){return!0}crop(n,i,o,a){return new $l(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new de(this)}}class dh extends X{static forName(n){return this.getCharacterSetECIByName(n)}}class Kl{}Kl.ISO_8859_1=X.ISO8859_1;class fh{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class gh{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class k2{constructor(n){this.previous=n}getPrevious(){return this.previous}}class bi extends k2{constructor(n,i,o){super(n),this.value=i,this.bitCount=o}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new bi(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new bi(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+S.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Yl extends bi{constructor(n,i,o){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(n,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):o===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(n,i){return new Yl(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function D2(v,n,i){return new Yl(v,n,i)}function Rs(v,n,i){return new bi(v,n,i)}const P2=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Er=0,Xo=1,yn=2,ph=3,Wn=4,M2=new bi(null,0,0),ql=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function B2(v){for(let n of v)I.fill(n,-1);return v[Er][Wn]=0,v[Xo][Wn]=0,v[Xo][Er]=28,v[ph][Wn]=0,v[yn][Wn]=0,v[yn][Er]=15,v}const wh=B2(I.createInt32Array(6,6));class Gn{constructor(n,i,o,a){this.token=n,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let o=this.bitCount,a=this.token;if(n!==this.mode){let h=ql[this.mode][n];a=Rs(a,h&65535,h>>16),o+=h>>16}let u=n===yn?4:5;return a=Rs(a,i,u),new Gn(a,n,0,o+u)}shiftAndAppend(n,i){let o=this.token,a=this.mode===yn?4:5;return o=Rs(o,wh[this.mode][n],a),o=Rs(o,i,5),new Gn(o,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(n){let i=this.token,o=this.mode,a=this.bitCount;if(this.mode===Wn||this.mode===yn){let d=ql[o][Er];i=Rs(i,d&65535,d>>16),a+=d>>16,o=Er}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Gn(i,o,this.binaryShiftByteCount+1,a+u);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(n+1)),h}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=D2(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Gn(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(ql[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=Gn.calculateBinaryShiftCost(n)-Gn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let a=this.endBinaryShift(n.length).token;a!==null;a=a.getPrevious())i.unshift(a);let o=new D;for(const a of i)a.appendTo(o,n);return o}toString(){return ae.format("%s bits=%d bytes=%d",P2[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Gn.INITIAL_STATE=new Gn(M2,Er,0,0);function L2(v){const n=ae.getCharCode(" "),i=ae.getCharCode("."),o=ae.getCharCode(",");v[Er][n]=1;const a=ae.getCharCode("Z"),u=ae.getCharCode("A");for(let A=u;A<=a;A++)v[Er][A]=A-u+2;v[Xo][n]=1;const h=ae.getCharCode("z"),d=ae.getCharCode("a");for(let A=d;A<=h;A++)v[Xo][A]=A-d+2;v[yn][n]=1;const g=ae.getCharCode("9"),w=ae.getCharCode("0");for(let A=w;A<=g;A++)v[yn][A]=A-w+2;v[yn][o]=12,v[yn][i]=13;const y=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let A=0;A<y.length;A++)v[ph][ae.getCharCode(y[A])]=A;const C=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<C.length;A++)ae.getCharCode(C[A])>0&&(v[Wn][ae.getCharCode(C[A])]=A);return v}const Zl=L2(I.createInt32Array(5,256));class Os{constructor(n){this.text=n}encode(){const n=ae.getCharCode(" "),i=ae.getCharCode(`
`);let o=gh.singletonList(Gn.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let h,d=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ae.getCharCode("\r"):h=d===i?2:0;break;case ae.getCharCode("."):h=d===n?3:0;break;case ae.getCharCode(","):h=d===n?4:0;break;case ae.getCharCode(":"):h=d===n?5:0;break;default:h=0}h>0?(o=Os.updateStateListForPair(o,u,h),u++):o=this.updateStateListForChar(o,u)}return gh.min(o,(u,h)=>u.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const o=[];for(let a of n)this.updateStateForChar(a,i,o);return Os.simplifyStates(o)}updateStateForChar(n,i,o){let a=this.text[i]&255,u=Zl[n.getMode()][a]>0,h=null;for(let d=0;d<=Wn;d++){let g=Zl[d][a];if(g>0){if(h==null&&(h=n.endBinaryShift(i)),!u||d===n.getMode()||d===yn){const w=h.latchAndAppend(d,g);o.push(w)}if(!u&&wh[n.getMode()][d]>=0){const w=h.shiftAndAppend(d,g);o.push(w)}}}if(n.getBinaryShiftByteCount()>0||Zl[n.getMode()][a]===0){let d=n.addBinaryShiftChar(i);o.push(d)}}static updateStateListForPair(n,i,o){const a=[];for(let u of n)this.updateStateForPair(u,i,o,a);return this.simplifyStates(a)}static updateStateForPair(n,i,o,a){let u=n.endBinaryShift(i);if(a.push(u.latchAndAppend(Wn,o)),n.getMode()!==Wn&&a.push(u.shiftAndAppend(Wn,o)),o===3||o===4){let h=u.latchAndAppend(yn,16-o).latchAndAppend(yn,1);a.push(h)}if(n.getBinaryShiftByteCount()>0){let h=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);a.push(h)}}static simplifyStates(n){let i=[];for(const o of n){let a=!0;for(const u of i){if(u.isBetterThanOrEqualTo(o)){a=!1;break}o.isBetterThanOrEqualTo(u)&&(i=i.filter(h=>h!==u))}a&&i.push(o)}return i}}class Te{constructor(){}static encodeBytes(n){return Te.encode(n,Te.DEFAULT_EC_PERCENT,Te.DEFAULT_AZTEC_LAYERS)}static encode(n,i,o){let a=new Os(n).encode(),u=S.truncDivision(a.getSize()*i,100)+11,h=a.getSize()+u,d,g,w,y,C;if(o!==Te.DEFAULT_AZTEC_LAYERS){if(d=o<0,g=Math.abs(o),g>(d?Te.MAX_NB_BITS_COMPACT:Te.MAX_NB_BITS))throw new _(ae.format("Illegal value %s for layers",o));w=Te.totalBitsInLayer(g,d),y=Te.WORD_SIZE[g];let q=w-w%y;if(C=Te.stuffBits(a,y),C.getSize()+u>q)throw new _("Data to large for user specified layer");if(d&&C.getSize()>y*64)throw new _("Data to large for user specified layer")}else{y=0,C=null;for(let q=0;;q++){if(q>Te.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(d=q<=3,g=d?q+1:q,w=Te.totalBitsInLayer(g,d),h>w)continue;(C==null||y!==Te.WORD_SIZE[g])&&(y=Te.WORD_SIZE[g],C=Te.stuffBits(a,y));let _e=w-w%y;if(!(d&&C.getSize()>y*64)&&C.getSize()+u<=_e)break}}let A=Te.generateCheckWords(C,w,y),N=C.getSize()/y,k=Te.generateModeMessage(d,g,N),M=(d?11:14)+g*4,U=new Int32Array(M),H;if(d){H=M;for(let q=0;q<U.length;q++)U[q]=q}else{H=M+1+2*S.truncDivision(S.truncDivision(M,2)-1,15);let q=S.truncDivision(M,2),_e=S.truncDivision(H,2);for(let me=0;me<q;me++){let Zt=me+S.truncDivision(me,15);U[q-me-1]=_e-Zt-1,U[q+me]=_e+Zt+1}}let Q=new lt(H);for(let q=0,_e=0;q<g;q++){let me=(g-q)*4+(d?9:12);for(let Zt=0;Zt<me;Zt++){let Tn=Zt*2;for(let Qt=0;Qt<2;Qt++)A.get(_e+Tn+Qt)&&Q.set(U[q*2+Qt],U[q*2+Zt]),A.get(_e+me*2+Tn+Qt)&&Q.set(U[q*2+Zt],U[M-1-q*2-Qt]),A.get(_e+me*4+Tn+Qt)&&Q.set(U[M-1-q*2-Qt],U[M-1-q*2-Zt]),A.get(_e+me*6+Tn+Qt)&&Q.set(U[M-1-q*2-Zt],U[q*2+Qt])}_e+=me*8}if(Te.drawModeMessage(Q,d,H,k),d)Te.drawBullsEye(Q,S.truncDivision(H,2),5);else{Te.drawBullsEye(Q,S.truncDivision(H,2),7);for(let q=0,_e=0;q<S.truncDivision(M,2)-1;q+=15,_e+=16)for(let me=S.truncDivision(H,2)&1;me<H;me+=2)Q.set(S.truncDivision(H,2)-_e,me),Q.set(S.truncDivision(H,2)+_e,me),Q.set(me,S.truncDivision(H,2)-_e),Q.set(me,S.truncDivision(H,2)+_e)}let J=new fh;return J.setCompact(d),J.setSize(H),J.setLayers(g),J.setCodeWords(N),J.setMatrix(Q),J}static drawBullsEye(n,i,o){for(let a=0;a<o;a+=2)for(let u=i-a;u<=i+a;u++)n.set(u,i-a),n.set(u,i+a),n.set(i-a,u),n.set(i+a,u);n.set(i-o,i-o),n.set(i-o+1,i-o),n.set(i-o,i-o+1),n.set(i+o,i-o),n.set(i+o,i-o+1),n.set(i+o,i+o-1)}static generateModeMessage(n,i,o){let a=new D;return n?(a.appendBits(i-1,2),a.appendBits(o-1,6),a=Te.generateCheckWords(a,28,4)):(a.appendBits(i-1,5),a.appendBits(o-1,11),a=Te.generateCheckWords(a,40,4)),a}static drawModeMessage(n,i,o,a){let u=S.truncDivision(o,2);if(i)for(let h=0;h<7;h++){let d=u-3+h;a.get(h)&&n.set(d,u-5),a.get(h+7)&&n.set(u+5,d),a.get(20-h)&&n.set(d,u+5),a.get(27-h)&&n.set(u-5,d)}else for(let h=0;h<10;h++){let d=u-5+h+S.truncDivision(h,5);a.get(h)&&n.set(d,u-7),a.get(h+10)&&n.set(u+7,d),a.get(29-h)&&n.set(d,u+7),a.get(39-h)&&n.set(u-7,d)}}static generateCheckWords(n,i,o){let a=n.getSize()/o,u=new Xl(Te.getGF(o)),h=S.truncDivision(i,o),d=Te.bitsToWords(n,o,h);u.encode(d,h-a);let g=i%o,w=new D;w.appendBits(0,g);for(const y of Array.from(d))w.appendBits(y,o);return w}static bitsToWords(n,i,o){let a=new Int32Array(o),u,h;for(u=0,h=n.getSize()/i;u<h;u++){let d=0;for(let g=0;g<i;g++)d|=n.get(u*i+g)?1<<i-g-1:0;a[u]=d}return a}static getGF(n){switch(n){case 4:return Oe.AZTEC_PARAM;case 6:return Oe.AZTEC_DATA_6;case 8:return Oe.AZTEC_DATA_8;case 10:return Oe.AZTEC_DATA_10;case 12:return Oe.AZTEC_DATA_12;default:throw new _("Unsupported word size "+n)}}static stuffBits(n,i){let o=new D,a=n.getSize(),u=(1<<i)-2;for(let h=0;h<a;h+=i){let d=0;for(let g=0;g<i;g++)(h+g>=a||n.get(h+g))&&(d|=1<<i-1-g);(d&u)===u?(o.appendBits(d&u,i),h--):d&u?o.appendBits(d,i):(o.appendBits(d|1,i),h--)}return o}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Te.DEFAULT_EC_PERCENT=33,Te.DEFAULT_AZTEC_LAYERS=0,Te.MAX_NB_BITS=32,Te.MAX_NB_BITS_COMPACT=4,Te.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class $o{encode(n,i,o,a){return this.encodeWithHints(n,i,o,a,null)}encodeWithHints(n,i,o,a,u){let h=Kl.ISO_8859_1,d=Te.DEFAULT_EC_PERCENT,g=Te.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(pt.CHARACTER_SET)&&(h=dh.forName(u.get(pt.CHARACTER_SET).toString())),u.has(pt.ERROR_CORRECTION)&&(d=S.parseInt(u.get(pt.ERROR_CORRECTION).toString())),u.has(pt.AZTEC_LAYERS)&&(g=S.parseInt(u.get(pt.AZTEC_LAYERS).toString()))),$o.encodeLayers(n,i,o,a,h,d,g)}static encodeLayers(n,i,o,a,u,h,d){if(i!==oe.AZTEC)throw new _("Can only encode AZTEC, but got "+i);let g=Te.encode(ae.getBytes(n,u),h,d);return $o.renderResult(g,o,a)}static renderResult(n,i,o){let a=n.getMatrix();if(a==null)throw new Un;let u=a.getWidth(),h=a.getHeight(),d=Math.max(i,u),g=Math.max(o,h),w=Math.min(d/u,g/h),y=(d-u*w)/2,C=(g-h*w)/2,A=new lt(d,g);for(let N=0,k=C;N<h;N++,k+=w)for(let M=0,U=y;M<u;M++,U+=w)a.get(M,N)&&A.setRegion(U,k,w,w);return A}}r.AbstractExpandedDecoder=Bl,r.ArgumentException=E,r.ArithmeticException=Mo,r.AztecCode=fh,r.AztecCodeReader=Fo,r.AztecCodeWriter=$o,r.AztecDecoder=je,r.AztecDetector=J0,r.AztecDetectorResult=Z0,r.AztecEncoder=Te,r.AztecHighLevelEncoder=Os,r.AztecPoint=Ut,r.BarcodeFormat=oe,r.Binarizer=P,r.BinaryBitmap=T,r.BitArray=D,r.BitMatrix=lt,r.BitSource=jl,r.BrowserAztecCodeReader=u2,r.BrowserBarcodeReader=g2,r.BrowserCodeReader=pn,r.BrowserDatamatrixCodeReader=w2,r.BrowserMultiFormatReader=b2,r.BrowserPDF417Reader=T2,r.BrowserQRCodeReader=N2,r.BrowserQRCodeSvgWriter=Jr,r.CharacterSetECI=X,r.ChecksumException=O,r.Code128Reader=ee,r.Code39Reader=ft,r.DataMatrixDecodedBitStreamParser=wr,r.DataMatrixReader=mr,r.DecodeHintType=V,r.DecoderResult=Es,r.DefaultGridSampler=Q0,r.DetectorResult=Lo,r.EAN13Reader=Kr,r.EncodeHintType=pt,r.Exception=x,r.FormatException=B,r.GenericGF=Oe,r.GenericGFPoly=$t,r.GlobalHistogramBinarizer=nt,r.GridSampler=kl,r.GridSamplerInstance=gr,r.HTMLCanvasElementLuminanceSource=ge,r.HybridBinarizer=we,r.ITFReader=Le,r.IllegalArgumentException=_,r.IllegalStateException=Un,r.InvertedLuminanceSource=de,r.LuminanceSource=te,r.MathUtils=be,r.MultiFormatOneDReader=Ai,r.MultiFormatReader=hh,r.MultiFormatWriter=O2,r.NotFoundException=W,r.OneDReader=ht,r.PDF417DecodedBitStreamParser=z,r.PDF417DecoderErrorCorrection=sh,r.PDF417Reader=bt,r.PDF417ResultMetadata=ah,r.PerspectiveTransform=In,r.PlanarYUVLuminanceSource=Hn,r.QRCodeByteMatrix=Go,r.QRCodeDataMask=mn,r.QRCodeDecodedBitStreamParser=Qe,r.QRCodeDecoderErrorCorrectionLevel=Ve,r.QRCodeDecoderFormatInformation=Pt,r.QRCodeEncoder=We,r.QRCodeEncoderQRCode=Qr,r.QRCodeMaskUtil=st,r.QRCodeMatrixUtil=he,r.QRCodeMode=ce,r.QRCodeReader=xr,r.QRCodeVersion=le,r.QRCodeWriter=Ii,r.RGBLuminanceSource=$l,r.RSS14Reader=it,r.RSSExpandedReader=K,r.ReaderException=Wo,r.ReedSolomonDecoder=Cs,r.ReedSolomonEncoder=Xl,r.ReedSolomonException=Ei,r.Result=Ze,r.ResultMetadataType=Et,r.ResultPoint=se,r.StringUtils=ae,r.UnsupportedOperationException=ue,r.VideoInputDevice=Ke,r.WhiteRectangleDetector=Jn,r.WriterException=Fe,r.ZXingArrays=I,r.ZXingCharset=dh,r.ZXingInteger=S,r.ZXingStandardCharsets=Kl,r.ZXingStringBuilder=pe,r.ZXingStringEncoding=Re,r.ZXingSystem=L,r.createAbstractExpandedDecoder=rh,Object.defineProperty(r,"__esModule",{value:!0})})})(Gc,Gc.exports);var Xe=Gc.exports;const j3=V2(Xe),V3=j2({__proto__:null,default:j3},[Xe]);var Zd=function(){function t(e,r,s){if(this.formatMap=new Map([[re.QR_CODE,Xe.BarcodeFormat.QR_CODE],[re.AZTEC,Xe.BarcodeFormat.AZTEC],[re.CODABAR,Xe.BarcodeFormat.CODABAR],[re.CODE_39,Xe.BarcodeFormat.CODE_39],[re.CODE_93,Xe.BarcodeFormat.CODE_93],[re.CODE_128,Xe.BarcodeFormat.CODE_128],[re.DATA_MATRIX,Xe.BarcodeFormat.DATA_MATRIX],[re.MAXICODE,Xe.BarcodeFormat.MAXICODE],[re.ITF,Xe.BarcodeFormat.ITF],[re.EAN_13,Xe.BarcodeFormat.EAN_13],[re.EAN_8,Xe.BarcodeFormat.EAN_8],[re.PDF_417,Xe.BarcodeFormat.PDF_417],[re.RSS_14,Xe.BarcodeFormat.RSS_14],[re.RSS_EXPANDED,Xe.BarcodeFormat.RSS_EXPANDED],[re.UPC_A,Xe.BarcodeFormat.UPC_A],[re.UPC_E,Xe.BarcodeFormat.UPC_E],[re.UPC_EAN_EXTENSION,Xe.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!V3)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=s;var l=this.createZXingFormats(e),c=new Map;c.set(Xe.DecodeHintType.POSSIBLE_FORMATS,l),c.set(Xe.DecodeHintType.TRY_HARDER,!1),this.hints=c}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(s,l){try{s(r.decode(e))}catch(c){l(c)}})},t.prototype.decode=function(e){var r=new Xe.MultiFormatReader(this.verbose,this.hints),s=new Xe.HTMLCanvasElementLuminanceSource(e),l=new Xe.BinaryBitmap(new Xe.HybridBinarizer(s)),c=r.decode(l);return{text:c.text,format:o2.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,s,l){e.set(r,s)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],s=0,l=e;s<l.length;s++){var c=l[s];this.formatMap.has(c)?r.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),z3=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})},H3=function(t,e){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(x){return function(E){return m([x,E])}}function m(x){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(r=0)),r;)try{if(s=1,l&&(c=x[0]&2?l.return:x[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,x[1])).done)return c;switch(l=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,l=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){r.label=x[1];break}if(x[0]===6&&r.label<c[1]){r.label=c[1],c=x;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(x);break}c[2]&&r.ops.pop(),r.trys.pop();continue}x=e.call(t,r)}catch(E){x=[6,E],l=0}finally{s=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Qd=function(){function t(e,r,s){if(this.formatMap=new Map([[re.QR_CODE,"qr_code"],[re.AZTEC,"aztec"],[re.CODABAR,"codabar"],[re.CODE_39,"code_39"],[re.CODE_93,"code_93"],[re.CODE_128,"code_128"],[re.DATA_MATRIX,"data_matrix"],[re.ITF,"itf"],[re.EAN_13,"ean_13"],[re.EAN_8,"ean_8"],[re.PDF_417,"pdf417"],[re.UPC_A,"upc_a"],[re.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=s;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return z3(this,void 0,void 0,function(){var r,s;return H3(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=l.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(r),[2,{text:s.rawValue,format:o2.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,s=0,l=0,c=e;l<c.length;l++){var f=c[l],p=f.boundingBox.width*f.boundingBox.height;p>s&&(s=p,r=f)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],s=0,l=e;s<l.length;s++){var c=l[s];this.formatMap.has(c)?r.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,s,l){e.set(r,s)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Jd=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})},ef=function(t,e){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(x){return function(E){return m([x,E])}}function m(x){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(r=0)),r;)try{if(s=1,l&&(c=x[0]&2?l.return:x[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,x[1])).done)return c;switch(l=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,l=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){r.label=x[1];break}if(x[0]===6&&r.label<c[1]){r.label=c[1],c=x;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(x);break}c[2]&&r.ops.pop(),r.trys.pop();continue}x=e.call(t,r)}catch(E){x=[6,E],l=0}finally{s=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},W3=function(){function t(e,r,s,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,r&&Qd.isSupported()?(this.primaryDecoder=new Qd(e,s,l),this.secondaryDecoder=new Zd(e,s,l)):this.primaryDecoder=new Zd(e,s,l)}return t.prototype.decodeAsync=function(e){return Jd(this,void 0,void 0,function(){var r;return ef(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Jd(this,void 0,void 0,function(){var r,s;return ef(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(s=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,s=this.executionResults;r<s.length;r++){var l=s[r];e+=l}var c=e/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),q0=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),il=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})},sl=function(t,e){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(x){return function(E){return m([x,E])}}function m(x){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(r=0)),r;)try{if(s=1,l&&(c=x[0]&2?l.return:x[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,x[1])).done)return c;switch(l=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,l=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){r.label=x[1];break}if(x[0]===6&&r.label<c[1]){r.label=c[1],c=x;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(x);break}c[2]&&r.ops.pop(),r.trys.pop();continue}x=e.call(t,r)}catch(E){x=[6,E],l=0}finally{s=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},l2=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var s={advanced:[r]};return this.track.applyConstraints(s)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),G3=function(t){q0(e,t);function e(r,s){return t.call(this,r,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var s={};s[this.name]=r;var l={advanced:[s]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),s=r[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(l2),X3=function(t){q0(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(G3),$3=function(t){q0(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(l2),K3=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new X3(this.track)},t.prototype.torchFeature=function(){return new $3(this.track)},t}(),Y3=function(){function t(e,r,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var s=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,l),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,s,l){return il(this,void 0,void 0,function(){var c,f;return sl(this,function(p){switch(p.label){case 0:return c=new t(e,r,l),s.aspectRatio?(f={aspectRatio:s.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:p.sent(),p.label=2;case 2:return c.setupSurface(),[2,c]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,s=function(){setTimeout(e,200),r.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return il(this,void 0,void 0,function(){return sl(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,s){var l=e.mediaStream.getVideoTracks(),c=l.length,f=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++f,f>=c&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new K3(this.getFirstTrackOrFail())},t}(),q3=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,s){return il(this,void 0,void 0,function(){return sl(this,function(l){return[2,Y3.create(e,this.mediaStream,r,s)]})})},t.create=function(e){return il(this,void 0,void 0,function(){var r,s;return sl(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return s=l.sent(),[2,new t(s)]}})})},t}(),tf=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})},nf=function(t,e){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(x){return function(E){return m([x,E])}}function m(x){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(r=0)),r;)try{if(s=1,l&&(c=x[0]&2?l.return:x[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,x[1])).done)return c;switch(l=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,l=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){r.label=x[1];break}if(x[0]===6&&r.label<c[1]){r.label=c[1],c=x;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(x);break}c[2]&&r.ops.pop(),r.trys.pop();continue}x=e.call(t,r)}catch(E){x=[6,E],l=0}finally{s=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Z3=function(){function t(){}return t.failIfNotSupported=function(){return tf(this,void 0,void 0,function(){return nf(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return tf(this,void 0,void 0,function(){return nf(this,function(r){return[2,q3.create(e)]})})},t}(),Q3=function(t,e,r,s){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function p(E){try{x(s.next(E))}catch(_){f(_)}}function m(E){try{x(s.throw(E))}catch(_){f(_)}}function x(E){E.done?c(E.value):l(E.value).then(p,m)}x((s=s.apply(t,e||[])).next())})},J3=function(t,e){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(x){return function(E){return m([x,E])}}function m(x){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,x[0]&&(r=0)),r;)try{if(s=1,l&&(c=x[0]&2?l.return:x[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,x[1])).done)return c;switch(l=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,l=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){r.label=x[1];break}if(x[0]===6&&r.label<c[1]){r.label=c[1],c=x;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(x);break}c[2]&&r.ops.pop(),r.trys.pop();continue}x=e.call(t,r)}catch(E){x=[6,E],l=0}finally{s=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},eE=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=qi.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=qi.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Q3(this,void 0,void 0,function(){var e,r,s,l,c,f,p;return J3(this,function(m){switch(m.label){case 0:return e=function(x){for(var E=x.getVideoTracks(),_=0,T=E;_<T.length;_++){var O=T[_];O.enabled=!1,O.stop(),x.removeTrack(O)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=m.sent(),l=[],c=0,f=s;c<f.length;c++)p=f[c],p.kind==="videoinput"&&l.push({id:p.deviceId,label:p.label});return e(r),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var s=function(c){for(var f=[],p=0,m=c;p<m.length;p++){var x=m[p];x.kind==="video"&&f.push({id:x.id,label:x.label})}e(f)},l=MediaStreamTrack;l.getSources(s)})},t}(),ot;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(ot||(ot={}));var tE=function(){function t(){this.state=ot.NOT_STARTED,this.onGoingTransactionNewState=ot.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===ot.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ot.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===ot.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ot.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ot.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case ot.UNKNOWN:throw"Transition from unknown is not allowed";case ot.NOT_STARTED:this.failIfNewStateIs(e,[ot.PAUSED]);break;case ot.SCANNING:break;case ot.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var s=0,l=r;s<l.length;s++){var c=l[s];if(e===c)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),nE=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===ot.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==ot.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ot.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===ot.PAUSED},t}(),rE=function(){function t(){}return t.create=function(){return new nE(new tE)},t}(),iE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),an=function(t){iE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(L3),sE=function(){function t(e,r){this.logger=r,this.fps=an.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=an.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?a2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!tr(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),oE=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof r=="boolean"?this.verbose=r===!0:r&&(s=r,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new U3(this.verbose),this.qrcode=new W3(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=rE.create()}return t.prototype.start=function(e,r,s,l){var c=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;l?f=l:f=this.verbose?this.logger.log:function(){};var p=sE.create(r,this.logger);this.clearElement();var m=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=m,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:an.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var _=this,T=this.stateManagerProxy.startTransition(ot.SCANNING);return new Promise(function(O,P){var L=x?p.videoConstraints:_.createVideoConstraints(e);if(!L){T.cancel(),P("videoConstraints should be defined");return}var $={};(!x||p.aspectRatio)&&($.aspectRatio=p.aspectRatio);var R={onRenderSurfaceReady:function(I,S){_.setupUi(I,S,p),_.isScanning=!0,_.foreverScan(p,s,f)}};Z3.failIfNotSupported().then(function(I){I.create(L).then(function(S){return S.render(c.element,$,R).then(function(D){_.renderedCamera=D,T.execute(),O(null)}).catch(function(D){T.cancel(),P(D)})}).catch(function(S){T.cancel(),P(qi.errorGettingUserMedia(S))})}).catch(function(I){T.cancel(),P(qi.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ot.PAUSED),this.showPausedState(),(tr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(ot.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(ot.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var c=document.getElementById(an.SHADED_REGION_ELEMENT_ID);c&&e.element.removeChild(c)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),s(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),r.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(s){return s.decodedText})},t.prototype.scanFileV2=function(e,r){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(tr(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,c){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var p=f.width,m=f.height,x=document.getElementById(s.elementId),E=x.clientWidth?x.clientWidth:an.DEFAULT_WIDTH,_=Math.max(x.clientHeight?x.clientHeight:m,an.FILE_SCAN_MIN_HEIGHT),T=s.computeCanvasDrawConfig(p,m,E,_);if(r){var O=s.createCanvasElement(E,_,"qr-canvas-visible");O.style.display="inline-block",x.appendChild(O);var P=O.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=E,P.canvas.height=_,P.drawImage(f,0,0,p,m,T.x,T.y,T.width,T.height)}var L=an.FILE_SCAN_HIDDEN_CANVAS_PADDING,$=Math.max(f.width,T.width),R=Math.max(f.height,T.height),I=$+2*L,S=R+2*L,D=s.createCanvasElement(I,S);x.appendChild(D);var G=D.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=I,G.canvas.height=S,G.drawImage(f,0,0,p,m,L,L,$,R);try{s.qrcode.decodeRobustlyAsync(D).then(function(V){l(qd.createFromQrcodeResult(V))}).catch(c)}catch(V){c("QR code parse error, error = ".concat(V))}},f.onerror=c,f.onabort=c,f.onstalled=c,f.onsuspend=c,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return eE.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!a2.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[re.QR_CODE,re.AZTEC,re.CODABAR,re.CODE_39,re.CODE_93,re.CODE_128,re.DATA_MATRIX,re.MAXICODE,re.ITF,re.EAN_13,re.EAN_8,re.PDF_417,re.RSS_14,re.RSS_EXPANDED,re.UPC_A,re.UPC_E,re.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],l=0,c=e.formatsToSupport;l<c.length;l++){var f=c[l];B3(f)?s.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(tr(e))return!0;if(!tr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(tr(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return tr(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,s){var l=this,c=s.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(e,r,c),p=function(x){if(x<an.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(an.MIN_QR_BOX_SIZE,"px.")},m=function(x){return x>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=e),x};p(f.width),p(f.height),f.width=m(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,r)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return s},t.prototype.setupUi=function(e,r,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,s);var l=tr(s.qrbox)?{width:e,height:r}:s.qrbox;this.validateQrboxConfig(l);var c=this.toQrdimensions(e,r,l);c.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=s.isShadedBoxEnabled()&&c.height<=r,p={x:0,y:0,width:e,height:r},m=f?this.getShadedRegionBounds(e,r,c):p,x=this.createCanvasElement(m.width,m.height),E={willReadFrequently:!0},_=x.getContext("2d",E);_.canvas.width=m.width,_.canvas.height=m.height,this.element.append(x),f&&this.possiblyInsertShadingElement(this.element,e,r,c),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=_,this.canvasElement=x},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=qi.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,qd.createFromQrcodeResult(l)),s.possiblyUpdateShaders(!0),!0}).catch(function(l){s.possiblyUpdateShaders(!1);var c=qi.codeParseError(l);return r(c,F3.createFrom(c)),!1})},t.prototype.foreverScan=function(e,r,s){var l=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),f=c.videoWidth/c.clientWidth,p=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*f,x=this.qrRegion.height*p,E=this.qrRegion.x*f,_=this.qrRegion.y*p;this.context.drawImage(c,E,_,m,x,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,r,s)},l.getTimeoutFps(e.fps))};this.scanContext(r,s).then(function(O){!O&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(r,s).finally(function(){T()})):T()}).catch(function(O){l.logger.logError("Error happend while scanning context",O),T()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",s="deviceId",l={user:!0,environment:!0},c="exact",f=function(P){if(P in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(P,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var m=Object.keys(e)[0];if(m!==r&&m!==s)throw"Only '".concat(r,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(m===r){var x=e.facingMode;if(typeof x=="string"){if(f(x))return{facingMode:x}}else if(typeof x=="object")if(c in x){if(f(x["".concat(c)]))return{facingMode:{exact:x["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var E=typeof x;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(c in _)return{deviceId:{exact:_["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var T=typeof _;throw"Invalid type of 'deviceId' = ".concat(T)}}}var O=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(O)},t.prototype.computeCanvasDrawConfig=function(e,r,s,l){if(e<=s&&r<=l){var c=(s-e)/2,f=(l-r)/2;return{x:c,y:f,width:e,height:r}}else{var p=e,m=r;return e>s&&(r=s/e*r,e=s),r>l&&(e=l/r*e,r=l),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(m)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,s,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?an.BORDER_SHADER_MATCH_COLOR:an.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,s){var l=e,c=r,f=document.createElement("canvas");return f.style.width="".concat(l,"px"),f.style.height="".concat(c,"px"),f.style.display="none",f.id=tr(s)?"qr-canvas":s,f},t.prototype.getShadedRegionBounds=function(e,r,s){if(s.width>e||s.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(r-s.height)/2,width:s.width,height:s.height}},t.prototype.possiblyInsertShadingElement=function(e,r,s,l){if(!(r-l.width<1||s-l.height<1)){var c=document.createElement("div");c.style.position="absolute";var f=(r-l.width)/2,p=(s-l.height)/2;if(c.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(an.SHADED_REGION_ELEMENT_ID),r-l.width<11||s-l.height<11)this.hasBorderShaders=!1;else{var m=5,x=40;this.insertShaderBorders(c,x,m,-m,null,0,!0),this.insertShaderBorders(c,x,m,-m,null,0,!1),this.insertShaderBorders(c,x,m,null,-m,0,!0),this.insertShaderBorders(c,x,m,null,-m,0,!1),this.insertShaderBorders(c,m,x+m,-m,null,-m,!0),this.insertShaderBorders(c,m,x+m,null,-m,-m,!0),this.insertShaderBorders(c,m,x+m,-m,null,-m,!1),this.insertShaderBorders(c,m,x+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(c)}},t.prototype.insertShaderBorders=function(e,r,s,l,c,f,p){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=an.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(r,"px"),m.style.height="".concat(s,"px"),l!==null&&(m.style.top="".concat(l,"px")),c!==null&&(m.style.bottom="".concat(c,"px")),p?m.style.left="".concat(f,"px"):m.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),rf;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(rf||(rf={}));function aE(){const[t,e]=Ie.useState(!1),[r,s]=Ie.useState(null),[l,c]=Ie.useState(""),f=Ie.useRef(null),{user:p}=Do(),m=async O=>{if(p)try{const{data:P,error:L}=await Mn.from("attendees").select("*").eq("qr_code",O).maybeSingle();if(L||!P){s({status:"not_found",message:"QR Code not found in system"});return}const{data:$,error:R}=await Mn.from("scans").select("*").eq("attendee_id",P.id).maybeSingle();if(R)throw R;if($){s({status:"already_scanned",attendee:{name:P.name,entry_gate:P.entry_gate,seating_position:P.seating_position},previousScan:{scanned_at:$.scanned_at},message:"Already scanned previously"});return}const{error:I}=await Mn.from("scans").insert({attendee_id:P.id,scanned_by:p.id});if(I)throw I;s({status:"success",attendee:{name:P.name,entry_gate:P.entry_gate,seating_position:P.seating_position},message:"Successfully scanned"})}catch(P){s({status:"error",message:P instanceof Error?P.message:"Failed to process scan"})}},x=async()=>{try{c(""),s(null);const O=new oE("qr-reader");f.current=O,await O.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},P=>{m(P),E()},()=>{}),e(!0)}catch(O){c("Failed to access camera. Please ensure camera permissions are granted."),console.error("Camera error:",O)}},E=async()=>{if(f.current)try{await f.current.stop(),f.current=null}catch(O){console.error("Error stopping scanner:",O)}e(!1)};Ie.useEffect(()=>()=>{f.current&&f.current.stop().catch(console.error)},[]);const _=()=>{switch(r==null?void 0:r.status){case"success":return F.jsx(zg,{className:"w-16 h-16 text-green-500"});case"already_scanned":return F.jsx(My,{className:"w-16 h-16 text-yellow-500"});case"not_found":case"error":return F.jsx(Wy,{className:"w-16 h-16 text-red-500"});default:return null}},T=()=>{switch(r==null?void 0:r.status){case"success":return"bg-green-50 border-green-200";case"already_scanned":return"bg-yellow-50 border-yellow-200";case"not_found":case"error":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}};return F.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[F.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"QR Code Scanner"}),l&&F.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:l}),!t&&!r&&F.jsxs("div",{className:"text-center py-12",children:[F.jsx("div",{className:"bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:F.jsx(By,{className:"w-10 h-10 text-blue-600"})}),F.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Ready to Scan"}),F.jsx("p",{className:"text-gray-600 mb-6",children:"Click the button below to start scanning QR codes"}),F.jsx("button",{onClick:x,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Start Scanning"})]}),t&&F.jsxs("div",{children:[F.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden mb-4"}),F.jsx("button",{onClick:E,className:"w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors",children:"Stop Scanning"})]}),r&&F.jsx("div",{className:`border rounded-lg p-6 ${T()}`,children:F.jsxs("div",{className:"flex flex-col items-center text-center",children:[_(),F.jsx("h3",{className:"text-xl font-bold text-gray-900 mt-4 mb-2",children:r.message}),r.attendee&&F.jsxs("div",{className:"mt-4 space-y-2 text-left w-full max-w-md",children:[F.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[F.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),F.jsx("p",{className:"font-semibold text-gray-900",children:r.attendee.name})]}),F.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[F.jsx("p",{className:"text-sm text-gray-600",children:"Entry Gate"}),F.jsx("p",{className:"font-semibold text-gray-900",children:r.attendee.entry_gate})]}),F.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[F.jsx("p",{className:"text-sm text-gray-600",children:"Seating Position"}),F.jsx("p",{className:"font-semibold text-gray-900",children:r.attendee.seating_position})]})]}),r.previousScan&&F.jsxs("div",{className:"mt-4 bg-white rounded-lg p-4 shadow-sm w-full max-w-md",children:[F.jsx("p",{className:"text-sm text-gray-600",children:"Previously Scanned At"}),F.jsx("p",{className:"font-semibold text-gray-900",children:new Date(r.previousScan.scanned_at).toLocaleString()})]}),F.jsx("button",{onClick:()=>{s(null),x()},className:"mt-6 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Scan Another QR Code"})]})})]})}function lE(){const[t,e]=Ie.useState([]),[r,s]=Ie.useState(!0),[l,c]=Ie.useState("");Ie.useEffect(()=>{f()},[]);const f=async()=>{s(!0);try{const{data:_,error:T}=await Mn.from("attendees").select("*").order("created_at",{ascending:!1});if(T)throw T;const{data:O,error:P}=await Mn.from("scans").select("*");if(P)throw P;const L=(_||[]).map($=>{const R=O==null?void 0:O.find(I=>I.attendee_id===$.id);return{...$,scan:R?{scanned_at:R.scanned_at}:void 0}});e(L)}catch(_){console.error("Error loading attendees:",_)}finally{s(!1)}},p=async _=>{const T=document.createElement("canvas");await yi.toCanvas(T,_.qr_code,{width:400,margin:2});const O=T.toDataURL("image/png"),P=document.createElement("a");P.href=O,P.download=`qr-${_.name.replace(/\s+/g,"-")}.png`,P.click()},m=t.filter(_=>_.name.toLowerCase().includes(l.toLowerCase())||_.entry_gate.toLowerCase().includes(l.toLowerCase())||_.seating_position.toLowerCase().includes(l.toLowerCase())),x=t.filter(_=>_.scan).length,E=t.length;return F.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[F.jsxs("div",{className:"mb-6",children:[F.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"All Attendees"}),F.jsx("div",{className:"flex items-center gap-4",children:F.jsxs("div",{className:"text-sm",children:[F.jsx("span",{className:"text-gray-600",children:"Scanned: "}),F.jsx("span",{className:"font-semibold text-green-600",children:x}),F.jsxs("span",{className:"text-gray-600",children:[" / ",E]})]})})]}),F.jsxs("div",{className:"relative",children:[F.jsx(zy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),F.jsx("input",{type:"text",placeholder:"Search by name, gate, or seat...",value:l,onChange:_=>c(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r?F.jsxs("div",{className:"text-center py-12",children:[F.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),F.jsx("p",{className:"text-gray-600 mt-4",children:"Loading attendees..."})]}):m.length===0?F.jsxs("div",{className:"text-center py-12",children:[F.jsx(Users,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),F.jsx("p",{className:"text-gray-600",children:l?"No attendees found matching your search":"No attendees yet"})]}):F.jsx("div",{className:"overflow-x-auto",children:F.jsxs("table",{className:"w-full",children:[F.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:F.jsxs("tr",{children:[F.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),F.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),F.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Entry Gate"}),F.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Seating Position"}),F.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Scan Time"}),F.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),F.jsx("tbody",{className:"divide-y divide-gray-200",children:m.map(_=>F.jsxs("tr",{className:"hover:bg-gray-50",children:[F.jsx("td",{className:"px-4 py-3",children:_.scan?F.jsx(zg,{className:"w-5 h-5 text-green-500"}):F.jsx(Uy,{className:"w-5 h-5 text-gray-400"})}),F.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:_.name}),F.jsx("td",{className:"px-4 py-3 text-gray-600",children:_.entry_gate}),F.jsx("td",{className:"px-4 py-3 text-gray-600",children:_.seating_position}),F.jsx("td",{className:"px-4 py-3 text-gray-600",children:_.scan?F.jsx("span",{className:"text-sm",children:new Date(_.scan.scanned_at).toLocaleString()}):F.jsx("span",{className:"text-sm text-gray-400",children:"Not scanned"})}),F.jsx("td",{className:"px-4 py-3",children:F.jsxs("button",{onClick:()=>p(_),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm",children:[F.jsx(bl,{className:"w-4 h-4"}),"QR"]})})]},_.id))})]})})]})}function uE(){const[t,e]=Ie.useState("upload"),{user:r,signOut:s}=Do(),l=[{id:"upload",label:"Upload CSV",icon:Hg},{id:"scanner",label:"Scan QR",icon:Hd},{id:"attendees",label:"Attendees",icon:Hy}];return F.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[F.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:F.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:F.jsxs("div",{className:"flex justify-between items-center h-16",children:[F.jsxs("div",{className:"flex items-center gap-3",children:[F.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:F.jsx(Hd,{className:"w-6 h-6 text-white"})}),F.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"QR Attendance System"})]}),F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsx("span",{className:"text-sm text-gray-600",children:r==null?void 0:r.email}),F.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[F.jsx(Vy,{className:"w-5 h-5"}),F.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})})}),F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[F.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:F.jsx("div",{className:"flex border-b border-gray-200",children:l.map(c=>{const f=c.icon;return F.jsxs("button",{onClick:()=>e(c.id),className:`flex-1 flex items-center justify-center gap-2 py-4 px-6 font-medium transition-colors ${t===c.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[F.jsx(f,{className:"w-5 h-5"}),F.jsx("span",{children:c.label})]},c.id)})})}),F.jsxs("div",{children:[t==="upload"&&F.jsx(M3,{}),t==="scanner"&&F.jsx(aE,{}),t==="attendees"&&F.jsx(lE,{})]})]})]})}function cE(){const{user:t,loading:e}=Do();return e?F.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:F.jsxs("div",{className:"text-center",children:[F.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),F.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):t?F.jsx(uE,{}):F.jsx(Gy,{})}function hE(){return F.jsx(ky,{children:F.jsx(cE,{})})}mg(document.getElementById("root")).render(F.jsx(Ie.StrictMode,{children:F.jsx(hE,{})}));
